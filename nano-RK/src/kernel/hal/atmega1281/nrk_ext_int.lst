   1               		.file	"nrk_ext_int.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.global __do_copy_data
   8               		.global __do_clear_bss
  11               		.text
  12               	.Ltext0:
 111               	.global	nrk_ext_int_enable
 113               	nrk_ext_int_enable:
 114               		.stabd	46,0,0
   1:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** /******************************************************************************
   2:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  Nano-RK, a real-time operating system for sensor networks.
   3:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  Copyright (C) 2007, Real-Time and Multimedia Lab, Carnegie Mellon University
   4:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  All rights reserved.
   5:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *
   6:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  This is the Open Source Version of Nano-RK included as part of a Dual
   7:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  Licensing Model. If you are unsure which license to use please refer to:
   8:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  http://www.nanork.org/nano-RK/wiki/Licensing
   9:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *
  10:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  This program is free software: you can redistribute it and/or modify
  11:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  it under the terms of the GNU General Public License as published by
  12:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  the Free Software Foundation, version 2.0 of the License.
  13:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *
  14:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  This program is distributed in the hope that it will be useful,
  15:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  but WITHOUT ANY WARRANTY; without even the implied warranty of
  16:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  17:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  GNU General Public License for more details.
  18:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *
  19:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  You should have received a copy of the GNU General Public License
  20:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  21:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *
  22:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  Contributing Authors (specific to this file):
  23:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *  Anthony Rowe
  24:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** *******************************************************************************/
  25:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
  26:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** #include <include.h>
  27:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** #include <avr/interrupt.h>
  28:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** #include <ulib.h>
  29:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** #include <nrk_ext_int.h>
  30:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** #include <nrk_error.h>
  31:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** #include <nrk_cfg.h>
  32:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
  33:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
  34:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** int8_t  nrk_ext_int_enable(uint8_t pin )
  35:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** {
 116               	.LM0:
 117               	.LFBB1:
 118               	/* prologue: function */
 119               	/* frame size = 0 */
  36:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_EXT_INT_0) { EIMSK |= BM(INT0); return NRK_OK; }
 121               	.LM1:
 122 0000 8823      		tst r24
 123 0002 01F4      		brne .L2
 124 0004 E89A      		sbi 61-0x20,0
 125 0006 00C0      		rjmp .L15
 126               	.L2:
  37:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_EXT_INT_1) { EIMSK |= BM(INT1); return NRK_OK; }
 128               	.LM2:
 129 0008 8130      		cpi r24,lo8(1)
 130 000a 01F4      		brne .L4
 131 000c E99A      		sbi 61-0x20,1
 132 000e 0895      		ret
 133               	.L4:
  38:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_EXT_INT_2) { EIMSK |= BM(INT2); return NRK_OK; }
 135               	.LM3:
 136 0010 8230      		cpi r24,lo8(2)
 137 0012 01F4      		brne .L5
 138 0014 EA9A      		sbi 61-0x20,2
 139 0016 00C0      		rjmp .L15
 140               	.L5:
  39:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_0 ) { PCMSK0 |= BM(PCINT0); return NRK_OK; }
 142               	.LM4:
 143 0018 8330      		cpi r24,lo8(3)
 144 001a 01F4      		brne .L6
 145 001c 8091 6B00 		lds r24,107
 146 0020 8160      		ori r24,lo8(1)
 147 0022 00C0      		rjmp .L16
 148               	.L6:
  40:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_1 ) { PCMSK0 |= BM(PCINT1); return NRK_OK; }
 150               	.LM5:
 151 0024 8430      		cpi r24,lo8(4)
 152 0026 01F4      		brne .L7
 153 0028 8091 6B00 		lds r24,107
 154 002c 8260      		ori r24,lo8(2)
 155 002e 00C0      		rjmp .L16
 156               	.L7:
  41:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_2 ) { PCMSK0 |= BM(PCINT2); return NRK_OK; }
 158               	.LM6:
 159 0030 8530      		cpi r24,lo8(5)
 160 0032 01F4      		brne .L8
 161 0034 8091 6B00 		lds r24,107
 162 0038 8460      		ori r24,lo8(4)
 163 003a 00C0      		rjmp .L16
 164               	.L8:
  42:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_3 ) { PCMSK0 |= BM(PCINT3); return NRK_OK; }
 166               	.LM7:
 167 003c 8630      		cpi r24,lo8(6)
 168 003e 01F4      		brne .L9
 169 0040 8091 6B00 		lds r24,107
 170 0044 8860      		ori r24,lo8(8)
 171 0046 00C0      		rjmp .L16
 172               	.L9:
  43:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_4 ) { PCMSK0 |= BM(PCINT4); return NRK_OK; }
 174               	.LM8:
 175 0048 8730      		cpi r24,lo8(7)
 176 004a 01F4      		brne .L10
 177 004c 8091 6B00 		lds r24,107
 178 0050 8061      		ori r24,lo8(16)
 179 0052 00C0      		rjmp .L16
 180               	.L10:
  44:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_5 ) { PCMSK0 |= BM(PCINT5); return NRK_OK; }
 182               	.LM9:
 183 0054 8830      		cpi r24,lo8(8)
 184 0056 01F4      		brne .L11
 185 0058 8091 6B00 		lds r24,107
 186 005c 8062      		ori r24,lo8(32)
 187 005e 00C0      		rjmp .L16
 188               	.L11:
  45:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_6 ) { PCMSK0 |= BM(PCINT6); return NRK_OK; }
 190               	.LM10:
 191 0060 8930      		cpi r24,lo8(9)
 192 0062 01F4      		brne .L12
 193 0064 8091 6B00 		lds r24,107
 194 0068 8064      		ori r24,lo8(64)
 195               	.L16:
 196 006a 8093 6B00 		sts 107,r24
 197               	.L15:
 198 006e 81E0      		ldi r24,lo8(1)
 199 0070 0895      		ret
 200               	.L12:
  46:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_7 ) { PCMSK0 |= BM(PCINT7); return NRK_OK; }
 202               	.LM11:
 203 0072 8A30      		cpi r24,lo8(10)
 204 0074 01F0      		breq .L13
 205 0076 8FEF      		ldi r24,lo8(-1)
 206 0078 0895      		ret
 207               	.L13:
 208 007a 8091 6B00 		lds r24,107
 209 007e 8068      		ori r24,lo8(-128)
 210 0080 8093 6B00 		sts 107,r24
 211 0084 81E0      		ldi r24,lo8(1)
  47:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** return NRK_ERROR;
  48:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** }
 213               	.LM12:
 214 0086 0895      		ret
 216               	.Lscope1:
 218               		.stabd	78,0,0
 221               	.global	nrk_ext_int_disable
 223               	nrk_ext_int_disable:
 224               		.stabd	46,0,0
  49:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
  50:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** int8_t  nrk_ext_int_disable(uint8_t pin )
  51:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** {
 226               	.LM13:
 227               	.LFBB2:
 228               	/* prologue: function */
 229               	/* frame size = 0 */
  52:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_EXT_INT_0) { EIMSK &= ~BM(INT0); return NRK_OK; }
 231               	.LM14:
 232 0088 8823      		tst r24
 233 008a 01F4      		brne .L19
 234 008c E898      		cbi 61-0x20,0
 235 008e 00C0      		rjmp .L32
 236               	.L19:
  53:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_EXT_INT_1) { EIMSK &= ~BM(INT1); return NRK_OK; }
 238               	.LM15:
 239 0090 8130      		cpi r24,lo8(1)
 240 0092 01F4      		brne .L21
 241 0094 E998      		cbi 61-0x20,1
 242 0096 0895      		ret
 243               	.L21:
  54:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_EXT_INT_2) { EIMSK &= ~BM(INT1); return NRK_OK; }
 245               	.LM16:
 246 0098 8230      		cpi r24,lo8(2)
 247 009a 01F4      		brne .L22
 248 009c E998      		cbi 61-0x20,1
 249 009e 00C0      		rjmp .L32
 250               	.L22:
  55:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_0 ) { PCMSK0 &= ~BM(PCINT0); return NRK_OK; }
 252               	.LM17:
 253 00a0 8330      		cpi r24,lo8(3)
 254 00a2 01F4      		brne .L23
 255 00a4 8091 6B00 		lds r24,107
 256 00a8 8E7F      		andi r24,lo8(-2)
 257 00aa 00C0      		rjmp .L33
 258               	.L23:
  56:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_1 ) { PCMSK0 &= ~BM(PCINT1); return NRK_OK; }
 260               	.LM18:
 261 00ac 8430      		cpi r24,lo8(4)
 262 00ae 01F4      		brne .L24
 263 00b0 8091 6B00 		lds r24,107
 264 00b4 8D7F      		andi r24,lo8(-3)
 265 00b6 00C0      		rjmp .L33
 266               	.L24:
  57:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_2 ) { PCMSK0 &= ~BM(PCINT2); return NRK_OK; }
 268               	.LM19:
 269 00b8 8530      		cpi r24,lo8(5)
 270 00ba 01F4      		brne .L25
 271 00bc 8091 6B00 		lds r24,107
 272 00c0 8B7F      		andi r24,lo8(-5)
 273 00c2 00C0      		rjmp .L33
 274               	.L25:
  58:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_3 ) { PCMSK0 &= ~BM(PCINT3); return NRK_OK; }
 276               	.LM20:
 277 00c4 8630      		cpi r24,lo8(6)
 278 00c6 01F4      		brne .L26
 279 00c8 8091 6B00 		lds r24,107
 280 00cc 877F      		andi r24,lo8(-9)
 281 00ce 00C0      		rjmp .L33
 282               	.L26:
  59:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_4 ) { PCMSK0 &= ~BM(PCINT4); return NRK_OK; }
 284               	.LM21:
 285 00d0 8730      		cpi r24,lo8(7)
 286 00d2 01F4      		brne .L27
 287 00d4 8091 6B00 		lds r24,107
 288 00d8 8F7E      		andi r24,lo8(-17)
 289 00da 00C0      		rjmp .L33
 290               	.L27:
  60:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_5 ) { PCMSK0 &= ~BM(PCINT5); return NRK_OK; }
 292               	.LM22:
 293 00dc 8830      		cpi r24,lo8(8)
 294 00de 01F4      		brne .L28
 295 00e0 8091 6B00 		lds r24,107
 296 00e4 8F7D      		andi r24,lo8(-33)
 297 00e6 00C0      		rjmp .L33
 298               	.L28:
  61:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_6 ) { PCMSK0 &= ~BM(PCINT6); return NRK_OK; }
 300               	.LM23:
 301 00e8 8930      		cpi r24,lo8(9)
 302 00ea 01F4      		brne .L29
 303 00ec 8091 6B00 		lds r24,107
 304 00f0 8F7B      		andi r24,lo8(-65)
 305               	.L33:
 306 00f2 8093 6B00 		sts 107,r24
 307               	.L32:
 308 00f6 81E0      		ldi r24,lo8(1)
 309 00f8 0895      		ret
 310               	.L29:
  62:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_7 ) { PCMSK0 &= ~BM(PCINT7); return NRK_OK; }
 312               	.LM24:
 313 00fa 8A30      		cpi r24,lo8(10)
 314 00fc 01F0      		breq .L30
 315 00fe 8FEF      		ldi r24,lo8(-1)
 316 0100 0895      		ret
 317               	.L30:
 318 0102 8091 6B00 		lds r24,107
 319 0106 8F77      		andi r24,lo8(127)
 320 0108 8093 6B00 		sts 107,r24
 321 010c 81E0      		ldi r24,lo8(1)
  63:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** return NRK_ERROR;
  64:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** }
 323               	.LM25:
 324 010e 0895      		ret
 326               	.Lscope2:
 328               		.stabd	78,0,0
 333               	.global	nrk_ext_int_configure
 335               	nrk_ext_int_configure:
 336               		.stabd	46,0,0
  65:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
  66:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
  67:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
  68:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** int8_t  nrk_ext_int_configure(uint8_t pin, uint8_t mode, void *callback_func)
  69:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** {
 338               	.LM26:
 339               	.LFBB3:
 340               	/* prologue: function */
 341               	/* frame size = 0 */
  70:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_EXT_INT_0)
 343               	.LM27:
 344 0110 8823      		tst r24
 345 0112 01F4      		brne .L35
  71:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	{
  72:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	ext_int0_callback=callback_func;
 347               	.LM28:
 348 0114 5093 0000 		sts (ext_int0_callback)+1,r21
 349 0118 4093 0000 		sts ext_int0_callback,r20
  73:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_LOW_TRIGGER) EICRA &= ~(BM(ISC01) | BM(ISC00));
 351               	.LM29:
 352 011c 6623      		tst r22
 353 011e 01F4      		brne .L36
 354 0120 8091 6900 		lds r24,105
 355 0124 8C7F      		andi r24,lo8(-4)
 356 0126 00C0      		rjmp .L52
 357               	.L36:
  74:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_LEVEL_TRIGGER) 
 359               	.LM30:
 360 0128 6130      		cpi r22,lo8(1)
 361 012a 01F4      		brne .L38
  75:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 		{ EICRA &= (~BM(ISC01)); EICRA |= BM(ISC00); }
 363               	.LM31:
 364 012c 8091 6900 		lds r24,105
 365 0130 8D7F      		andi r24,lo8(-3)
 366 0132 8093 6900 		sts 105,r24
 367 0136 8091 6900 		lds r24,105
 368 013a 8160      		ori r24,lo8(1)
 369 013c 00C0      		rjmp .L52
 370               	.L38:
  76:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_FALLING_EDGE) 
 372               	.LM32:
 373 013e 6230      		cpi r22,lo8(2)
 374 0140 01F4      		brne .L39
  77:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 		{ EICRA |= BM(ISC01); EICRA &= (~BM(ISC00)); }
 376               	.LM33:
 377 0142 8091 6900 		lds r24,105
 378 0146 8260      		ori r24,lo8(2)
 379 0148 8093 6900 		sts 105,r24
 380 014c 8091 6900 		lds r24,105
 381 0150 8E7F      		andi r24,lo8(-2)
 382 0152 00C0      		rjmp .L52
 383               	.L39:
  78:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_RISING_EDGE) EICRA |= BM(ISC01) | BM(ISC00);
 385               	.LM34:
 386 0154 6330      		cpi r22,lo8(3)
 387 0156 01F0      		breq .+2
 388 0158 00C0      		rjmp .L40
 389 015a 8091 6900 		lds r24,105
 390 015e 8360      		ori r24,lo8(3)
 391 0160 00C0      		rjmp .L52
 392               	.L35:
  79:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	return NRK_OK;
  80:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	}
  81:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_EXT_INT_1)
 394               	.LM35:
 395 0162 8130      		cpi r24,lo8(1)
 396 0164 01F4      		brne .L41
  82:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	{
  83:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	ext_int1_callback=callback_func;
 398               	.LM36:
 399 0166 5093 0000 		sts (ext_int1_callback)+1,r21
 400 016a 4093 0000 		sts ext_int1_callback,r20
  84:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_LOW_TRIGGER) EICRA &= ~(BM(ISC11) | BM(ISC10));
 402               	.LM37:
 403 016e 6623      		tst r22
 404 0170 01F4      		brne .L42
 405 0172 8091 6900 		lds r24,105
 406 0176 837F      		andi r24,lo8(-13)
 407 0178 00C0      		rjmp .L52
 408               	.L42:
  85:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_LEVEL_TRIGGER) 
 410               	.LM38:
 411 017a 6130      		cpi r22,lo8(1)
 412 017c 01F4      		brne .L43
  86:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 		{ EICRA &= (~BM(ISC11)); EICRA |= BM(ISC10); }
 414               	.LM39:
 415 017e 8091 6900 		lds r24,105
 416 0182 877F      		andi r24,lo8(-9)
 417 0184 8093 6900 		sts 105,r24
 418 0188 8091 6900 		lds r24,105
 419 018c 8460      		ori r24,lo8(4)
 420 018e 00C0      		rjmp .L52
 421               	.L43:
  87:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_FALLING_EDGE) 
 423               	.LM40:
 424 0190 6230      		cpi r22,lo8(2)
 425 0192 01F4      		brne .L44
  88:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 		{ EICRA |= BM(ISC11); EICRA &= (~BM(ISC10)); }
 427               	.LM41:
 428 0194 8091 6900 		lds r24,105
 429 0198 8860      		ori r24,lo8(8)
 430 019a 8093 6900 		sts 105,r24
 431 019e 8091 6900 		lds r24,105
 432 01a2 8B7F      		andi r24,lo8(-5)
 433 01a4 00C0      		rjmp .L52
 434               	.L44:
  89:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_RISING_EDGE) EICRA |= BM(ISC11) | BM(ISC10);
 436               	.LM42:
 437 01a6 6330      		cpi r22,lo8(3)
 438 01a8 01F4      		brne .L40
 439 01aa 8091 6900 		lds r24,105
 440 01ae 8C60      		ori r24,lo8(12)
 441               	.L52:
 442 01b0 8093 6900 		sts 105,r24
 443 01b4 00C0      		rjmp .L51
 444               	.L41:
  90:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	return NRK_OK;
  91:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	}
  92:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_EXT_INT_2)
 446               	.LM43:
 447 01b6 8230      		cpi r24,lo8(2)
 448 01b8 01F4      		brne .L45
  93:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	{
  94:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	ext_int1_callback=callback_func;
 450               	.LM44:
 451 01ba 5093 0000 		sts (ext_int1_callback)+1,r21
 452 01be 4093 0000 		sts ext_int1_callback,r20
  95:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_LOW_TRIGGER) EICRA &= ~(BM(ISC21) | BM(ISC20));
 454               	.LM45:
 455 01c2 6623      		tst r22
 456 01c4 01F4      		brne .L46
 457 01c6 8091 6900 		lds r24,105
 458 01ca 8F7C      		andi r24,lo8(-49)
 459 01cc 00C0      		rjmp .L52
 460               	.L46:
  96:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_LEVEL_TRIGGER) 
 462               	.LM46:
 463 01ce 6130      		cpi r22,lo8(1)
 464 01d0 01F4      		brne .L47
  97:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 		{ EICRA &= (~BM(ISC21)); EICRA |= BM(ISC20); }
 466               	.LM47:
 467 01d2 8091 6900 		lds r24,105
 468 01d6 8F7D      		andi r24,lo8(-33)
 469 01d8 8093 6900 		sts 105,r24
 470 01dc 8091 6900 		lds r24,105
 471 01e0 8061      		ori r24,lo8(16)
 472 01e2 00C0      		rjmp .L52
 473               	.L47:
  98:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_FALLING_EDGE) 
 475               	.LM48:
 476 01e4 6230      		cpi r22,lo8(2)
 477 01e6 01F4      		brne .L48
  99:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 		{ EICRA |= BM(ISC21); EICRA &= (~BM(ISC20)); }
 479               	.LM49:
 480 01e8 8091 6900 		lds r24,105
 481 01ec 8062      		ori r24,lo8(32)
 482 01ee 8093 6900 		sts 105,r24
 483 01f2 8091 6900 		lds r24,105
 484 01f6 8F7E      		andi r24,lo8(-17)
 485 01f8 00C0      		rjmp .L52
 486               	.L48:
 100:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(mode==NRK_RISING_EDGE) EICRA |= BM(ISC21) | BM(ISC20);
 488               	.LM50:
 489 01fa 6330      		cpi r22,lo8(3)
 490 01fc 01F4      		brne .L40
 491 01fe 8091 6900 		lds r24,105
 492 0202 8063      		ori r24,lo8(48)
 493 0204 00C0      		rjmp .L52
 494               	.L45:
 101:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	return NRK_OK;
 102:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	}
 103:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
 104:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
 105:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
 106:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** if(pin==NRK_PC_INT_0 || pin==NRK_PC_INT_1 || pin==NRK_PC_INT_2 || pin==NRK_PC_INT_3 || pin==NRK_PC_
 496               	.LM51:
 497 0206 8350      		subi r24,lo8(-(-3))
 498 0208 8830      		cpi r24,lo8(8)
 499 020a 00F0      		brlo .L49
 500 020c 8FEF      		ldi r24,lo8(-1)
 501 020e 0895      		ret
 502               	.L49:
 107:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	PCICR |= BM(PCIE0);	
 504               	.LM52:
 505 0210 8091 6800 		lds r24,104
 506 0214 8160      		ori r24,lo8(1)
 507 0216 8093 6800 		sts 104,r24
 108:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	pc_int0_callback=callback_func;
 509               	.LM53:
 510 021a 5093 0000 		sts (pc_int0_callback)+1,r21
 511 021e 4093 0000 		sts pc_int0_callback,r20
 512               	.L51:
 513 0222 81E0      		ldi r24,lo8(1)
 109:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	return NRK_OK;
 515               	.LM54:
 516 0224 0895      		ret
 517               	.L40:
 518 0226 81E0      		ldi r24,lo8(1)
 110:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	}
 111:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** return NRK_ERROR;
 112:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** }
 520               	.LM55:
 521 0228 0895      		ret
 523               	.Lscope3:
 525               		.stabd	78,0,0
 527               	.global	__vector_1
 529               	__vector_1:
 530               		.stabd	46,0,0
 113:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
 114:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
 115:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** SIGNAL(PCINT0_vect) {
 116:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(pc_int0_callback!=NULL) pc_int0_callback();
 117:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	else
 118:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	nrk_kernel_error_add(NRK_SEG_FAULT,0);
 119:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	return;  	
 120:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** }
 121:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
 122:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 
 123:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** SIGNAL(INT0_vect) {
 532               	.LM56:
 533               	.LFBB4:
 534 022a 1F92      		push __zero_reg__
 535 022c 0F92      		push r0
 536 022e 0FB6      		in r0,__SREG__
 537 0230 0F92      		push r0
 538 0232 0BB6      		in r0,91-0x20
 539 0234 0F92      		push r0
 540 0236 1124      		clr __zero_reg__
 541 0238 2F93      		push r18
 542 023a 3F93      		push r19
 543 023c 4F93      		push r20
 544 023e 5F93      		push r21
 545 0240 6F93      		push r22
 546 0242 7F93      		push r23
 547 0244 8F93      		push r24
 548 0246 9F93      		push r25
 549 0248 AF93      		push r26
 550 024a BF93      		push r27
 551 024c EF93      		push r30
 552 024e FF93      		push r31
 553               	/* prologue: Signal */
 554               	/* frame size = 0 */
 124:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	if(ext_int0_callback!=NULL) ext_int0_callback();
 556               	.LM57:
 557 0250 E091 0000 		lds r30,ext_int0_callback
 558 0254 F091 0000 		lds r31,(ext_int0_callback)+1
 559 0258 3097      		sbiw r30,0
 560 025a 01F0      		breq .L54
 561 025c 0995      		icall
 562 025e 00C0      		rjmp .L56
 563               	.L54:
 125:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	else
 126:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	nrk_kernel_error_add(NRK_SEG_FAULT,0);
 565               	.LM58:
 566 0260 8AE0      		ldi r24,lo8(10)
 567 0262 60E0      		ldi r22,lo8(0)
 568 0264 0E94 0000 		call nrk_kernel_error_add
 569               	.L56:
 570               	/* epilogue start */
 127:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** 	return;  	
 128:../../../src/kernel/hal/atmega1281/nrk_ext_int.c **** }
 572               	.LM59:
 573 0268 FF91      		pop r31
 574 026a EF91      		pop r30
 575 026c BF91      		pop r27
 576 026e AF91      		pop r26
 577 0270 9F91      		pop r25
 578 0272 8F91      		pop r24
 579 0274 7F91      		pop r23
 580 0276 6F91      		pop r22
 581 0278 5F91      		pop r21
 582 027a 4F91      		pop r20
 583 027c 3F91      		pop r19
 584 027e 2F91      		pop r18
 585 0280 0F90      		pop r0
 586 0282 0BBE      		out 91-0x20,r0
 587 0284 0F90      		pop r0
 588 0286 0FBE      		out __SREG__,r0
 589 0288 0F90      		pop r0
 590 028a 1F90      		pop __zero_reg__
 591 028c 1895      		reti
 593               	.Lscope4:
 595               		.stabd	78,0,0
 597               	.global	__vector_9
 599               	__vector_9:
 600               		.stabd	46,0,0
 602               	.LM60:
 603               	.LFBB5:
 604 028e 1F92      		push __zero_reg__
 605 0290 0F92      		push r0
 606 0292 0FB6      		in r0,__SREG__
 607 0294 0F92      		push r0
 608 0296 0BB6      		in r0,91-0x20
 609 0298 0F92      		push r0
 610 029a 1124      		clr __zero_reg__
 611 029c 2F93      		push r18
 612 029e 3F93      		push r19
 613 02a0 4F93      		push r20
 614 02a2 5F93      		push r21
 615 02a4 6F93      		push r22
 616 02a6 7F93      		push r23
 617 02a8 8F93      		push r24
 618 02aa 9F93      		push r25
 619 02ac AF93      		push r26
 620 02ae BF93      		push r27
 621 02b0 EF93      		push r30
 622 02b2 FF93      		push r31
 623               	/* prologue: Signal */
 624               	/* frame size = 0 */
 626               	.LM61:
 627 02b4 E091 0000 		lds r30,pc_int0_callback
 628 02b8 F091 0000 		lds r31,(pc_int0_callback)+1
 629 02bc 3097      		sbiw r30,0
 630 02be 01F0      		breq .L58
 631 02c0 0995      		icall
 632 02c2 00C0      		rjmp .L60
 633               	.L58:
 635               	.LM62:
 636 02c4 8AE0      		ldi r24,lo8(10)
 637 02c6 60E0      		ldi r22,lo8(0)
 638 02c8 0E94 0000 		call nrk_kernel_error_add
 639               	.L60:
 640               	/* epilogue start */
 642               	.LM63:
 643 02cc FF91      		pop r31
 644 02ce EF91      		pop r30
 645 02d0 BF91      		pop r27
 646 02d2 AF91      		pop r26
 647 02d4 9F91      		pop r25
 648 02d6 8F91      		pop r24
 649 02d8 7F91      		pop r23
 650 02da 6F91      		pop r22
 651 02dc 5F91      		pop r21
 652 02de 4F91      		pop r20
 653 02e0 3F91      		pop r19
 654 02e2 2F91      		pop r18
 655 02e4 0F90      		pop r0
 656 02e6 0BBE      		out 91-0x20,r0
 657 02e8 0F90      		pop r0
 658 02ea 0FBE      		out __SREG__,r0
 659 02ec 0F90      		pop r0
 660 02ee 1F90      		pop __zero_reg__
 661 02f0 1895      		reti
 663               	.Lscope5:
 665               		.stabd	78,0,0
 666               		.comm _nrk_signal_list,4,1
 667               		.comm ext_int0_callback,2,1
 668               		.comm ext_int1_callback,2,1
 669               		.comm ext_int2_callback,2,1
 670               		.comm pc_int0_callback,2,1
 671               		.comm error_task,1,1
 672               		.comm error_num,1,1
 681               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 nrk_ext_int.c
     /tmp/ccY6ElfL.s:2      *ABS*:0000003f __SREG__
     /tmp/ccY6ElfL.s:3      *ABS*:0000003e __SP_H__
     /tmp/ccY6ElfL.s:4      *ABS*:0000003d __SP_L__
     /tmp/ccY6ElfL.s:5      *ABS*:00000000 __tmp_reg__
     /tmp/ccY6ElfL.s:6      *ABS*:00000001 __zero_reg__
     /tmp/ccY6ElfL.s:113    .text:00000000 nrk_ext_int_enable
     /tmp/ccY6ElfL.s:223    .text:00000088 nrk_ext_int_disable
     /tmp/ccY6ElfL.s:335    .text:00000110 nrk_ext_int_configure
                            *COM*:00000002 ext_int0_callback
                            *COM*:00000002 ext_int1_callback
                            *COM*:00000002 pc_int0_callback
     /tmp/ccY6ElfL.s:529    .text:0000022a __vector_1
     /tmp/ccY6ElfL.s:599    .text:0000028e __vector_9
                            *COM*:00000004 _nrk_signal_list
                            *COM*:00000002 ext_int2_callback
                            *COM*:00000001 error_task
                            *COM*:00000001 error_num

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
nrk_kernel_error_add
