   1               		.file	"basic_rf.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.global __do_copy_data
   8               		.global __do_clear_bss
  11               		.text
  12               	.Ltext0:
 126               	.global	rf_power_down
 128               	rf_power_down:
 129               		.stabd	46,0,0
   1:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /******************************************************************************
   2:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  Nano-RK, a real-time operating system for sensor networks.
   3:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  Copyright (C) 2007, Real-Time and Multimedia Lab, Carnegie Mellon University
   4:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  All rights reserved.
   5:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *
   6:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  This is the Open Source Version of Nano-RK included as part of a Dual
   7:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  Licensing Model. If you are unsure which license to use please refer to:
   8:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  http://www.nanork.org/nano-RK/wiki/Licensing
   9:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *
  10:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  This program is free software: you can redistribute it and/or modify
  11:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  it under the terms of the GNU General Public License as published by
  12:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  the Free Software Foundation, version 2.0 of the License.
  13:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *
  14:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  This program is distributed in the hope that it will be useful,
  15:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  but WITHOUT ANY WARRANTY; without even the implied warranty of
  16:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  17:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  GNU General Public License for more details.
  18:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *
  19:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  You should have received a copy of the GNU General Public License
  20:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  21:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *
  22:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  Contributing Authors (specific to this file):
  23:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  Chipcon Development Team
  24:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  Anthony Rowe
  25:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  Nuno Pereira
  26:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *  Bach Bui 
  27:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** *******************************************************************************/
  28:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  29:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #include <include.h>
  30:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #include <basic_rf.h>
  31:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #include <ulib.h>
  32:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #include <nrk.h>
  33:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #include <nrk_events.h>
  34:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #include <nrk_error.h>
  35:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #include <nrk_timer.h>
  36:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #include <nrk_cpu.h>
  37:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  38:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #define OSC_STARTUP_DELAY	1000
  39:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  40:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void cc259x_rx()
  41:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
  42:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_gpio_set(NRK_DEBUG_1);
  43:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_gpio_clr(NRK_DEBUG_0);
  44:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
  45:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  46:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  47:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void cc259x_tx()
  48:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
  49:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_gpio_set(NRK_DEBUG_1);
  50:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_gpio_set(NRK_DEBUG_0);
  51:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
  52:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  53:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  54:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //#ifndef RADIO_PRIORITY_CEILING
  55:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  #define RADIO_PRIORITY_CEILING	20
  56:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //#endif
  57:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  58:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_t *radio_sem;
  59:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t auto_ack_enable;
  60:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t security_enable;
  61:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t last_pkt_encrypted;
  62:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint16_t mdmctrl0;
  63:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t tx_ctr[4];
  64:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t rx_ctr[4];
  65:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  66:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_power_down()
  67:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 131               	.LM0:
 132               	.LFBB1:
 133               	/* prologue: function */
 134               	/* frame size = 0 */
  68:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     DISABLE_GLOBAL_INT();
 136               	.LM1:
 137               	/* #APP */
 138               	 ;  68 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 139 0000 F894      		cli
 140               		
 141               	 ;  0 "" 2
  69:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_SXOSCOFF);
 143               	.LM2:
 144               	/* #NOAPP */
 145 0002 C098      		cbi 56-0x20,0
 146 0004 87E0      		ldi r24,lo8(7)
 147 0006 8FB9      		out 47-0x20,r24
 148               	.L2:
 149 0008 779B      		sbis 46-0x20,7
 150 000a 00C0      		rjmp .L2
 151 000c C09A      		sbi 56-0x20,0
  70:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_SRFOFF);  // shut off radio
 153               	.LM3:
 154 000e C098      		cbi 56-0x20,0
 155 0010 86E0      		ldi r24,lo8(6)
 156 0012 8FB9      		out 47-0x20,r24
 157               	.L3:
 158 0014 779B      		sbis 46-0x20,7
 159 0016 00C0      		rjmp .L3
 160 0018 C09A      		sbi 56-0x20,0
  71:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     ENABLE_GLOBAL_INT();
 162               	.LM4:
 163               	/* #APP */
 164               	 ;  71 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 165 001a 7894      		sei
 166               		
 167               	 ;  0 "" 2
 168               	/* epilogue start */
  72:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 170               	.LM5:
 171               	/* #NOAPP */
 172 001c 0895      		ret
 174               	.Lscope1:
 176               		.stabd	78,0,0
 178               	.global	rf_security_last_pkt_status
 180               	rf_security_last_pkt_status:
 181               		.stabd	46,0,0
  73:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  74:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_power_up()
  75:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
  76:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  77:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     DISABLE_GLOBAL_INT();
  78:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_SXOSCON);
  79:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_spin_wait_us(OSC_STARTUP_DELAY);
  80:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     ENABLE_GLOBAL_INT();
  81:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  82:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
  83:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  84:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  85:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** // Returns 1 if the last packet was encrypted, 0 otherwise
  86:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t rf_security_last_pkt_status()
  87:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 183               	.LM6:
 184               	.LFBB2:
 185               	/* prologue: function */
 186               	/* frame size = 0 */
  88:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** return last_pkt_encrypted;
  89:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 188               	.LM7:
 189 001e 8091 0000 		lds r24,last_pkt_encrypted
 190               	/* epilogue start */
 191 0022 0895      		ret
 193               	.Lscope2:
 195               		.stabd	78,0,0
 198               	.global	rf_security_set_ctr_counter
 200               	rf_security_set_ctr_counter:
 201               		.stabd	46,0,0
  90:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  91:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
  92:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_security_set_ctr_counter(uint8_t *counter)
  93:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 203               	.LM8:
 204               	.LFBB3:
 205               	/* prologue: function */
 206               	/* frame size = 0 */
 207 0024 FC01      		movw r30,r24
  94:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t n;
  95:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** // CTR counter value
  96:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** FASTSPI_WRITE_RAM(&counter[0],(CC2420RAM_TXNONCE+9),2,n); 
 209               	.LM9:
 210 0026 C098      		cbi 56-0x20,0
 211 0028 89EC      		ldi r24,lo8(-55)
 212 002a 8FB9      		out 47-0x20,r24
 213               	.L11:
 214 002c 779B      		sbis 46-0x20,7
 215 002e 00C0      		rjmp .L11
 216 0030 80E8      		ldi r24,lo8(-128)
 217 0032 8FB9      		out 47-0x20,r24
 218               	.L12:
 219 0034 779B      		sbis 46-0x20,7
 220 0036 00C0      		rjmp .L12
 221 0038 82E0      		ldi r24,lo8(2)
 222               	.L14:
 223 003a 8150      		subi r24,lo8(-(-1))
 224 003c DF01      		movw r26,r30
 225 003e A80F      		add r26,r24
 226 0040 B11D      		adc r27,__zero_reg__
 227 0042 9C91      		ld r25,X
 228 0044 9FB9      		out 47-0x20,r25
 229               	.L13:
 230 0046 779B      		sbis 46-0x20,7
 231 0048 00C0      		rjmp .L13
 232 004a 8823      		tst r24
 233 004c 01F4      		brne .L14
 234 004e C09A      		sbi 56-0x20,0
  97:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** FASTSPI_WRITE_RAM(&counter[2],(CC2420RAM_TXNONCE+11),2,n); 
 236               	.LM10:
 237 0050 C098      		cbi 56-0x20,0
 238 0052 8BEC      		ldi r24,lo8(-53)
 239 0054 8FB9      		out 47-0x20,r24
 240               	.L15:
 241 0056 779B      		sbis 46-0x20,7
 242 0058 00C0      		rjmp .L15
 243 005a 80E8      		ldi r24,lo8(-128)
 244 005c 8FB9      		out 47-0x20,r24
 245               	.L16:
 246 005e 779B      		sbis 46-0x20,7
 247 0060 00C0      		rjmp .L16
 248 0062 82E0      		ldi r24,lo8(2)
 249               	.L18:
 250 0064 8150      		subi r24,lo8(-(-1))
 251 0066 DF01      		movw r26,r30
 252 0068 A80F      		add r26,r24
 253 006a B11D      		adc r27,__zero_reg__
 254 006c 1296      		adiw r26,2
 255 006e 9C91      		ld r25,X
 256 0070 1297      		sbiw r26,2
 257 0072 9FB9      		out 47-0x20,r25
 258               	.L17:
 259 0074 779B      		sbis 46-0x20,7
 260 0076 00C0      		rjmp .L17
 261 0078 8823      		tst r24
 262 007a 01F4      		brne .L18
 263 007c C09A      		sbi 56-0x20,0
  98:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** tx_ctr[0]=counter[0];
 265               	.LM11:
 266 007e 8081      		ld r24,Z
 267 0080 8093 0000 		sts tx_ctr,r24
  99:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** tx_ctr[1]=counter[1];
 269               	.LM12:
 270 0084 8181      		ldd r24,Z+1
 271 0086 8093 0000 		sts tx_ctr+1,r24
 100:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** tx_ctr[2]=counter[2];
 273               	.LM13:
 274 008a 8281      		ldd r24,Z+2
 275 008c 8093 0000 		sts tx_ctr+2,r24
 101:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** tx_ctr[3]=counter[3];
 277               	.LM14:
 278 0090 8381      		ldd r24,Z+3
 279 0092 8093 0000 		sts tx_ctr+3,r24
 280               	/* epilogue start */
 102:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 282               	.LM15:
 283 0096 0895      		ret
 288               	.Lscope3:
 290               		.stabd	78,0,0
 293               	.global	rf_security_enable
 295               	rf_security_enable:
 296               		.stabd	46,0,0
 103:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 104:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 105:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_security_set_key(uint8_t *key)
 106:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 107:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t n,i;
 108:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint16_t key_buf;
 109:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 110:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** // Set AES key
 111:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_spin_wait_us(100); 
 112:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** for(i=0; i<8; i++ )
 113:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 114:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	key_buf=(key[i]<<8)|key[i+1]; 
 115:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****    	nrk_spin_wait_us(100); 
 116:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	FASTSPI_WRITE_RAM_LE(&key_buf,(CC2420RAM_KEY0+(i*2)),2,n); 
 117:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 118:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 119:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** // Set AES nonce to all zeros
 120:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_spin_wait_us(100); 
 121:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** for(i=0; i<7; i++ )
 122:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 123:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	key_buf=0; 
 124:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	FASTSPI_WRITE_RAM_LE(&key_buf,(CC2420RAM_TXNONCE+(i*2)),2,n); 
 125:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	FASTSPI_WRITE_RAM_LE(&key_buf,(CC2420RAM_RXNONCE+(i*2)),2,n); 
 126:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 127:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// block counter set 1
 128:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	key_buf=1; 
 129:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	FASTSPI_WRITE_RAM_LE(&key_buf,(CC2420RAM_TXNONCE+14),2,n); 
 130:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	FASTSPI_WRITE_RAM_LE(&key_buf,(CC2420RAM_RXNONCE+14),2,n); 
 131:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 132:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 133:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_security_enable(uint8_t *key)
 134:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 298               	.LM16:
 299               	.LFBB4:
 300               	/* prologue: function */
 301               	/* frame size = 0 */
 135:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_SECCTRL0, 0x0306); // Enable CTR encryption with key 0
 303               	.LM17:
 304 0098 C098      		cbi 56-0x20,0
 305 009a 89E1      		ldi r24,lo8(25)
 306 009c 8FB9      		out 47-0x20,r24
 307               	.L29:
 308 009e 779B      		sbis 46-0x20,7
 309 00a0 00C0      		rjmp .L29
 310 00a2 83E0      		ldi r24,lo8(3)
 311 00a4 8FB9      		out 47-0x20,r24
 312               	.L30:
 313 00a6 779B      		sbis 46-0x20,7
 314 00a8 00C0      		rjmp .L30
 315 00aa 86E0      		ldi r24,lo8(6)
 316 00ac 8FB9      		out 47-0x20,r24
 317               	.L31:
 318 00ae 779B      		sbis 46-0x20,7
 319 00b0 00C0      		rjmp .L31
 320 00b2 C09A      		sbi 56-0x20,0
 136:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_SECCTRL1, 0x0e0e); // Encrypt / Decrypt 18 bytes into header
 322               	.LM18:
 323 00b4 C098      		cbi 56-0x20,0
 324 00b6 8AE1      		ldi r24,lo8(26)
 325 00b8 8FB9      		out 47-0x20,r24
 326               	.L32:
 327 00ba 779B      		sbis 46-0x20,7
 328 00bc 00C0      		rjmp .L32
 329 00be 8EE0      		ldi r24,lo8(14)
 330 00c0 8FB9      		out 47-0x20,r24
 331               	.L33:
 332 00c2 779B      		sbis 46-0x20,7
 333 00c4 00C0      		rjmp .L33
 334 00c6 8EE0      		ldi r24,lo8(14)
 335 00c8 8FB9      		out 47-0x20,r24
 336               	.L34:
 337 00ca 779B      		sbis 46-0x20,7
 338 00cc 00C0      		rjmp .L34
 339 00ce C09A      		sbi 56-0x20,0
 137:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 138:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** security_enable=1;
 341               	.LM19:
 342 00d0 81E0      		ldi r24,lo8(1)
 343 00d2 8093 0000 		sts security_enable,r24
 344               	/* epilogue start */
 139:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 346               	.LM20:
 347 00d6 0895      		ret
 349               	.Lscope4:
 351               		.stabd	78,0,0
 353               	.global	rf_security_disable
 355               	rf_security_disable:
 356               		.stabd	46,0,0
 140:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 141:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 142:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 143:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_security_disable()
 144:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 358               	.LM21:
 359               	.LFBB5:
 360               	/* prologue: function */
 361               	/* frame size = 0 */
 145:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   FASTSPI_SETREG(CC2420_SECCTRL0, 0x01C4); // Turn off "Security enable"
 363               	.LM22:
 364 00d8 C098      		cbi 56-0x20,0
 365 00da 89E1      		ldi r24,lo8(25)
 366 00dc 8FB9      		out 47-0x20,r24
 367               	.L43:
 368 00de 779B      		sbis 46-0x20,7
 369 00e0 00C0      		rjmp .L43
 370 00e2 81E0      		ldi r24,lo8(1)
 371 00e4 8FB9      		out 47-0x20,r24
 372               	.L44:
 373 00e6 779B      		sbis 46-0x20,7
 374 00e8 00C0      		rjmp .L44
 375 00ea 84EC      		ldi r24,lo8(-60)
 376 00ec 8FB9      		out 47-0x20,r24
 377               	.L45:
 378 00ee 779B      		sbis 46-0x20,7
 379 00f0 00C0      		rjmp .L45
 380 00f2 C09A      		sbi 56-0x20,0
 146:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   security_enable=0;
 382               	.LM23:
 383 00f4 1092 0000 		sts security_enable,__zero_reg__
 384               	/* epilogue start */
 147:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 386               	.LM24:
 387 00f8 0895      		ret
 389               	.Lscope5:
 391               		.stabd	78,0,0
 393               	.global	rf_get_sem
 395               	rf_get_sem:
 396               		.stabd	46,0,0
 148:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 149:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 150:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** // The RF settings structure is declared here, since we'll always need halRfInit()
 151:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** volatile RF_SETTINGS rfSettings;
 152:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** volatile uint8_t rx_ready;
 153:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 154:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_t* rf_get_sem()
 155:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 398               	.LM25:
 399               	.LFBB6:
 400               	/* prologue: function */
 401               	/* frame size = 0 */
 156:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** return radio_sem;
 157:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 403               	.LM26:
 404 00fa 8091 0000 		lds r24,radio_sem
 405 00fe 9091 0000 		lds r25,radio_sem+1
 406               	/* epilogue start */
 407 0102 0895      		ret
 409               	.Lscope6:
 411               		.stabd	78,0,0
 414               	.global	rf_tx_power
 416               	rf_tx_power:
 417               		.stabd	46,0,0
 158:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 159:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_tx_power(uint8_t pwr)
 160:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 419               	.LM27:
 420               	.LFBB7:
 421               	/* prologue: function */
 422               	/* frame size = 0 */
 161:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint16_t tmp;
 162:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //tmp=0x5070;
 163:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 164:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_pend (radio_sem);
 165:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 166:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     tmp=0xA0E0;
 167:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     tmp=tmp | (pwr&0x1F);  
 424               	.LM28:
 425 0104 90E0      		ldi r25,lo8(0)
 426 0106 8F71      		andi r24,lo8(31)
 427 0108 9070      		andi r25,hi8(31)
 428 010a 806E      		ori r24,lo8(-24352)
 429 010c 906A      		ori r25,hi8(-24352)
 168:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_TXCTRL, tmp);   // Set the FIFOP threshold to maximum
 431               	.LM29:
 432 010e C098      		cbi 56-0x20,0
 433 0110 25E1      		ldi r18,lo8(21)
 434 0112 2FB9      		out 47-0x20,r18
 435               	.L53:
 436 0114 779B      		sbis 46-0x20,7
 437 0116 00C0      		rjmp .L53
 438 0118 9FB9      		out 47-0x20,r25
 439               	.L54:
 440 011a 779B      		sbis 46-0x20,7
 441 011c 00C0      		rjmp .L54
 442 011e 8FB9      		out 47-0x20,r24
 443               	.L55:
 444 0120 779B      		sbis 46-0x20,7
 445 0122 00C0      		rjmp .L55
 446 0124 C09A      		sbi 56-0x20,0
 447               	/* epilogue start */
 169:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 170:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_post(radio_sem);
 171:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 172:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 449               	.LM30:
 450 0126 0895      		ret
 455               	.Lscope7:
 457               		.stabd	78,0,0
 459               	.global	rf_addr_decode_enable
 461               	rf_addr_decode_enable:
 462               		.stabd	46,0,0
 173:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_set_channel( uint8_t channel )
 174:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 175:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 176:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_pend (radio_sem);
 177:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 178:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     halRfSetChannel(channel);
 179:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 180:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_post(radio_sem);
 181:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 182:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 183:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 184:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 185:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_addr_decode_enable()
 186:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 464               	.LM31:
 465               	.LFBB8:
 466               	/* prologue: function */
 467               	/* frame size = 0 */
 187:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     mdmctrl0 |= 0x0800;
 469               	.LM32:
 470 0128 8091 0000 		lds r24,mdmctrl0
 471 012c 9091 0000 		lds r25,(mdmctrl0)+1
 472 0130 9860      		ori r25,hi8(2048)
 473 0132 9093 0000 		sts (mdmctrl0)+1,r25
 474 0136 8093 0000 		sts mdmctrl0,r24
 188:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL0, mdmctrl0);
 476               	.LM33:
 477 013a C098      		cbi 56-0x20,0
 478 013c 21E1      		ldi r18,lo8(17)
 479 013e 2FB9      		out 47-0x20,r18
 480               	.L61:
 481 0140 779B      		sbis 46-0x20,7
 482 0142 00C0      		rjmp .L61
 483 0144 9FB9      		out 47-0x20,r25
 484               	.L62:
 485 0146 779B      		sbis 46-0x20,7
 486 0148 00C0      		rjmp .L62
 487 014a 8FB9      		out 47-0x20,r24
 488               	.L63:
 489 014c 779B      		sbis 46-0x20,7
 490 014e 00C0      		rjmp .L63
 491 0150 C09A      		sbi 56-0x20,0
 492               	/* epilogue start */
 189:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 494               	.LM34:
 495 0152 0895      		ret
 497               	.Lscope8:
 499               		.stabd	78,0,0
 501               	.global	rf_addr_decode_disable
 503               	rf_addr_decode_disable:
 504               		.stabd	46,0,0
 190:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 191:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_addr_decode_disable()
 192:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 506               	.LM35:
 507               	.LFBB9:
 508               	/* prologue: function */
 509               	/* frame size = 0 */
 193:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     mdmctrl0 &= (~0x0800);
 511               	.LM36:
 512 0154 8091 0000 		lds r24,mdmctrl0
 513 0158 9091 0000 		lds r25,(mdmctrl0)+1
 514 015c 977F      		andi r25,hi8(-2049)
 515 015e 9093 0000 		sts (mdmctrl0)+1,r25
 516 0162 8093 0000 		sts mdmctrl0,r24
 194:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL0, mdmctrl0);
 518               	.LM37:
 519 0166 C098      		cbi 56-0x20,0
 520 0168 21E1      		ldi r18,lo8(17)
 521 016a 2FB9      		out 47-0x20,r18
 522               	.L69:
 523 016c 779B      		sbis 46-0x20,7
 524 016e 00C0      		rjmp .L69
 525 0170 9FB9      		out 47-0x20,r25
 526               	.L70:
 527 0172 779B      		sbis 46-0x20,7
 528 0174 00C0      		rjmp .L70
 529 0176 8FB9      		out 47-0x20,r24
 530               	.L71:
 531 0178 779B      		sbis 46-0x20,7
 532 017a 00C0      		rjmp .L71
 533 017c C09A      		sbi 56-0x20,0
 534               	/* epilogue start */
 195:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 536               	.LM38:
 537 017e 0895      		ret
 539               	.Lscope9:
 541               		.stabd	78,0,0
 543               	.global	rf_auto_ack_enable
 545               	rf_auto_ack_enable:
 546               		.stabd	46,0,0
 196:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 197:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 198:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_auto_ack_enable()
 199:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 548               	.LM39:
 549               	.LFBB10:
 550               	/* prologue: function */
 551               	/* frame size = 0 */
 200:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     auto_ack_enable=1;
 553               	.LM40:
 554 0180 81E0      		ldi r24,lo8(1)
 555 0182 8093 0000 		sts auto_ack_enable,r24
 201:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     mdmctrl0 |= 0x0010;
 557               	.LM41:
 558 0186 8091 0000 		lds r24,mdmctrl0
 559 018a 9091 0000 		lds r25,(mdmctrl0)+1
 560 018e 8061      		ori r24,lo8(16)
 561 0190 9093 0000 		sts (mdmctrl0)+1,r25
 562 0194 8093 0000 		sts mdmctrl0,r24
 202:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL0, mdmctrl0); 
 564               	.LM42:
 565 0198 C098      		cbi 56-0x20,0
 566 019a 21E1      		ldi r18,lo8(17)
 567 019c 2FB9      		out 47-0x20,r18
 568               	.L77:
 569 019e 779B      		sbis 46-0x20,7
 570 01a0 00C0      		rjmp .L77
 571 01a2 9FB9      		out 47-0x20,r25
 572               	.L78:
 573 01a4 779B      		sbis 46-0x20,7
 574 01a6 00C0      		rjmp .L78
 575 01a8 8FB9      		out 47-0x20,r24
 576               	.L79:
 577 01aa 779B      		sbis 46-0x20,7
 578 01ac 00C0      		rjmp .L79
 579 01ae C09A      		sbi 56-0x20,0
 580               	/* epilogue start */
 203:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 582               	.LM43:
 583 01b0 0895      		ret
 585               	.Lscope10:
 587               		.stabd	78,0,0
 589               	.global	rf_auto_ack_disable
 591               	rf_auto_ack_disable:
 592               		.stabd	46,0,0
 204:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 205:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_auto_ack_disable()
 206:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 594               	.LM44:
 595               	.LFBB11:
 596               	/* prologue: function */
 597               	/* frame size = 0 */
 207:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     auto_ack_enable=0;
 599               	.LM45:
 600 01b2 1092 0000 		sts auto_ack_enable,__zero_reg__
 208:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     mdmctrl0 &= (~0x0010);
 602               	.LM46:
 603 01b6 8091 0000 		lds r24,mdmctrl0
 604 01ba 9091 0000 		lds r25,(mdmctrl0)+1
 605 01be 8F7E      		andi r24,lo8(-17)
 606 01c0 9093 0000 		sts (mdmctrl0)+1,r25
 607 01c4 8093 0000 		sts mdmctrl0,r24
 209:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL0, mdmctrl0);  
 609               	.LM47:
 610 01c8 C098      		cbi 56-0x20,0
 611 01ca 21E1      		ldi r18,lo8(17)
 612 01cc 2FB9      		out 47-0x20,r18
 613               	.L85:
 614 01ce 779B      		sbis 46-0x20,7
 615 01d0 00C0      		rjmp .L85
 616 01d2 9FB9      		out 47-0x20,r25
 617               	.L86:
 618 01d4 779B      		sbis 46-0x20,7
 619 01d6 00C0      		rjmp .L86
 620 01d8 8FB9      		out 47-0x20,r24
 621               	.L87:
 622 01da 779B      		sbis 46-0x20,7
 623 01dc 00C0      		rjmp .L87
 624 01de C09A      		sbi 56-0x20,0
 625               	/* epilogue start */
 210:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 627               	.LM48:
 628 01e0 0895      		ret
 630               	.Lscope11:
 632               		.stabd	78,0,0
 634               	.global	rf_rx_on
 636               	rf_rx_on:
 637               		.stabd	46,0,0
 211:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 212:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 213:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_addr_decode_set_my_mac(uint16_t my_mac)
 214:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 215:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t n;
 216:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     rfSettings.myAddr = my_mac;
 217:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_spin_wait_us(500);
 218:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_RAM_LE(&my_mac, CC2420RAM_SHORTADDR, 2, n);
 219:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_spin_wait_us(500);
 220:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 221:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 222:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 223:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 224:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_set_rx(RF_RX_INFO *pRRI, uint8_t channel )
 225:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 226:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 227:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 228:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_pend (radio_sem);
 229:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 230:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 231:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_SFLUSHRX);
 232:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_SFLUSHRX);
 233:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     halRfSetChannel(channel);
 234:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     rfSettings.pRxInfo = pRRI;
 235:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 236:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 237:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_post(radio_sem);
 238:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 239:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 240:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 241:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  void rf_init(RF_RX_INFO *pRRI, uint8_t channel, WORD panId, WORD myAddr)
 242:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //
 243:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  DESCRIPTION:
 244:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //      Initializes CC2420 for radio communication via the basic RF library functions. Turns on the
 245:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		voltage regulator, resets the CC2420, turns on the crystal oscillator, writes all necessary
 246:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		registers and protocol addresses (for automatic address recognition). Note that the crystal
 247:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		oscillator will remain on (forever).
 248:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //
 249:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  ARGUMENTS:
 250:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //      RF_RX_INFO *pRRI
 251:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //          A pointer the RF_RX_INFO data structure to be used during the first packet reception.
 252:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //			The structure can be switched upon packet reception.
 253:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //      uint8_t channel
 254:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //          The RF channel to be used (11 = 2405 MHz to 26 = 2480 MHz)
 255:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //      WORD panId
 256:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //          The personal area network identification number
 257:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //      WORD myAddr
 258:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //          The 16-bit short address which is used by this node. Must together with the PAN ID form
 259:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //			unique 32-bit identifier to avoid addressing conflicts. Normally, in a 802.15.4 network, the
 260:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //			short address will be given to associated nodes by the PAN coordinator.
 261:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 262:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_init(RF_RX_INFO *pRRI, uint8_t channel, uint16_t panId, uint16_t myAddr) {
 263:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     uint8_t n;
 264:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 265:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 266:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****    int8_t v;
 267:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     radio_sem = nrk_sem_create(1,RADIO_PRIORITY_CEILING);
 268:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if (radio_sem == NULL)
 269:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       nrk_kernel_error_add (NRK_SEMAPHORE_CREATE_ERROR, nrk_get_pid ());
 270:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 271:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   v = nrk_sem_pend (radio_sem);
 272:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   if (v == NRK_ERROR) {
 273:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_kprintf (PSTR ("CC2420 ERROR:  Access to semaphore failed\r\n"));
 274:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   }
 275:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 276:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 277:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Make sure that the voltage regulator is on, and that the reset pin is inactive
 278:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     SET_VREG_ACTIVE();
 279:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     halWait(1000);
 280:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     SET_RESET_ACTIVE();
 281:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     halWait(1);
 282:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     SET_RESET_INACTIVE();
 283:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     halWait(100);
 284:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 285:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Initialize the FIFOP external interrupt
 286:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //FIFOP_INT_INIT();
 287:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //ENABLE_FIFOP_INT();
 288:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 289:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Turn off all interrupts while we're accessing the CC2420 registers
 290:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	DISABLE_GLOBAL_INT();
 291:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 292:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_SXOSCON);
 293:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     mdmctrl0=0x02E2;
 294:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL0, mdmctrl0);  // Std Preamble, CRC, no auto ack, no hw addr decod
 295:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //FASTSPI_SETREG(CC2420_MDMCTRL0, 0x0AF2);  // Turn on automatic packet acknowledgment
 296:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 						// Turn on hw addre decoding 
 297:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL1, 0x0500); // Set the correlation threshold = 20
 298:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_IOCFG0, 0x007F);   // Set the FIFOP threshold to maximum
 299:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_SECCTRL0, 0x01C4); // Turn off "Security"
 300:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_RXCTRL1, 0x1A56); // All default except
 301:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 					    // reference bias current to RX
 302:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 					    // bandpass filter is set to 3uA 
 303:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 304:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /*
 305:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // FIXME: remove later for auto ack
 306:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     myAddr=MY_MAC;
 307:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     panId=0x02;
 308:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL0, 0x0AF2);  // Turn on automatic packet acknowledgment
 309:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //    FASTSPI_SETREG(CC2420_MDMCTRL0, 0x0AE2);  // Turn on automatic packet acknowledgment
 310:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_spin_wait_us(500);
 311:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_spin_wait_us(500);
 312:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_RAM_LE(&myAddr, CC2420RAM_SHORTADDR, 2, n);
 313:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_spin_wait_us(500);
 314:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_RAM_LE(&panId, CC2420RAM_PANID, 2, n);
 315:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_spin_wait_us(500);
 316:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 317:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****    printf( "myAddr=%d\r\n",myAddr );
 318:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** */
 319:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 320:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_spin_wait_us(500);
 321:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_RAM_LE(&panId, CC2420RAM_PANID, 2, n);
 322:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_spin_wait_us(500);
 323:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 324:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   	ENABLE_GLOBAL_INT();
 325:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 326:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Set the RF channel
 327:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     halRfSetChannel(channel);
 328:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 329:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Turn interrupts back on
 330:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	ENABLE_GLOBAL_INT();
 331:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 332:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Set the protocol configuration
 333:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	rfSettings.pRxInfo = pRRI;
 334:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	rfSettings.panId = panId;
 335:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	rfSettings.myAddr = myAddr;
 336:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	rfSettings.txSeqNumber = 0;
 337:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         rfSettings.receiveOn = FALSE;
 338:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 339:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Wait for the crystal oscillator to become stable
 340:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     halRfWaitForCrystalOscillator();
 341:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 342:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Write the short address and the PAN ID to the CC2420 RAM (requires that the XOSC is on and stab
 343:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****    //	DISABLE_GLOBAL_INT();
 344:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //    FASTSPI_WRITE_RAM_LE(&myAddr, CC2420RAM_SHORTADDR, 2, n);
 345:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //    FASTSPI_WRITE_RAM_LE(&panId, CC2420RAM_PANID, 2, n);
 346:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   //	ENABLE_GLOBAL_INT();
 347:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 348:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 349:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   v = nrk_sem_post (radio_sem);
 350:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   if (v == NRK_ERROR) {
 351:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_kprintf (PSTR ("CC2420 ERROR:  Release of semaphore failed\r\n"));
 352:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     _nrk_errno_set (2);
 353:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   }
 354:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 355:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 356:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** auto_ack_enable=0;
 357:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** security_enable=0;
 358:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** last_pkt_encrypted=0;
 359:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** } // rf_init() 
 360:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 361:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 362:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 363:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  void rf_rx_on(void)
 364:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //
 365:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  DESCRIPTION:
 366:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //      Enables the CC2420 receiver and the FIFOP interrupt. When a packet is received through this
 367:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //      interrupt, it will call rf_rx_callback(...), which must be defined by the application
 368:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 369:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_rx_on(void) {
 639               	.LM49:
 640               	.LFBB12:
 641               	/* prologue: function */
 642               	/* frame size = 0 */
 370:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 371:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_pend (radio_sem);
 372:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 373:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	rfSettings.receiveOn = TRUE;
 644               	.LM50:
 645 01e2 81E0      		ldi r24,lo8(1)
 646 01e4 8093 0000 		sts rfSettings+8,r24
 374:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 375:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef CC2420_OSC_OPT
 376:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SXOSCON);
 377:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	nrk_spin_wait_us(OSC_STARTUP_DELAY);
 378:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 379:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SRXON);
 648               	.LM51:
 649 01e8 C098      		cbi 56-0x20,0
 650 01ea 83E0      		ldi r24,lo8(3)
 651 01ec 8FB9      		out 47-0x20,r24
 652               	.L93:
 653 01ee 779B      		sbis 46-0x20,7
 654 01f0 00C0      		rjmp .L93
 655 01f2 C09A      		sbi 56-0x20,0
 380:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHRX);
 657               	.LM52:
 658 01f4 C098      		cbi 56-0x20,0
 659 01f6 88E0      		ldi r24,lo8(8)
 660 01f8 8FB9      		out 47-0x20,r24
 661               	.L94:
 662 01fa 779B      		sbis 46-0x20,7
 663 01fc 00C0      		rjmp .L94
 664 01fe C09A      		sbi 56-0x20,0
 381:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	rx_ready=0;
 666               	.LM53:
 667 0200 1092 0000 		sts rx_ready,__zero_reg__
 668               	/* epilogue start */
 382:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 383:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_post(radio_sem);
 384:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 385:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //	ENABLE_FIFOP_INT();
 386:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** } // rf_rx_on() 
 670               	.LM54:
 671 0204 0895      		ret
 673               	.Lscope12:
 675               		.stabd	78,0,0
 677               	.global	rf_polling_rx_on
 679               	rf_polling_rx_on:
 680               		.stabd	46,0,0
 387:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 388:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_polling_rx_on(void) {
 682               	.LM55:
 683               	.LFBB13:
 684               	/* prologue: function */
 685               	/* frame size = 0 */
 389:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 390:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_pend (radio_sem);
 391:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 392:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	rfSettings.receiveOn = TRUE;
 687               	.LM56:
 688 0206 81E0      		ldi r24,lo8(1)
 689 0208 8093 0000 		sts rfSettings+8,r24
 393:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef CC2420_OSC_OPT
 394:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SXOSCON);
 395:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	nrk_spin_wait_us(OSC_STARTUP_DELAY);
 396:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 397:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SRXON);
 691               	.LM57:
 692 020c C098      		cbi 56-0x20,0
 693 020e 83E0      		ldi r24,lo8(3)
 694 0210 8FB9      		out 47-0x20,r24
 695               	.L99:
 696 0212 779B      		sbis 46-0x20,7
 697 0214 00C0      		rjmp .L99
 698 0216 C09A      		sbi 56-0x20,0
 398:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHRX);
 700               	.LM58:
 701 0218 C098      		cbi 56-0x20,0
 702 021a 88E0      		ldi r24,lo8(8)
 703 021c 8FB9      		out 47-0x20,r24
 704               	.L100:
 705 021e 779B      		sbis 46-0x20,7
 706 0220 00C0      		rjmp .L100
 707 0222 C09A      		sbi 56-0x20,0
 399:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	rx_ready=0;
 709               	.LM59:
 710 0224 1092 0000 		sts rx_ready,__zero_reg__
 711               	/* epilogue start */
 400:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 401:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_post(radio_sem);
 402:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 403:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** } // rf_rx_on() 
 713               	.LM60:
 714 0228 0895      		ret
 716               	.Lscope13:
 718               		.stabd	78,0,0
 720               	.global	rf_rx_off
 722               	rf_rx_off:
 723               		.stabd	46,0,0
 404:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 405:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 406:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /**********************************************************
 407:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** // Here is a sample of the rf_rx_callback() that should
 408:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** // be placed in your application
 409:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 410:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** RF_RX_INFO* rf_rx_callback(RF_RX_INFO *pRRI) {
 411:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Its okay to leave this empty...    
 412:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	return pRRI;
 413:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }  
 414:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** ***********************************************************/
 415:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 416:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 417:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 418:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 419:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 420:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  void rf_rx_off(void)
 421:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //
 422:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  DESCRIPTION:
 423:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //      Disables the CC2420 receiver and the FIFOP interrupt.
 424:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 425:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_rx_off(void) {
 725               	.LM61:
 726               	.LFBB14:
 727               	/* prologue: function */
 728               	/* frame size = 0 */
 426:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 427:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_pend (radio_sem);
 428:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 429:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// XXX
 430:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	//SET_VREG_INACTIVE();	
 431:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	rfSettings.receiveOn = FALSE;
 730               	.LM62:
 731 022a 1092 0000 		sts rfSettings+8,__zero_reg__
 432:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SRFOFF);
 733               	.LM63:
 734 022e C098      		cbi 56-0x20,0
 735 0230 86E0      		ldi r24,lo8(6)
 736 0232 8FB9      		out 47-0x20,r24
 737               	.L105:
 738 0234 779B      		sbis 46-0x20,7
 739 0236 00C0      		rjmp .L105
 740 0238 C09A      		sbi 56-0x20,0
 433:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef CC2420_OSC_OPT
 434:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SXOSCOFF);
 435:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 436:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	rx_ready=0;
 742               	.LM64:
 743 023a 1092 0000 		sts rx_ready,__zero_reg__
 744               	/* epilogue start */
 437:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 438:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_sem_post(radio_sem);
 439:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 440:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //	DISABLE_FIFOP_INT();
 441:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** } // rf_rx_off() 
 746               	.LM65:
 747 023e 0895      		ret
 749               	.Lscope14:
 751               		.stabd	78,0,0
 753               	.global	rf_busy
 755               	rf_busy:
 756               		.stabd	46,0,0
 442:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 443:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 444:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /**************************************************************************
 445:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** This function is the same as normal TX, only it waits until the last
 446:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** second to send the duty out with the high speed timer.  And by duty, I mean
 447:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** the packet BIATCH...
 448:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** **************************************************************************/
 449:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t rf_tx_tdma_packet(RF_TX_INFO *pRTI, uint16_t slot_start_time, uint16_t tx_guard_time) {
 450:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	uint16_t frameControlField;
 451:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	uint8_t packetLength;
 452:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	uint8_t success;
 453:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	uint8_t spiStatusByte;
 454:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****    	uint8_t checksum,i;
 455:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	uint8_t timestamp;
 456:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 457:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 458:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_pend (radio_sem);
 459:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 460:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	timestamp=_nrk_os_timer_get();
 461:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// XXX 2 below are hacks...
 462:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef CC2420_OSC_OPT
 463:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SXOSCON);
 464:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	nrk_spin_wait_us(OSC_STARTUP_DELAY);
 465:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 466:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHRX);
 467:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHRX);
 468:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Wait until the transceiver is idle
 469:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****      while (FIFOP_IS_1 || SFD_IS_1);
 470:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Turn off global interrupts to avoid interference on the SPI interface
 471:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       DISABLE_GLOBAL_INT();
 472:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Flush the TX FIFO just in case...
 473:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHTX);
 474:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHTX);
 475:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 476:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     checksum=0;
 477:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     for(i=0; i<pRTI->length; i++ )
 478:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     {
 479:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// lets do our own payload checksum because we don't trust the CRC
 480:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	checksum+=pRTI->pPayload[i];
 481:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     }
 482:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     packetLength = pRTI->length + RF_PACKET_OVERHEAD_SIZE + CHECKSUM_OVERHEAD;
 483:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //nrk_set_led(3);
 484:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //do { } while(_nrk_get_high_speed_timer()<(tx_guard_time));
 485:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 486:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Write the packet to the TX FIFO (the FCS is appended automatically when AUTOCRC is enabled)
 487:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // These are only the MAC AGNOSTIC parameters...
 488:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Slots for example are at a higher layer since they assume TDMA
 489:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 490:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*)&packetLength, 1);               // Packet length
 491:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     frameControlField = pRTI->ackRequest ? RF_FCF_ACK : RF_FCF_NOACK;
 492:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &frameControlField, 2);         // Frame control field
 493:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &rfSettings.txSeqNumber, 1);    // Sequence number
 494:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &rfSettings.panId, 2);          // Dest. PAN ID
 495:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &pRTI->destAddr, 2);            // Dest. address
 496:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &rfSettings.myAddr, 2);         // Source address
 497:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 498:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     nrk_high_speed_timer_wait(slot_start_time,tx_guard_time);
 499:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //nrk_clr_led(3);
 500:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     /*
 501:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	DISABLE_GLOBAL_INT();
 502:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****      nrk_set_led(3);
 503:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     last=0;
 504:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	do {
 505:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	if(last==_nrk_get_high_speed_timer())
 506:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		{
 507:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		//while(1)
 508:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		//printf( "TX ERROR %d vs %d\r\n",_nrk_get_high_speed_timer(),tx_guard_time );
 509:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		break;
 510:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		}	
 511:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	last=_nrk_get_high_speed_timer();
 512:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 513:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	while((volatile)last<(tx_guard_time));
 514:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****      
 515:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     ENABLE_GLOBAL_INT();
 516:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	nrk_clr_led(3);
 517:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** */
 518:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /*
 519:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Turn on RX if necessary
 520:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if (!rfSettings.receiveOn) {
 521:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		FASTSPI_STROBE(CC2420_SRXON);
 522:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		}
 523:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 524:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Wait for the RSSI value to become valid
 525:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     do {
 526:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_UPD_STATUS(spiStatusByte);
 527:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     } while (!(spiStatusByte & BM(CC2420_RSSI_VALID)));
 528:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 529:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// TX begins after the CCA check has passed
 530:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     do {
 531:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		FASTSPI_STROBE(CC2420_STXONCCA);
 532:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		FASTSPI_UPD_STATUS(spiStatusByte);
 533:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		halWait(100);
 534:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     } while (!(spiStatusByte & BM(CC2420_TX_ACTIVE)));
 535:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** */
 536:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** if (pRTI->cca == TRUE)
 537:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     {
 538:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     uint8_t cnt;
 539:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       if (!rfSettings.receiveOn)
 540:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 541:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  FASTSPI_STROBE (CC2420_SRXON);
 542:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 543:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 544:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       // Wait for the RSSI value to become valid
 545:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       do
 546:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 547:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  FASTSPI_UPD_STATUS (spiStatusByte);
 548:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 549:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       while (!(spiStatusByte & BM (CC2420_RSSI_VALID)));
 550:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 551:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       // TX begins after the CCA check has passed
 552:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       cnt = 0;
 553:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       do
 554:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 555:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  FASTSPI_STROBE (CC2420_STXONCCA);
 556:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  FASTSPI_UPD_STATUS (spiStatusByte);
 557:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  cnt++;
 558:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  if (cnt > 100)
 559:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    {
 560:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	      ENABLE_GLOBAL_INT ();
 561:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		nrk_sem_post(radio_sem);
 562:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	      return FALSE;
 563:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    }
 564:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  halWait (100);
 565:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 566:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       while (!(spiStatusByte & BM (CC2420_TX_ACTIVE)));
 567:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     }
 568:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   else
 569:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE (CC2420_STXON);
 570:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	 //nrk_gpio_set(DEBUG_0);
 571:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 572:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 573:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Fill in the rest of the packet now
 574:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) pRTI->pPayload, pRTI->length);  // Payload
 575:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &checksum, 1);         // Checksum
 576:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 577:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 578:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 579:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //nrk_spin_wait_us(200);
 580:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  FASTSPI_STROBE(CC2420_STXON);
 581:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****    // Wait for the transmission to begin before exiting (makes sure that this function cannot be ca
 582:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// a second time, and thereby cancelling the first transmission (observe the FIFOP + SFD test abov
 583:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	while (!SFD_IS_1);
 584:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	success = TRUE;
 585:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 586:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Turn interrupts back on
 587:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //	ENABLE_GLOBAL_INT();
 588:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 589:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Wait for the acknowledge to be received, if any
 590:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     /*if (pRTI->ackRequest) {
 591:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		rfSettings.ackReceived = FALSE;
 592:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 593:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		// Wait for the SFD to go low again
 594:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		while (SFD_IS_1);
 595:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         // We'll enter RX automatically, so just wait until we can be sure that the ack reception s
 596:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         // The timeout consists of a 12-symbol turnaround time, the ack packet duration, and a smal
 597:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         halWait((12 * RF_SYMBOL_DURATION) + (RF_ACK_DURATION) + (2 * RF_SYMBOL_DURATION) + 100);
 598:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 599:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		// If an acknowledgment has been received (by the FIFOP interrupt), the ackReceived flag should b
 600:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		success = rfSettings.ackReceived;
 601:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     }*/
 602:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 603:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 604:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Turn off the receiver if it should not continue to be enabled
 605:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     DISABLE_GLOBAL_INT();
 606:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // XXX hack, temp out
 607:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //if (!rfSettings.receiveOn) { while (SFD_IS_1); /*FASTSPI_STROBE(CC2420_SRFOFF);*/ }
 608:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // while (SFD_IS_1); 
 609:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     while (SFD_IS_1); // wait for packet to finish
 610:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	
 611:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHRX);
 612:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHRX);
 613:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHTX);
 614:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SFLUSHTX);
 615:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 616:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef CC2420_OSC_OPT
 617:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** FASTSPI_STROBE(CC2420_SXOSCOFF);
 618:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 619:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** FASTSPI_STROBE(CC2420_SRFOFF);  // shut off radio
 620:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     ENABLE_GLOBAL_INT();
 621:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 622:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 623:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Increment the sequence number, and return the result
 624:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     rfSettings.txSeqNumber++;
 625:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //	while (SFD_IS_1);
 626:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 627:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_post(radio_sem);
 628:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 629:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 630:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     return success;
 631:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 632:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 633:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 634:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 635:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  BYTE rf_tx_packet(RF_TX_INFO *pRTI)
 636:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //
 637:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  DESCRIPTION:
 638:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		Transmits a packet using the IEEE 802.15.4 MAC data packet format with short addresses. CCA is
 639:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		measured only once before backet transmission (not compliant with 802.15.4 CSMA-CA).
 640:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		The function returns:
 641:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //			- When pRTI->ackRequest is FALSE: After the transmission has begun (SFD gone high)
 642:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //			- When pRTI->ackRequest is TRUE: After the acknowledgment has been received/declared missing.
 643:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		The acknowledgment is received through the FIFOP interrupt.
 644:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //
 645:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  ARGUMENTS:
 646:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //      RF_TX_INFO *pRTI
 647:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //          The transmission structure, which contains all relevant info about the packet.
 648:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //
 649:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  RETURN VALUE:
 650:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		uint8_t
 651:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //			Successful transmission (acknowledgment received)
 652:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //-------------------------------------------------------------------------------------------------
 653:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t rf_tx_packet(RF_TX_INFO *pRTI) {
 654:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	uint16_t frameControlField;
 655:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     uint8_t packetLength, length;
 656:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     uint8_t success;
 657:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     uint8_t spiStatusByte;
 658:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****    uint8_t checksum,i;
 659:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	
 660:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 661:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_pend(radio_sem);
 662:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 663:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 664:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef CC2420_OSC_OPT
 665:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** FASTSPI_STROBE(CC2420_SXOSCON);
 666:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	nrk_spin_wait_us(OSC_STARTUP_DELAY);
 667:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 668:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** if(security_enable)
 669:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_STXENC);
 670:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 671:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     checksum=0;
 672:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     for(i=0; i<pRTI->length; i++ )
 673:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     {
 674:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// lets do our own payload checksum because we don't trust the CRC
 675:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	checksum+=pRTI->pPayload[i];
 676:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     }
 677:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Write the packet to the TX FIFO (the FCS is appended automatically when AUTOCRC is enabled)
 678:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 679:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // These are only the MAC AGNOSTIC parameters...
 680:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Slots for example are at a slighly higher later since they assume TDMA
 681:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     packetLength = pRTI->length + RF_PACKET_OVERHEAD_SIZE + CHECKSUM_OVERHEAD;
 682:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if(security_enable) packetLength+=4;  // for CTR counter
 683:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 684:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 685:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****    	// XXX 2 below are hacks...
 686:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	//FASTSPI_STROBE(CC2420_SFLUSHRX);
 687:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	//FASTSPI_STROBE(CC2420_SFLUSHRX);
 688:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Wait until the transceiver is idle
 689:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     while (FIFOP_IS_1 || SFD_IS_1);
 690:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Turn off global interrupts to avoid interference on the SPI interface
 691:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     DISABLE_GLOBAL_INT();
 692:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Flush the TX FIFO just in case...
 693:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_SFLUSHTX);
 694:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_SFLUSHTX);
 695:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 696:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /*
 697:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Turn on RX if necessary
 698:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if (!rfSettings.receiveOn) {
 699:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		FASTSPI_STROBE(CC2420_SRXON);
 700:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		}
 701:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 702:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Wait for the RSSI value to become valid
 703:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     do {
 704:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_UPD_STATUS(spiStatusByte);
 705:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     } while (!(spiStatusByte & BM(CC2420_RSSI_VALID)));
 706:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 707:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// TX begins after the CCA check has passed
 708:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     do {
 709:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		FASTSPI_STROBE(CC2420_STXONCCA);
 710:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		FASTSPI_UPD_STATUS(spiStatusByte);
 711:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		halWait(100);
 712:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     } while (!(spiStatusByte & BM(CC2420_TX_ACTIVE)));
 713:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** */
 714:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*)&packetLength, 1);               // Packet length
 715:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     frameControlField = RF_FCF_NOACK;   // default
 716:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if(auto_ack_enable) frameControlField |= RF_ACK_BM;
 717:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if(security_enable) frameControlField |= RF_SEC_BM;
 718:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &frameControlField, 2);         // Frame control field
 719:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &rfSettings.txSeqNumber, 1);    // Sequence number
 720:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &rfSettings.panId, 2);          // Dest. PAN ID
 721:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &pRTI->destAddr, 2);            // Dest. address
 722:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &rfSettings.myAddr, 2);         // Source address
 723:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if(security_enable)
 724:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	FASTSPI_WRITE_FIFO((uint8_t*) &tx_ctr, 4);         // CTR counter 
 725:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****    
 726:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) pRTI->pPayload, pRTI->length);  // Payload
 727:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_WRITE_FIFO((uint8_t*) &checksum, 1);         // Checksum
 728:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 729:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** if (pRTI->cca == TRUE)
 730:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 731:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     uint8_t cnt;
 732:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****      if (!rfSettings.receiveOn)
 733:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 734:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  FASTSPI_STROBE (CC2420_SRXON);
 735:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 736:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       
 737:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       // Wait for the RSSI value to become valid
 738:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       do
 739:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 740:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  FASTSPI_UPD_STATUS (spiStatusByte);
 741:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 742:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       while (!(spiStatusByte & BM (CC2420_RSSI_VALID)));      
 743:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       // TX begins after the CCA check has passed
 744:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       cnt = 0;
 745:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       do
 746:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 747:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  FASTSPI_STROBE (CC2420_STXONCCA);
 748:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  FASTSPI_UPD_STATUS (spiStatusByte);
 749:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  cnt++;
 750:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  if (cnt > 100)
 751:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    {
 752:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	      ENABLE_GLOBAL_INT ();
 753:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	      nrk_sem_post(radio_sem);
 754:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	      return FALSE;
 755:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    }
 756:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	  halWait (100);
 757:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 758:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****       while (!(spiStatusByte & BM (CC2420_TX_ACTIVE)));
 759:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     }
 760:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   else
 761:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE (CC2420_STXON); 
 762:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 763:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   ENABLE_GLOBAL_INT();
 764:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Wait for the transmission to begin before exiting (makes sure that this function cannot be call
 765:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// a second time, and thereby cancelling the first transmission (observe the FIFOP + SFD test abov
 766:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   while (!SFD_IS_1);
 767:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****   success = TRUE;
 768:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 769:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Turn interrupts back on
 770:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //	ENABLE_GLOBAL_INT();
 771:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 772:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     while (SFD_IS_1); // wait for packet to finish
 773:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 774:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Wait for the acknowledge to be received, if any
 775:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if (auto_ack_enable) {
 776:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		rfSettings.ackReceived = FALSE;
 777:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 778:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		// Wait for the SFD to go low again
 779:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		//	while (SFD_IS_1);
 780:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         // We'll enter RX automatically, so just wait until we can be sure that the 
 781:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// ack reception should have finished
 782:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         // The timeout consists of a 12-symbol turnaround time, the ack packet duration, 
 783:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// and a small margin
 784:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         halWait((12 * RF_SYMBOL_DURATION) + (RF_ACK_DURATION) + (2 * RF_SYMBOL_DURATION) + 100);
 785:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 786:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	if(FIFO_IS_1)
 787:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 788:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_READ_FIFO_BYTE(length);
 789:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	length &= RF_LENGTH_MASK; // Ignore MSB
 790:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    success = TRUE;
 791:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 792:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}else
 793:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	{
 794:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_STROBE(CC2420_SFLUSHRX);
 795:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_STROBE(CC2420_SFLUSHRX);
 796:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    success = FALSE;
 797:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 798:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 799:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     }
 800:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 801:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 802:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Turn off the receiver if it should not continue to be enabled
 803:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 804:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     DISABLE_GLOBAL_INT();	
 805:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	//FASTSPI_STROBE(CC2420_SFLUSHRX);
 806:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	//FASTSPI_STROBE(CC2420_SFLUSHRX);
 807:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	//FASTSPI_STROBE(CC2420_SFLUSHTX);
 808:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	//FASTSPI_STROBE(CC2420_SFLUSHTX);
 809:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 810:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef CC2420_OSC_OPT
 811:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SXOSCOFF);
 812:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 813:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SRFOFF);  // shut off radio
 814:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     ENABLE_GLOBAL_INT();
 815:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 816:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // agr XXX hack to test time issue
 817:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     //rf_rx_on(); 
 818:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 819:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Increment the sequence number, and return the result
 820:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     rfSettings.txSeqNumber++;
 821:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //	while (SFD_IS_1);
 822:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 823:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_post(radio_sem);
 824:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 825:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     return success;
 826:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 827:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 828:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 829:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t rf_busy()
 830:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 758               	.LM66:
 759               	.LFBB15:
 760               	/* prologue: function */
 761               	/* frame size = 0 */
 831:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** return SFD_IS_1;
 763               	.LM67:
 764 0240 80B3      		in r24,48-0x20
 765 0242 90E0      		ldi r25,lo8(0)
 766 0244 24E0      		ldi r18,4
 767 0246 9695      	1:	lsr r25
 768 0248 8795      		ror r24
 769 024a 2A95      		dec r18
 770 024c 01F4      		brne 1b
 832:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 772               	.LM68:
 773 024e 8170      		andi r24,lo8(1)
 774               	/* epilogue start */
 775 0250 0895      		ret
 777               	.Lscope15:
 779               		.stabd	78,0,0
 781               	.global	rf_rx_check_fifop
 783               	rf_rx_check_fifop:
 784               		.stabd	46,0,0
 833:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 834:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t rf_rx_check_fifop()
 835:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 786               	.LM69:
 787               	.LFBB16:
 788               	/* prologue: function */
 789               	/* frame size = 0 */
 836:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** return FIFOP_IS_1;
 791               	.LM70:
 792 0252 81B1      		in r24,33-0x20
 793 0254 90E0      		ldi r25,lo8(0)
 794 0256 36E0      		ldi r19,6
 795 0258 9695      	1:	lsr r25
 796 025a 8795      		ror r24
 797 025c 3A95      		dec r19
 798 025e 01F4      		brne 1b
 837:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 800               	.LM71:
 801 0260 8170      		andi r24,lo8(1)
 802               	/* epilogue start */
 803 0262 0895      		ret
 805               	.Lscope16:
 807               		.stabd	78,0,0
 809               	.global	rf_rx_check_sfd
 811               	rf_rx_check_sfd:
 812               		.stabd	46,0,0
 838:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 839:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 840:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t rf_rx_check_sfd()
 841:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 814               	.LM72:
 815               	.LFBB17:
 816               	/* prologue: function */
 817               	/* frame size = 0 */
 842:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** return SFD_IS_1;
 819               	.LM73:
 820 0264 80B3      		in r24,48-0x20
 821 0266 90E0      		ldi r25,lo8(0)
 822 0268 44E0      		ldi r20,4
 823 026a 9695      	1:	lsr r25
 824 026c 8795      		ror r24
 825 026e 4A95      		dec r20
 826 0270 01F4      		brne 1b
 843:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 828               	.LM74:
 829 0272 8170      		andi r24,lo8(1)
 830               	/* epilogue start */
 831 0274 0895      		ret
 833               	.Lscope17:
 835               		.stabd	78,0,0
 837               	.global	rf_polling_rx_packet
 839               	rf_polling_rx_packet:
 840               		.stabd	46,0,0
 844:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint16_t tmp_blah;
 845:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 846:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** int8_t rf_polling_rx_packet()
 847:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 842               	.LM75:
 843               	.LFBB18:
 844 0276 DF93      		push r29
 845 0278 CF93      		push r28
 846 027a 00D0      		rcall .
 847 027c 00D0      		rcall .
 848 027e 0F92      		push __tmp_reg__
 849 0280 CDB7      		in r28,__SP_L__
 850 0282 DEB7      		in r29,__SP_H__
 851               	/* prologue: function */
 852               	/* frame size = 5 */
 848:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint8_t tmp;
 849:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	
 850:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 851:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_pend(radio_sem);
 852:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 853:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 854:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if(FIFOP_IS_1 )
 854               	.LM76:
 855 0284 0E99      		sbic 33-0x20,6
 856 0286 00C0      		rjmp .L115
 857 0288 80E0      		ldi r24,lo8(0)
 858 028a 00C0      		rjmp .L116
 859               	.L115:
 860               	.LBB2:
 855:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     {
 856:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	uint16_t frameControlField;
 857:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	int8_t length;
 858:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	uint8_t pFooter[2];
 859:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	uint8_t checksum,rx_checksum,i;
 860:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			
 861:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	last_pkt_encrypted=0;
 862               	.LM77:
 863 028c 1092 0000 		sts last_pkt_encrypted,__zero_reg__
 862:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 863:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //	FASTSPI_STROBE(CC2420_SRXON);
 864:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //	FASTSPI_STROBE(CC2420_SFLUSHRX);
 865:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 866:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //	while(!SFD_IS_1);
 867:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //  XXX Need to make sure SFD has gone down to be sure packet finished!
 868:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //	while(SFD_IS_1);
 869:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Clean up and exit in case of FIFO overflow, which is indicated by FIFOP = 1 and FIFO = 0
 870:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	if((FIFOP_IS_1) && (!(FIFO_IS_1))) {	   
 865               	.LM78:
 866 0290 0E9B      		sbis 33-0x20,6
 867 0292 00C0      		rjmp .L117
 868 0294 B799      		sbic 54-0x20,7
 869 0296 00C0      		rjmp .L117
 871:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    // always read 1 byte before flush (data sheet pg 62)
 872:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_READ_FIFO_BYTE(tmp);  
 871               	.LM79:
 872 0298 C098      		cbi 56-0x20,0
 873 029a 8FE7      		ldi r24,lo8(127)
 874 029c 8FB9      		out 47-0x20,r24
 875               	.L118:
 876 029e 779B      		sbis 46-0x20,7
 877 02a0 00C0      		rjmp .L118
 878 02a2 1FB8      		out 47-0x20,__zero_reg__
 879               	.L119:
 880 02a4 779B      		sbis 46-0x20,7
 881 02a6 00C0      		rjmp .L119
 882 02a8 8FB1      		in r24,47-0x20
 883 02aa C09A      		sbi 56-0x20,0
 873:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_STROBE(CC2420_SFLUSHRX);
 885               	.LM80:
 886 02ac C098      		cbi 56-0x20,0
 887 02ae 88E0      		ldi r24,lo8(8)
 888 02b0 8FB9      		out 47-0x20,r24
 889               	.L120:
 890 02b2 779B      		sbis 46-0x20,7
 891 02b4 00C0      		rjmp .L120
 892 02b6 C09A      		sbi 56-0x20,0
 874:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_STROBE(CC2420_SFLUSHRX);
 894               	.LM81:
 895 02b8 C098      		cbi 56-0x20,0
 896 02ba 88E0      		ldi r24,lo8(8)
 897 02bc 8FB9      		out 47-0x20,r24
 898               	.L121:
 899 02be 779B      		sbis 46-0x20,7
 900 02c0 00C0      		rjmp .L121
 901 02c2 C09A      		sbi 56-0x20,0
 902 02c4 8FEF      		ldi r24,lo8(-1)
 875:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 876:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    nrk_sem_post(radio_sem);
 877:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 878:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    return -1;
 904               	.LM82:
 905 02c6 00C0      		rjmp .L116
 906               	.L117:
 879:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 880:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 881:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// Payload length
 882:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_READ_FIFO_BYTE(length);
 908               	.LM83:
 909 02c8 C098      		cbi 56-0x20,0
 910 02ca 8FE7      		ldi r24,lo8(127)
 911 02cc 8FB9      		out 47-0x20,r24
 912               	.L122:
 913 02ce 779B      		sbis 46-0x20,7
 914 02d0 00C0      		rjmp .L122
 915 02d2 1FB8      		out 47-0x20,__zero_reg__
 916               	.L123:
 917 02d4 779B      		sbis 46-0x20,7
 918 02d6 00C0      		rjmp .L123
 919 02d8 8FB1      		in r24,47-0x20
 920 02da C09A      		sbi 56-0x20,0
 883:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	length &= RF_LENGTH_MASK; // Ignore MSB
 922               	.LM84:
 923 02dc 8F77      		andi r24,lo8(127)
 884:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Ignore the packet if the length is too short
 885:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if(length<=0){  
 925               	.LM85:
 926 02de 01F4      		brne .L124
 886:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    // always read 1 byte before flush (data sheet pg 62)
 887:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_READ_FIFO_BYTE(tmp);  
 928               	.LM86:
 929 02e0 C098      		cbi 56-0x20,0
 930 02e2 8FE7      		ldi r24,lo8(127)
 931 02e4 8FB9      		out 47-0x20,r24
 932               	.L125:
 933 02e6 779B      		sbis 46-0x20,7
 934 02e8 00C0      		rjmp .L125
 935 02ea 1FB8      		out 47-0x20,__zero_reg__
 936               	.L126:
 937 02ec 779B      		sbis 46-0x20,7
 938 02ee 00C0      		rjmp .L126
 939 02f0 8FB1      		in r24,47-0x20
 940 02f2 C09A      		sbi 56-0x20,0
 888:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_STROBE(CC2420_SFLUSHRX);
 942               	.LM87:
 943 02f4 C098      		cbi 56-0x20,0
 944 02f6 88E0      		ldi r24,lo8(8)
 945 02f8 8FB9      		out 47-0x20,r24
 946               	.L127:
 947 02fa 779B      		sbis 46-0x20,7
 948 02fc 00C0      		rjmp .L127
 949 02fe C09A      		sbi 56-0x20,0
 889:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_STROBE(CC2420_SFLUSHRX);
 951               	.LM88:
 952 0300 C098      		cbi 56-0x20,0
 953 0302 88E0      		ldi r24,lo8(8)
 954 0304 8FB9      		out 47-0x20,r24
 955               	.L128:
 956 0306 779B      		sbis 46-0x20,7
 957 0308 00C0      		rjmp .L128
 958 030a C09A      		sbi 56-0x20,0
 959 030c 8EEF      		ldi r24,lo8(-2)
 890:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 891:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    nrk_sem_post(radio_sem);
 892:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 893:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	return -2;
 961               	.LM89:
 962 030e 00C0      		rjmp .L116
 963               	.L124:
 894:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 895:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     if (length < (RF_PACKET_OVERHEAD_SIZE + CHECKSUM_OVERHEAD)/*RF_ACK_PACKET_SIZE*/ || (length-RF_
 965               	.LM90:
 966 0310 8C30      		cpi r24,lo8(12)
 967 0312 04F0      		brlt .L129
 968 0314 E091 0000 		lds r30,rfSettings
 969 0318 F091 0000 		lds r31,(rfSettings)+1
 970 031c 282F      		mov r18,r24
 971 031e 3327      		clr r19
 972 0320 27FD      		sbrc r18,7
 973 0322 3095      		com r19
 974 0324 2B50      		subi r18,lo8(-(-11))
 975 0326 3040      		sbci r19,hi8(-(-11))
 976 0328 4481      		ldd r20,Z+4
 977 032a 5527      		clr r21
 978 032c 47FD      		sbrc r20,7
 979 032e 5095      		com r21
 980 0330 4217      		cp r20,r18
 981 0332 5307      		cpc r21,r19
 982 0334 04F4      		brge .L130
 983               	.L129:
 896:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	FASTSPI_READ_FIFO_GARBAGE(length);
 985               	.LM91:
 986 0336 C098      		cbi 56-0x20,0
 987 0338 9FE7      		ldi r25,lo8(127)
 988 033a 9FB9      		out 47-0x20,r25
 989               	.L131:
 990 033c 779B      		sbis 46-0x20,7
 991 033e 00C0      		rjmp .L131
 992 0340 90E0      		ldi r25,lo8(0)
 993               	.LBB3:
 994 0342 282F      		mov r18,r24
 995 0344 3327      		clr r19
 996 0346 27FD      		sbrc r18,7
 997 0348 3095      		com r19
 998 034a 00C0      		rjmp .L132
 999               	.L135:
 1000 034c 1FB8      		out 47-0x20,__zero_reg__
 1001               	.L133:
 1002 034e 779B      		sbis 46-0x20,7
 1003 0350 00C0      		rjmp .L133
 1004 0352 9F5F      		subi r25,lo8(-(1))
 1005               	.L132:
 1006 0354 492F      		mov r20,r25
 1007 0356 50E0      		ldi r21,lo8(0)
 1008 0358 4217      		cp r20,r18
 1009 035a 5307      		cpc r21,r19
 1010 035c 04F4      		brge .L134
 1011 035e B799      		sbic 54-0x20,7
 1012 0360 00C0      		rjmp .L135
 1013               	.L134:
 1014               	.LBE3:
 1015 0362 C09A      		sbi 56-0x20,0
 897:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_READ_FIFO_BYTE(tmp);  
 1017               	.LM92:
 1018 0364 C098      		cbi 56-0x20,0
 1019 0366 8FE7      		ldi r24,lo8(127)
 1020 0368 8FB9      		out 47-0x20,r24
 1021               	.L136:
 1022 036a 779B      		sbis 46-0x20,7
 1023 036c 00C0      		rjmp .L136
 1024 036e 1FB8      		out 47-0x20,__zero_reg__
 1025               	.L137:
 1026 0370 779B      		sbis 46-0x20,7
 1027 0372 00C0      		rjmp .L137
 1028 0374 8FB1      		in r24,47-0x20
 1029 0376 C09A      		sbi 56-0x20,0
 898:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_STROBE(CC2420_SFLUSHRX);
 1031               	.LM93:
 1032 0378 C098      		cbi 56-0x20,0
 1033 037a 88E0      		ldi r24,lo8(8)
 1034 037c 8FB9      		out 47-0x20,r24
 1035               	.L138:
 1036 037e 779B      		sbis 46-0x20,7
 1037 0380 00C0      		rjmp .L138
 1038 0382 C09A      		sbi 56-0x20,0
 899:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    FASTSPI_STROBE(CC2420_SFLUSHRX);
 1040               	.LM94:
 1041 0384 C098      		cbi 56-0x20,0
 1042 0386 88E0      		ldi r24,lo8(8)
 1043 0388 8FB9      		out 47-0x20,r24
 1044               	.L139:
 1045 038a 779B      		sbis 46-0x20,7
 1046 038c 00C0      		rjmp .L139
 1047 038e C09A      		sbi 56-0x20,0
 1048 0390 8DEF      		ldi r24,lo8(-3)
 900:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 901:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    nrk_sem_post(radio_sem);
 902:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 903:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	return -3;
 1050               	.LM95:
 1051 0392 00C0      		rjmp .L116
 1052               	.L130:
 904:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	//printf_u( "Bad length: %d %d\n",length, rfSettings.pRxInfo->max_length );
 905:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     // Otherwise, if the length is valid, then proceed with the rest of the packet
 906:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     } else {
 907:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         // Register the payload length
 908:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         rfSettings.pRxInfo->length = length - RF_PACKET_OVERHEAD_SIZE - CHECKSUM_OVERHEAD;
 1054               	.LM96:
 1055 0394 E091 0000 		lds r30,rfSettings
 1056 0398 F091 0000 		lds r31,(rfSettings)+1
 1057 039c 8C50      		subi r24,lo8(-(-12))
 1058 039e 8383      		std Z+3,r24
 909:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         // Read the frame control field and the data sequence number
 910:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_READ_FIFO_NO_WAIT((uint8_t*) &frameControlField, 2);
 1060               	.LM97:
 1061 03a0 C098      		cbi 56-0x20,0
 1062 03a2 8FE7      		ldi r24,lo8(127)
 1063 03a4 8FB9      		out 47-0x20,r24
 1064               	.L140:
 1065 03a6 779B      		sbis 46-0x20,7
 1066 03a8 00C0      		rjmp .L140
 1067 03aa FE01      		movw r30,r28
 1068 03ac 3296      		adiw r30,2
 1070               	.LM98:
 1071 03ae CF01      		movw r24,r30
 1072 03b0 0296      		adiw r24,2
 1073               	.L142:
 1074               	.LBB4:
 1076               	.LM99:
 1077 03b2 1FB8      		out 47-0x20,__zero_reg__
 1078               	.L141:
 1079 03b4 779B      		sbis 46-0x20,7
 1080 03b6 00C0      		rjmp .L141
 1081 03b8 2FB1      		in r18,47-0x20
 1082 03ba 2193      		st Z+,r18
 1083 03bc E817      		cp r30,r24
 1084 03be F907      		cpc r31,r25
 1085 03c0 01F4      		brne .L142
 1086               	.LBE4:
 1087 03c2 C09A      		sbi 56-0x20,0
 911:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         rfSettings.pRxInfo->ackRequest = !!(frameControlField & RF_FCF_ACK_BM);
 1089               	.LM100:
 1090 03c4 E091 0000 		lds r30,rfSettings
 1091 03c8 F091 0000 		lds r31,(rfSettings)+1
 1092 03cc 8A81      		ldd r24,Y+2
 1093 03ce 9B81      		ldd r25,Y+3
 1094 03d0 55E0      		ldi r21,5
 1095 03d2 9695      	1:	lsr r25
 1096 03d4 8795      		ror r24
 1097 03d6 5A95      		dec r21
 1098 03d8 01F4      		brne 1b
 1099 03da 8170      		andi r24,lo8(1)
 1100 03dc 8783      		std Z+7,r24
 912:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	FASTSPI_READ_FIFO_BYTE(rfSettings.pRxInfo->seqNumber);
 1102               	.LM101:
 1103 03de C098      		cbi 56-0x20,0
 1104 03e0 8FE7      		ldi r24,lo8(127)
 1105 03e2 8FB9      		out 47-0x20,r24
 1106               	.L143:
 1107 03e4 779B      		sbis 46-0x20,7
 1108 03e6 00C0      		rjmp .L143
 1109 03e8 1FB8      		out 47-0x20,__zero_reg__
 1110               	.L144:
 1111 03ea 779B      		sbis 46-0x20,7
 1112 03ec 00C0      		rjmp .L144
 1113 03ee E091 0000 		lds r30,rfSettings
 1114 03f2 F091 0000 		lds r31,(rfSettings)+1
 1115 03f6 8FB1      		in r24,47-0x20
 1116 03f8 8083      		st Z,r24
 1117 03fa C09A      		sbi 56-0x20,0
 913:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 914:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		// Is this an acknowledgment packet?
 915:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /*
 916:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     	if ((length == RF_ACK_PACKET_SIZE) && (frameControlField == RF_ACK_FCF) && (rfSettings.pRxInfo
 917:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 918:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  	       	// Read the footer and check for CRC OK
 919:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			FASTSPI_READ_FIFO_NO_WAIT((uint8_t*) pFooter, 2);
 920:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 921:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			// Indicate the successful ack reception (this flag is polled by the transmission routine)
 922:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			if (pFooter[1] & RF_CRC_OK_BM) rfSettings.ackReceived = TRUE;
 923:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  
 924:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		// Too small to be a valid packet?
 925:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		} else if (length < RF_PACKET_OVERHEAD_SIZE) {
 926:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			FASTSPI_READ_FIFO_GARBAGE(length - 3);
 927:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 928:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		// Receive the rest of the packet
 929:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		} else {
 930:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** */
 931:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			// Skip the destination PAN and address (that's taken care of by harware address recognition!)
 932:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		FASTSPI_READ_FIFO_GARBAGE(4);
 1119               	.LM102:
 1120 03fc C098      		cbi 56-0x20,0
 1121 03fe 8FE7      		ldi r24,lo8(127)
 1122 0400 8FB9      		out 47-0x20,r24
 1123               	.L145:
 1124 0402 779B      		sbis 46-0x20,7
 1125 0404 00C0      		rjmp .L145
 1126 0406 80E0      		ldi r24,lo8(0)
 1127 0408 00C0      		rjmp .L146
 1128               	.L149:
 1129               	.LBB5:
 1130 040a 1FB8      		out 47-0x20,__zero_reg__
 1131               	.L147:
 1132 040c 779B      		sbis 46-0x20,7
 1133 040e 00C0      		rjmp .L147
 1134 0410 8F5F      		subi r24,lo8(-(1))
 1135 0412 8430      		cpi r24,lo8(4)
 1136 0414 01F0      		breq .L148
 1137               	.L146:
 1138 0416 B799      		sbic 54-0x20,7
 1139 0418 00C0      		rjmp .L149
 1140               	.L148:
 1141               	.LBE5:
 1142 041a C09A      		sbi 56-0x20,0
 933:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 934:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			// Read the source address
 935:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			FASTSPI_READ_FIFO_NO_WAIT((uint8_t*) &rfSettings.pRxInfo->srcAddr, 2);
 1144               	.LM103:
 1145 041c C098      		cbi 56-0x20,0
 1146 041e 8FE7      		ldi r24,lo8(127)
 1147 0420 8FB9      		out 47-0x20,r24
 1148               	.L150:
 1149 0422 779B      		sbis 46-0x20,7
 1150 0424 00C0      		rjmp .L150
 1151 0426 80E0      		ldi r24,lo8(0)
 1152 0428 90E0      		ldi r25,hi8(0)
 1153               	.L152:
 1154               	.LBB6:
 1155 042a 1FB8      		out 47-0x20,__zero_reg__
 1156               	.L151:
 1157 042c 779B      		sbis 46-0x20,7
 1158 042e 00C0      		rjmp .L151
 1159 0430 E091 0000 		lds r30,rfSettings
 1160 0434 F091 0000 		lds r31,(rfSettings)+1
 1161 0438 2FB1      		in r18,47-0x20
 1162 043a E80F      		add r30,r24
 1163 043c F91F      		adc r31,r25
 1164 043e 2183      		std Z+1,r18
 1165 0440 0196      		adiw r24,1
 1166 0442 8230      		cpi r24,2
 1167 0444 9105      		cpc r25,__zero_reg__
 1168 0446 01F4      		brne .L152
 1169               	.LBE6:
 1170 0448 C09A      		sbi 56-0x20,0
 936:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 937:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 		        if(frameControlField & RF_SEC_BM)
 1172               	.LM104:
 1173 044a 8A81      		ldd r24,Y+2
 1174 044c 83FF      		sbrs r24,3
 1175 044e 00C0      		rjmp .L153
 1176               	.LBB7:
 938:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			{
 939:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				uint8_t n;
 940:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				// READ rx_ctr and set it
 941:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				FASTSPI_READ_FIFO_NO_WAIT((uint8_t*) &rx_ctr, 4);
 1178               	.LM105:
 1179 0450 C098      		cbi 56-0x20,0
 1180 0452 8FE7      		ldi r24,lo8(127)
 1181 0454 8FB9      		out 47-0x20,r24
 1182               	.L154:
 1183 0456 779B      		sbis 46-0x20,7
 1184 0458 00C0      		rjmp .L154
 1185 045a E0E0      		ldi r30,lo8(rx_ctr)
 1186 045c F0E0      		ldi r31,hi8(rx_ctr)
 1187               	.L156:
 1188               	.LBB8:
 1189 045e 1FB8      		out 47-0x20,__zero_reg__
 1190               	.L155:
 1191 0460 779B      		sbis 46-0x20,7
 1192 0462 00C0      		rjmp .L155
 1193 0464 8FB1      		in r24,47-0x20
 1194 0466 8193      		st Z+,r24
 1195 0468 80E0      		ldi r24,hi8(rx_ctr+4)
 1196 046a E030      		cpi r30,lo8(rx_ctr+4)
 1197 046c F807      		cpc r31,r24
 1198 046e 01F4      		brne .L156
 1199               	.LBE8:
 1200 0470 C09A      		sbi 56-0x20,0
 942:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				FASTSPI_WRITE_RAM(&rx_ctr[0],(CC2420RAM_RXNONCE+9),2,n); 
 1202               	.LM106:
 1203 0472 C098      		cbi 56-0x20,0
 1204 0474 89E9      		ldi r24,lo8(-103)
 1205 0476 8FB9      		out 47-0x20,r24
 1206               	.L157:
 1207 0478 779B      		sbis 46-0x20,7
 1208 047a 00C0      		rjmp .L157
 1209 047c 80E8      		ldi r24,lo8(-128)
 1210 047e 8FB9      		out 47-0x20,r24
 1211               	.L158:
 1212 0480 779B      		sbis 46-0x20,7
 1213 0482 00C0      		rjmp .L158
 1214 0484 82E0      		ldi r24,lo8(2)
 1215               	.L160:
 1216 0486 8150      		subi r24,lo8(-(-1))
 1217 0488 E82F      		mov r30,r24
 1218 048a F0E0      		ldi r31,lo8(0)
 1219 048c E050      		subi r30,lo8(-(rx_ctr))
 1220 048e F040      		sbci r31,hi8(-(rx_ctr))
 1221 0490 9081      		ld r25,Z
 1222 0492 9FB9      		out 47-0x20,r25
 1223               	.L159:
 1224 0494 779B      		sbis 46-0x20,7
 1225 0496 00C0      		rjmp .L159
 1226 0498 8823      		tst r24
 1227 049a 01F4      		brne .L160
 1228 049c C09A      		sbi 56-0x20,0
 943:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				FASTSPI_WRITE_RAM(&rx_ctr[2],(CC2420RAM_RXNONCE+11),2,n); 
 1230               	.LM107:
 1231 049e C098      		cbi 56-0x20,0
 1232 04a0 8BE9      		ldi r24,lo8(-101)
 1233 04a2 8FB9      		out 47-0x20,r24
 1234               	.L161:
 1235 04a4 779B      		sbis 46-0x20,7
 1236 04a6 00C0      		rjmp .L161
 1237 04a8 80E8      		ldi r24,lo8(-128)
 1238 04aa 8FB9      		out 47-0x20,r24
 1239               	.L162:
 1240 04ac 779B      		sbis 46-0x20,7
 1241 04ae 00C0      		rjmp .L162
 1242 04b0 82E0      		ldi r24,lo8(2)
 1243               	.L164:
 1244 04b2 8150      		subi r24,lo8(-(-1))
 1245 04b4 E82F      		mov r30,r24
 1246 04b6 F0E0      		ldi r31,lo8(0)
 1247 04b8 E050      		subi r30,lo8(-(rx_ctr+2))
 1248 04ba F040      		sbci r31,hi8(-(rx_ctr+2))
 1249 04bc 9081      		ld r25,Z
 1250 04be 9FB9      		out 47-0x20,r25
 1251               	.L163:
 1252 04c0 779B      		sbis 46-0x20,7
 1253 04c2 00C0      		rjmp .L163
 1254 04c4 8823      		tst r24
 1255 04c6 01F4      		brne .L164
 1256 04c8 C09A      		sbi 56-0x20,0
 944:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				FASTSPI_STROBE(CC2420_SRXDEC);  // if packet is encrypted then decrypt 
 1258               	.LM108:
 1259 04ca C098      		cbi 56-0x20,0
 1260 04cc 8CE0      		ldi r24,lo8(12)
 1261 04ce 8FB9      		out 47-0x20,r24
 1262               	.L165:
 1263 04d0 779B      		sbis 46-0x20,7
 1264 04d2 00C0      		rjmp .L165
 1265 04d4 C09A      		sbi 56-0x20,0
 945:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				last_pkt_encrypted=1;
 1267               	.LM109:
 1268 04d6 81E0      		ldi r24,lo8(1)
 1269 04d8 8093 0000 		sts last_pkt_encrypted,r24
 946:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         			rfSettings.pRxInfo->length -= 4;
 1271               	.LM110:
 1272 04dc E091 0000 		lds r30,rfSettings
 1273 04e0 F091 0000 		lds r31,(rfSettings)+1
 1274 04e4 8381      		ldd r24,Z+3
 1275 04e6 8450      		subi r24,lo8(-(-4))
 1276 04e8 8383      		std Z+3,r24
 1277               	.L153:
 1278               	.LBE7:
 947:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			}
 948:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	
 949:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			// Read the packet payload
 950:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			FASTSPI_READ_FIFO_NO_WAIT(rfSettings.pRxInfo->pPayload, rfSettings.pRxInfo->length);
 1280               	.LM111:
 1281 04ea C098      		cbi 56-0x20,0
 1282 04ec 8FE7      		ldi r24,lo8(127)
 1283 04ee 8FB9      		out 47-0x20,r24
 1284               	.L166:
 1285 04f0 779B      		sbis 46-0x20,7
 1286 04f2 00C0      		rjmp .L166
 1287 04f4 80E0      		ldi r24,lo8(0)
 1288 04f6 00C0      		rjmp .L167
 1289               	.L169:
 1290               	.LBB9:
 1291 04f8 1FB8      		out 47-0x20,__zero_reg__
 1292               	.L168:
 1293 04fa 779B      		sbis 46-0x20,7
 1294 04fc 00C0      		rjmp .L168
 1295 04fe E091 0000 		lds r30,rfSettings
 1296 0502 F091 0000 		lds r31,(rfSettings)+1
 1297 0506 9FB1      		in r25,47-0x20
 1298 0508 0580      		ldd __tmp_reg__,Z+5
 1299 050a F681      		ldd r31,Z+6
 1300 050c E02D      		mov r30,__tmp_reg__
 1301 050e E80F      		add r30,r24
 1302 0510 F11D      		adc r31,__zero_reg__
 1303 0512 9083      		st Z,r25
 1304 0514 8F5F      		subi r24,lo8(-(1))
 1305               	.L167:
 1306 0516 E091 0000 		lds r30,rfSettings
 1307 051a F091 0000 		lds r31,(rfSettings)+1
 1308 051e 482F      		mov r20,r24
 1309 0520 50E0      		ldi r21,lo8(0)
 1310 0522 2381      		ldd r18,Z+3
 1311 0524 3327      		clr r19
 1312 0526 27FD      		sbrc r18,7
 1313 0528 3095      		com r19
 1314 052a 4217      		cp r20,r18
 1315 052c 5307      		cpc r21,r19
 1316 052e 04F0      		brlt .L169
 1317               	.LBE9:
 1318 0530 C09A      		sbi 56-0x20,0
 951:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			FASTSPI_READ_FIFO_NO_WAIT(&rx_checksum, 1 );
 1320               	.LM112:
 1321 0532 C098      		cbi 56-0x20,0
 1322 0534 8FE7      		ldi r24,lo8(127)
 1323 0536 8FB9      		out 47-0x20,r24
 1324               	.L170:
 1325 0538 779B      		sbis 46-0x20,7
 1326 053a 00C0      		rjmp .L170
 1327               	.LBB10:
 1328 053c 1FB8      		out 47-0x20,__zero_reg__
 1329               	.L171:
 1330 053e 779B      		sbis 46-0x20,7
 1331 0540 00C0      		rjmp .L171
 1332 0542 8FB1      		in r24,47-0x20
 1333               	.LBE10:
 1334 0544 C09A      		sbi 56-0x20,0
 952:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 953:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			// Read the footer to get the RSSI value
 954:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			FASTSPI_READ_FIFO_NO_WAIT((uint8_t*) pFooter, 2);
 1336               	.LM113:
 1337 0546 C098      		cbi 56-0x20,0
 1338 0548 9FE7      		ldi r25,lo8(127)
 1339 054a 9FB9      		out 47-0x20,r25
 1340               	.L172:
 1341 054c 779B      		sbis 46-0x20,7
 1342 054e 00C0      		rjmp .L172
 1343               	.LBB11:
 1345               	.LM114:
 1346 0550 8983      		std Y+1,r24
 1347 0552 FE01      		movw r30,r28
 1348 0554 3496      		adiw r30,4
 1350               	.LM115:
 1351 0556 CE01      		movw r24,r28
 1352 0558 0696      		adiw r24,6
 1353               	.L174:
 1354               	.LBE11:
 1355               	.LBB12:
 1357               	.LM116:
 1358 055a 1FB8      		out 47-0x20,__zero_reg__
 1359               	.L173:
 1360 055c 779B      		sbis 46-0x20,7
 1361 055e 00C0      		rjmp .L173
 1362 0560 2FB1      		in r18,47-0x20
 1363 0562 2193      		st Z+,r18
 1364 0564 E817      		cp r30,r24
 1365 0566 F907      		cpc r31,r25
 1366 0568 01F4      		brne .L174
 1367               	.LBE12:
 1368 056a C09A      		sbi 56-0x20,0
 955:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			rfSettings.pRxInfo->rssi = pFooter[0];
 1370               	.LM117:
 1371 056c E091 0000 		lds r30,rfSettings
 1372 0570 F091 0000 		lds r31,(rfSettings)+1
 1373 0574 8C81      		ldd r24,Y+4
 1374 0576 8087      		std Z+8,r24
 1375 0578 90E0      		ldi r25,lo8(0)
 1376 057a 80E0      		ldi r24,lo8(0)
 956:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			checksum=0;	
 957:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			for(i=0; i<rfSettings.pRxInfo->length; i++ )
 1378               	.LM118:
 1379 057c 00C0      		rjmp .L175
 1380               	.L176:
 958:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			{
 959:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				checksum+=rfSettings.pRxInfo->pPayload[i];
 1382               	.LM119:
 1383 057e E091 0000 		lds r30,rfSettings
 1384 0582 F091 0000 		lds r31,(rfSettings)+1
 1385 0586 0580      		ldd __tmp_reg__,Z+5
 1386 0588 F681      		ldd r31,Z+6
 1387 058a E02D      		mov r30,__tmp_reg__
 1388 058c E20F      		add r30,r18
 1389 058e F31F      		adc r31,r19
 1390 0590 2081      		ld r18,Z
 1391 0592 820F      		add r24,r18
 1393               	.LM120:
 1394 0594 9F5F      		subi r25,lo8(-(1))
 1395               	.L175:
 1396 0596 E091 0000 		lds r30,rfSettings
 1397 059a F091 0000 		lds r31,(rfSettings)+1
 1398 059e 292F      		mov r18,r25
 1399 05a0 30E0      		ldi r19,lo8(0)
 1400 05a2 4381      		ldd r20,Z+3
 1401 05a4 5527      		clr r21
 1402 05a6 47FD      		sbrc r20,7
 1403 05a8 5095      		com r21
 1404 05aa 2417      		cp r18,r20
 1405 05ac 3507      		cpc r19,r21
 1406 05ae 04F0      		brlt .L176
 960:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				//printf( "%d ", rfSettings.pRxInfo->pPayload[i]);
 961:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			}
 962:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 963:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			if(checksum!=rx_checksum) {
 1408               	.LM121:
 1409 05b0 9981      		ldd r25,Y+1
 1410 05b2 8917      		cp r24,r25
 1411 05b4 01F0      		breq .L177
 964:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				//printf( "Checksum failed %d %d\r",rx_checksum, checksum );
 965:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    			// always read 1 byte before flush (data sheet pg 62)
 966:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	   			FASTSPI_READ_FIFO_BYTE(tmp);  
 1413               	.LM122:
 1414 05b6 C098      		cbi 56-0x20,0
 1415 05b8 8FE7      		ldi r24,lo8(127)
 1416 05ba 8FB9      		out 47-0x20,r24
 1417               	.L178:
 1418 05bc 779B      		sbis 46-0x20,7
 1419 05be 00C0      		rjmp .L178
 1420 05c0 1FB8      		out 47-0x20,__zero_reg__
 1421               	.L179:
 1422 05c2 779B      		sbis 46-0x20,7
 1423 05c4 00C0      		rjmp .L179
 1424 05c6 8FB1      		in r24,47-0x20
 1425 05c8 C09A      		sbi 56-0x20,0
 967:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    			FASTSPI_STROBE(CC2420_SFLUSHRX);
 1427               	.LM123:
 1428 05ca C098      		cbi 56-0x20,0
 1429 05cc 88E0      		ldi r24,lo8(8)
 1430 05ce 8FB9      		out 47-0x20,r24
 1431               	.L180:
 1432 05d0 779B      		sbis 46-0x20,7
 1433 05d2 00C0      		rjmp .L180
 1434 05d4 C09A      		sbi 56-0x20,0
 968:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    			FASTSPI_STROBE(CC2420_SFLUSHRX);
 1436               	.LM124:
 1437 05d6 C098      		cbi 56-0x20,0
 1438 05d8 88E0      		ldi r24,lo8(8)
 1439 05da 8FB9      		out 47-0x20,r24
 1440               	.L181:
 1441 05dc 779B      		sbis 46-0x20,7
 1442 05de 00C0      		rjmp .L181
 1443 05e0 C09A      		sbi 56-0x20,0
 1444 05e2 8CEF      		ldi r24,lo8(-4)
 969:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 970:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    			nrk_sem_post(radio_sem);
 971:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 972:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				return -4;
 1446               	.LM125:
 1447 05e4 00C0      		rjmp .L116
 1448               	.L177:
 973:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			}	
 974:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			if (pFooter[1] & RF_CRC_OK_BM) {
 1450               	.LM126:
 1451 05e6 8D81      		ldd r24,Y+5
 1452 05e8 87FF      		sbrs r24,7
 1453 05ea 00C0      		rjmp .L182
 975:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				//rfSettings.pRxInfo = rf_rx_callback(rfSettings.pRxInfo);
 976:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				rx_ready++;
 1455               	.LM127:
 1456 05ec 8091 0000 		lds r24,rx_ready
 1457 05f0 8F5F      		subi r24,lo8(-(1))
 1458 05f2 8093 0000 		sts rx_ready,r24
 1459 05f6 81E0      		ldi r24,lo8(1)
 977:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 978:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    			nrk_sem_post(radio_sem);
 979:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 980:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 				return 1;
 1461               	.LM128:
 1462 05f8 00C0      		rjmp .L116
 1463               	.L182:
 981:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			} else
 982:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    		{
 983:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    		// always read 1 byte before flush (data sheet pg 62)
 984:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	   		FASTSPI_READ_FIFO_BYTE(tmp);  
 1465               	.LM129:
 1466 05fa C098      		cbi 56-0x20,0
 1467 05fc 8FE7      		ldi r24,lo8(127)
 1468 05fe 8FB9      		out 47-0x20,r24
 1469               	.L183:
 1470 0600 779B      		sbis 46-0x20,7
 1471 0602 00C0      		rjmp .L183
 1472 0604 1FB8      		out 47-0x20,__zero_reg__
 1473               	.L184:
 1474 0606 779B      		sbis 46-0x20,7
 1475 0608 00C0      		rjmp .L184
 1476 060a 8FB1      		in r24,47-0x20
 1477 060c C09A      		sbi 56-0x20,0
 985:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			FASTSPI_STROBE(CC2420_SFLUSHRX);
 1479               	.LM130:
 1480 060e C098      		cbi 56-0x20,0
 1481 0610 88E0      		ldi r24,lo8(8)
 1482 0612 8FB9      		out 47-0x20,r24
 1483               	.L185:
 1484 0614 779B      		sbis 46-0x20,7
 1485 0616 00C0      		rjmp .L185
 1486 0618 C09A      		sbi 56-0x20,0
 986:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    		FASTSPI_STROBE(CC2420_SFLUSHRX);
 1488               	.LM131:
 1489 061a C098      		cbi 56-0x20,0
 1490 061c 88E0      		ldi r24,lo8(8)
 1491 061e 8FB9      		out 47-0x20,r24
 1492               	.L186:
 1493 0620 779B      		sbis 46-0x20,7
 1494 0622 00C0      		rjmp .L186
 1495 0624 C09A      		sbi 56-0x20,0
 1496 0626 8BEF      		ldi r24,lo8(-5)
 1497               	.L116:
 1498               	/* epilogue start */
 1499               	.LBE2:
 987:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 988:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	    		nrk_sem_post(radio_sem);
 989:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
 990:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			return -5;
 991:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 			}
 992:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** //		}
 993:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     
 994:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	}
 995:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 996:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
 997:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     }
 998:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
 999:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_post(radio_sem);
1000:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1001:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** return 0;
1002:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1501               	.LM132:
 1502 0628 0F90      		pop __tmp_reg__
 1503 062a 0F90      		pop __tmp_reg__
 1504 062c 0F90      		pop __tmp_reg__
 1505 062e 0F90      		pop __tmp_reg__
 1506 0630 0F90      		pop __tmp_reg__
 1507 0632 CF91      		pop r28
 1508 0634 DF91      		pop r29
 1509 0636 0895      		ret
 1533               	.Lscope18:
 1535               		.stabd	78,0,0
 1537               	.global	rf_rx_packet
 1539               	rf_rx_packet:
 1540               		.stabd	46,0,0
1003:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1004:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** int8_t rf_rx_packet()
1005:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 1542               	.LM133:
 1543               	.LFBB19:
 1544               	/* prologue: function */
 1545               	/* frame size = 0 */
1006:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** int8_t tmp;
1007:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** if(rx_ready>0) { tmp=rx_ready; rx_ready=0; return tmp;}
 1547               	.LM134:
 1548 0638 8091 0000 		lds r24,rx_ready
 1549 063c 8823      		tst r24
 1550 063e 01F0      		breq .L243
 1551 0640 8091 0000 		lds r24,rx_ready
 1552 0644 1092 0000 		sts rx_ready,__zero_reg__
 1553               	.L243:
1008:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** return 0;
1009:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1555               	.LM135:
 1556 0648 0895      		ret
 1561               	.Lscope19:
 1563               		.stabd	78,0,0
 1565               	.global	rf_flush_rx_fifo
 1567               	rf_flush_rx_fifo:
 1568               		.stabd	46,0,0
1010:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1011:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1012:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** inline void rf_flush_rx_fifo()
1013:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 1570               	.LM136:
 1571               	.LFBB20:
 1572               	/* prologue: function */
 1573               	/* frame size = 0 */
1014:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_STROBE(CC2420_SFLUSHRX);
 1575               	.LM137:
 1576 064a C098      		cbi 56-0x20,0
 1577 064c 88E0      		ldi r24,lo8(8)
 1578 064e 8FB9      		out 47-0x20,r24
 1579               	.L246:
 1580 0650 779B      		sbis 46-0x20,7
 1581 0652 00C0      		rjmp .L246
 1582 0654 C09A      		sbi 56-0x20,0
1015:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_STROBE(CC2420_SFLUSHRX);
 1584               	.LM138:
 1585 0656 C098      		cbi 56-0x20,0
 1586 0658 88E0      		ldi r24,lo8(8)
 1587 065a 8FB9      		out 47-0x20,r24
 1588               	.L247:
 1589 065c 779B      		sbis 46-0x20,7
 1590 065e 00C0      		rjmp .L247
 1591 0660 C09A      		sbi 56-0x20,0
 1592               	/* epilogue start */
1016:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1594               	.LM139:
 1595 0662 0895      		ret
 1597               	.Lscope20:
 1599               		.stabd	78,0,0
 1602               	.global	rf_set_cca_thresh
 1604               	rf_set_cca_thresh:
 1605               		.stabd	46,0,0
1017:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1018:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_set_cca_thresh(int8_t t)
1019:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 1607               	.LM140:
 1608               	.LFBB21:
 1609               	/* prologue: function */
 1610               	/* frame size = 0 */
1020:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** // default is -32
1021:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** // Higher number is less sensitive
1022:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** uint16_t val;
1023:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1024:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_pend(radio_sem);
1025:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1026:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1027:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** val=(t<<8) | 0x80;
 1612               	.LM141:
 1613 0664 9927      		clr r25
 1614 0666 87FD      		sbrc r24,7
 1615 0668 9095      		com r25
 1616 066a 982F      		mov r25,r24
 1617 066c 8827      		clr r24
 1618 066e 8068      		ori r24,lo8(128)
1028:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** FASTSPI_SETREG(CC2420_RSSI, val); 
 1620               	.LM142:
 1621 0670 C098      		cbi 56-0x20,0
 1622 0672 23E1      		ldi r18,lo8(19)
 1623 0674 2FB9      		out 47-0x20,r18
 1624               	.L252:
 1625 0676 779B      		sbis 46-0x20,7
 1626 0678 00C0      		rjmp .L252
 1627 067a 9FB9      		out 47-0x20,r25
 1628               	.L253:
 1629 067c 779B      		sbis 46-0x20,7
 1630 067e 00C0      		rjmp .L253
 1631 0680 8FB9      		out 47-0x20,r24
 1632               	.L254:
 1633 0682 779B      		sbis 46-0x20,7
 1634 0684 00C0      		rjmp .L254
 1635 0686 C09A      		sbi 56-0x20,0
 1636               	/* epilogue start */
1029:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1030:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1031:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_post(radio_sem);
1032:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1033:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1638               	.LM143:
 1639 0688 0895      		ret
 1644               	.Lscope21:
 1646               		.stabd	78,0,0
 1648               	.global	rf_test_mode
 1650               	rf_test_mode:
 1651               		.stabd	46,0,0
1034:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1035:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_test_mode()
1036:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 1653               	.LM144:
 1654               	.LFBB22:
 1655               	/* prologue: function */
 1656               	/* frame size = 0 */
1037:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1038:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1039:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_pend(radio_sem);
1040:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1041:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_STROBE(CC2420_SRFOFF); //stop radio
 1658               	.LM145:
 1659 068a C098      		cbi 56-0x20,0
 1660 068c 86E0      		ldi r24,lo8(6)
 1661 068e 8FB9      		out 47-0x20,r24
 1662               	.L260:
 1663 0690 779B      		sbis 46-0x20,7
 1664 0692 00C0      		rjmp .L260
 1665 0694 C09A      		sbi 56-0x20,0
1042:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// NOTE ON SETTING CC2420_MDMCTRL1
1043:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// 
1044:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// RF studio" uses TX_MODE=3 (CC2420_MDMCTRL1=0x050C)
1045:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// to send an unmodulated carrier; data sheet says TX_MODE 
1046:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// can be 2 or 3. So it should not matter...
1047:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// HOWEVER, using (TX_MODE=3) sometimes causes problems when 
1048:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	// going back to "data" mode!
1049:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_SETREG(CC2420_MDMCTRL1, 0x0508); // MDMCTRL1 with TX_MODE=2
 1667               	.LM146:
 1668 0696 C098      		cbi 56-0x20,0
 1669 0698 82E1      		ldi r24,lo8(18)
 1670 069a 8FB9      		out 47-0x20,r24
 1671               	.L261:
 1672 069c 779B      		sbis 46-0x20,7
 1673 069e 00C0      		rjmp .L261
 1674 06a0 85E0      		ldi r24,lo8(5)
 1675 06a2 8FB9      		out 47-0x20,r24
 1676               	.L262:
 1677 06a4 779B      		sbis 46-0x20,7
 1678 06a6 00C0      		rjmp .L262
 1679 06a8 88E0      		ldi r24,lo8(8)
 1680 06aa 8FB9      		out 47-0x20,r24
 1681               	.L263:
 1682 06ac 779B      		sbis 46-0x20,7
 1683 06ae 00C0      		rjmp .L263
 1684 06b0 C09A      		sbi 56-0x20,0
1050:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_SETREG(CC2420_DACTST, 0x1800); // send unmodulated carrier
 1686               	.LM147:
 1687 06b2 C098      		cbi 56-0x20,0
 1688 06b4 8EE2      		ldi r24,lo8(46)
 1689 06b6 8FB9      		out 47-0x20,r24
 1690               	.L264:
 1691 06b8 779B      		sbis 46-0x20,7
 1692 06ba 00C0      		rjmp .L264
 1693 06bc 88E1      		ldi r24,lo8(24)
 1694 06be 8FB9      		out 47-0x20,r24
 1695               	.L265:
 1696 06c0 779B      		sbis 46-0x20,7
 1697 06c2 00C0      		rjmp .L265
 1698 06c4 1FB8      		out 47-0x20,__zero_reg__
 1699               	.L266:
 1700 06c6 779B      		sbis 46-0x20,7
 1701 06c8 00C0      		rjmp .L266
 1702 06ca C09A      		sbi 56-0x20,0
1051:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	rf_flush_rx_fifo();
 1704               	.LM148:
 1705 06cc 0E94 0000 		call rf_flush_rx_fifo
 1706               	/* epilogue start */
1052:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1053:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1054:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_post(radio_sem);
1055:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1056:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1708               	.LM149:
 1709 06d0 0895      		ret
 1711               	.Lscope22:
 1713               		.stabd	78,0,0
 1715               	.global	rf_data_mode
 1717               	rf_data_mode:
 1718               		.stabd	46,0,0
1057:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1058:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1059:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /**********************************************************
1060:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * set the radio into "normal" mode (buffered TXFIFO) and go into (data) receive */
1061:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_data_mode() {
 1720               	.LM150:
 1721               	.LFBB23:
 1722               	/* prologue: function */
 1723               	/* frame size = 0 */
1062:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1063:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_pend(radio_sem);
1064:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1065:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1066:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1067:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_STROBE(CC2420_SRFOFF); //stop radio
 1725               	.LM151:
 1726 06d2 C098      		cbi 56-0x20,0
 1727 06d4 86E0      		ldi r24,lo8(6)
 1728 06d6 8FB9      		out 47-0x20,r24
 1729               	.L276:
 1730 06d8 779B      		sbis 46-0x20,7
 1731 06da 00C0      		rjmp .L276
 1732 06dc C09A      		sbi 56-0x20,0
1068:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_SETREG(CC2420_MDMCTRL1, 0x0500); // default MDMCTRL1 value
 1734               	.LM152:
 1735 06de C098      		cbi 56-0x20,0
 1736 06e0 82E1      		ldi r24,lo8(18)
 1737 06e2 8FB9      		out 47-0x20,r24
 1738               	.L277:
 1739 06e4 779B      		sbis 46-0x20,7
 1740 06e6 00C0      		rjmp .L277
 1741 06e8 85E0      		ldi r24,lo8(5)
 1742 06ea 8FB9      		out 47-0x20,r24
 1743               	.L278:
 1744 06ec 779B      		sbis 46-0x20,7
 1745 06ee 00C0      		rjmp .L278
 1746 06f0 1FB8      		out 47-0x20,__zero_reg__
 1747               	.L279:
 1748 06f2 779B      		sbis 46-0x20,7
 1749 06f4 00C0      		rjmp .L279
 1750 06f6 C09A      		sbi 56-0x20,0
1069:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_SETREG(CC2420_DACTST, 0); // default value
 1752               	.LM153:
 1753 06f8 C098      		cbi 56-0x20,0
 1754 06fa 8EE2      		ldi r24,lo8(46)
 1755 06fc 8FB9      		out 47-0x20,r24
 1756               	.L280:
 1757 06fe 779B      		sbis 46-0x20,7
 1758 0700 00C0      		rjmp .L280
 1759 0702 1FB8      		out 47-0x20,__zero_reg__
 1760               	.L281:
 1761 0704 779B      		sbis 46-0x20,7
 1762 0706 00C0      		rjmp .L281
 1763 0708 1FB8      		out 47-0x20,__zero_reg__
 1764               	.L282:
 1765 070a 779B      		sbis 46-0x20,7
 1766 070c 00C0      		rjmp .L282
 1767 070e C09A      		sbi 56-0x20,0
1070:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         rf_flush_rx_fifo();
 1769               	.LM154:
 1770 0710 0E94 0000 		call rf_flush_rx_fifo
 1771               	/* epilogue start */
1071:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1072:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_post(radio_sem);
1073:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1074:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1773               	.LM155:
 1774 0714 0895      		ret
 1776               	.Lscope23:
 1778               		.stabd	78,0,0
 1780               	.global	rf_rx_set_serial
 1782               	rf_rx_set_serial:
 1783               		.stabd	46,0,0
1075:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1076:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1077:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /**********************************************************
1078:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * Set the radio into serial unbuffered RX mode
1079:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * RX data is received through sampling the FIFO pin, timing is done using FIFOP 
1080:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * Use rf_rx_on() to start rcv, then wait for SFD / FIFOP. Sample during each high edge of FIFOP
1081:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * This can be undone by using rf_data_mode()
1082:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  */
1083:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_rx_set_serial()
1084:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 1785               	.LM156:
 1786               	.LFBB24:
 1787               	/* prologue: function */
 1788               	/* frame size = 0 */
1085:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_STROBE(CC2420_SRFOFF);           // stop radio
 1790               	.LM157:
 1791 0716 C098      		cbi 56-0x20,0
 1792 0718 86E0      		ldi r24,lo8(6)
 1793 071a 8FB9      		out 47-0x20,r24
 1794               	.L292:
 1795 071c 779B      		sbis 46-0x20,7
 1796 071e 00C0      		rjmp .L292
 1797 0720 C09A      		sbi 56-0x20,0
1086:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL1, 0x0501); // Set RX_MODE to 1
 1799               	.LM158:
 1800 0722 C098      		cbi 56-0x20,0
 1801 0724 82E1      		ldi r24,lo8(18)
 1802 0726 8FB9      		out 47-0x20,r24
 1803               	.L293:
 1804 0728 779B      		sbis 46-0x20,7
 1805 072a 00C0      		rjmp .L293
 1806 072c 85E0      		ldi r24,lo8(5)
 1807 072e 8FB9      		out 47-0x20,r24
 1808               	.L294:
 1809 0730 779B      		sbis 46-0x20,7
 1810 0732 00C0      		rjmp .L294
 1811 0734 81E0      		ldi r24,lo8(1)
 1812 0736 8FB9      		out 47-0x20,r24
 1813               	.L295:
 1814 0738 779B      		sbis 46-0x20,7
 1815 073a 00C0      		rjmp .L295
 1816 073c C09A      		sbi 56-0x20,0
1087:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     rf_flush_rx_fifo();
 1818               	.LM159:
 1819 073e 0E94 0000 		call rf_flush_rx_fifo
 1820               	/* epilogue start */
1088:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1822               	.LM160:
 1823 0742 0895      		ret
 1825               	.Lscope24:
 1827               		.stabd	78,0,0
 1829               	.global	rf_tx_set_serial
 1831               	rf_tx_set_serial:
 1832               		.stabd	46,0,0
1089:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1090:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /**********************************************************
1091:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * Put the radio in serial TX mode, where data is sampled from the FIFO
1092:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * pin to send after SFD, and timing is done using FIFOP
1093:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * use rf_carrier_on() to start, set FIFO to first bit, then wait for it
1094:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * to go up and down, then set next bit etc.
1095:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * NOTE: You must set the FIFO pin to output mode in order to do this!
1096:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * This can be undone by calling rf_data_mode()
1097:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  */
1098:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_tx_set_serial()
1099:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 1834               	.LM161:
 1835               	.LFBB25:
 1836               	/* prologue: function */
 1837               	/* frame size = 0 */
1100:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL1, 0x0504); // set TXMODE to 1
 1839               	.LM162:
 1840 0744 C098      		cbi 56-0x20,0
 1841 0746 82E1      		ldi r24,lo8(18)
 1842 0748 8FB9      		out 47-0x20,r24
 1843               	.L302:
 1844 074a 779B      		sbis 46-0x20,7
 1845 074c 00C0      		rjmp .L302
 1846 074e 85E0      		ldi r24,lo8(5)
 1847 0750 8FB9      		out 47-0x20,r24
 1848               	.L303:
 1849 0752 779B      		sbis 46-0x20,7
 1850 0754 00C0      		rjmp .L303
 1851 0756 84E0      		ldi r24,lo8(4)
 1852 0758 8FB9      		out 47-0x20,r24
 1853               	.L304:
 1854 075a 779B      		sbis 46-0x20,7
 1855 075c 00C0      		rjmp .L304
 1856 075e C09A      		sbi 56-0x20,0
1101:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     rf_flush_rx_fifo();
 1858               	.LM163:
 1859 0760 0E94 0000 		call rf_flush_rx_fifo
 1860               	/* epilogue start */
1102:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1862               	.LM164:
 1863 0764 0895      		ret
 1865               	.Lscope25:
 1867               		.stabd	78,0,0
 1870               	.global	rf_set_preamble_length
 1872               	rf_set_preamble_length:
 1873               		.stabd	46,0,0
1103:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1104:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /**********************************************************
1105:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * Specifies the number of symbols to be part of preamble
1106:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * arg is equal to number of bytes - 1.
1107:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * (3 bytes is 802.15.4 compliant, so length arg would be 2)
1108:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * Length arg supports values 0 to 15. See the datasheet of course for more details
1109:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  */
1110:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_set_preamble_length(uint8_t length)
1111:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 1875               	.LM165:
 1876               	.LFBB26:
 1877               	/* prologue: function */
 1878               	/* frame size = 0 */
1112:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     mdmctrl0 &= (0xFFF0);  
1113:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     mdmctrl0 |= (length & 0x000F);  
 1880               	.LM166:
 1881 0766 90E0      		ldi r25,lo8(0)
 1882 0768 8F70      		andi r24,lo8(15)
 1883 076a 9070      		andi r25,hi8(15)
 1884 076c 2091 0000 		lds r18,mdmctrl0
 1885 0770 3091 0000 		lds r19,(mdmctrl0)+1
 1886 0774 207F      		andi r18,lo8(-16)
 1887 0776 822B      		or r24,r18
 1888 0778 932B      		or r25,r19
 1889 077a 9093 0000 		sts (mdmctrl0)+1,r25
 1890 077e 8093 0000 		sts mdmctrl0,r24
1114:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL0, mdmctrl0);
 1892               	.LM167:
 1893 0782 C098      		cbi 56-0x20,0
 1894 0784 21E1      		ldi r18,lo8(17)
 1895 0786 2FB9      		out 47-0x20,r18
 1896               	.L310:
 1897 0788 779B      		sbis 46-0x20,7
 1898 078a 00C0      		rjmp .L310
 1899 078c 9FB9      		out 47-0x20,r25
 1900               	.L311:
 1901 078e 779B      		sbis 46-0x20,7
 1902 0790 00C0      		rjmp .L311
 1903 0792 8FB9      		out 47-0x20,r24
 1904               	.L312:
 1905 0794 779B      		sbis 46-0x20,7
 1906 0796 00C0      		rjmp .L312
 1907 0798 C09A      		sbi 56-0x20,0
 1908               	/* epilogue start */
1115:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1910               	.LM168:
 1911 079a 0895      		ret
 1913               	.Lscope26:
 1915               		.stabd	78,0,0
 1918               	.global	rf_set_cca_mode
 1920               	rf_set_cca_mode:
 1921               		.stabd	46,0,0
1116:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1117:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /**********************************************************
1118:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * Set the CCA mode
1119:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * Accept 1-3 as argument
1120:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  */
1121:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_set_cca_mode(uint8_t mode)
1122:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 1923               	.LM169:
 1924               	.LFBB27:
 1925               	/* prologue: function */
 1926               	/* frame size = 0 */
1123:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     mdmctrl0 &= (0xFF3F);
1124:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     mdmctrl0 |= ((mode & 0x3) << 6);
 1928               	.LM170:
 1929 079c 90E0      		ldi r25,lo8(0)
 1930 079e 76E0      		ldi r23,6
 1931 07a0 880F      	1:	lsl r24
 1932 07a2 991F      		rol r25
 1933 07a4 7A95      		dec r23
 1934 07a6 01F4      		brne 1b
 1935 07a8 9070      		andi r25,hi8(255)
 1936 07aa 2091 0000 		lds r18,mdmctrl0
 1937 07ae 3091 0000 		lds r19,(mdmctrl0)+1
 1938 07b2 2F73      		andi r18,lo8(-193)
 1939 07b4 822B      		or r24,r18
 1940 07b6 932B      		or r25,r19
 1941 07b8 9093 0000 		sts (mdmctrl0)+1,r25
 1942 07bc 8093 0000 		sts mdmctrl0,r24
1125:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****     FASTSPI_SETREG(CC2420_MDMCTRL0, mdmctrl0);
 1944               	.LM171:
 1945 07c0 C098      		cbi 56-0x20,0
 1946 07c2 21E1      		ldi r18,lo8(17)
 1947 07c4 2FB9      		out 47-0x20,r18
 1948               	.L318:
 1949 07c6 779B      		sbis 46-0x20,7
 1950 07c8 00C0      		rjmp .L318
 1951 07ca 9FB9      		out 47-0x20,r25
 1952               	.L319:
 1953 07cc 779B      		sbis 46-0x20,7
 1954 07ce 00C0      		rjmp .L319
 1955 07d0 8FB9      		out 47-0x20,r24
 1956               	.L320:
 1957 07d2 779B      		sbis 46-0x20,7
 1958 07d4 00C0      		rjmp .L320
 1959 07d6 C09A      		sbi 56-0x20,0
 1960               	/* epilogue start */
1126:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1962               	.LM172:
 1963 07d8 0895      		ret
 1965               	.Lscope27:
 1967               		.stabd	78,0,0
 1969               	.global	rf_carrier_on
 1971               	rf_carrier_on:
 1972               		.stabd	46,0,0
1127:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1128:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /**********************************************************
1129:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * start sending a carrier pulse
1130:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * assumes wdrf_radio_test_mode() was called before doing this
1131:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  */
1132:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_carrier_on()
1133:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 1974               	.LM173:
 1975               	.LFBB28:
 1976               	/* prologue: function */
 1977               	/* frame size = 0 */
1134:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1135:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_pend(radio_sem);
1136:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1137:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****      
1138:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef CC2420_OSC_OPT
1139:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SXOSCON);
1140:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	nrk_spin_wait_us(OSC_STARTUP_DELAY);
1141:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1142:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1143:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1144:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1145:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_STROBE(CC2420_STXON); // tell radio to start sending
 1979               	.LM174:
 1980 07da C098      		cbi 56-0x20,0
 1981 07dc 84E0      		ldi r24,lo8(4)
 1982 07de 8FB9      		out 47-0x20,r24
 1983               	.L326:
 1984 07e0 779B      		sbis 46-0x20,7
 1985 07e2 00C0      		rjmp .L326
 1986 07e4 C09A      		sbi 56-0x20,0
 1987               	/* epilogue start */
1146:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1147:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_post(radio_sem);
1148:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1149:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 1989               	.LM175:
 1990 07e6 0895      		ret
 1992               	.Lscope28:
 1994               		.stabd	78,0,0
 1996               	.global	rf_carrier_off
 1998               	rf_carrier_off:
 1999               		.stabd	46,0,0
1150:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1151:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** /**********************************************************
1152:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  * stop sending a carrier pulse; set the radio to idle state
1153:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****  */
1154:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** void rf_carrier_off()
1155:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** {
 2001               	.LM176:
 2002               	.LFBB29:
 2003               	/* prologue: function */
 2004               	/* frame size = 0 */
1156:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1157:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_pend(radio_sem);
1158:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1159:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****      
1160:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef CC2420_OSC_OPT
1161:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 	FASTSPI_STROBE(CC2420_SXOSCOFF);
1162:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1163:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1164:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** 
1165:../../../nano-RK/src/radio/cc2420/source/basic_rf.c ****         FASTSPI_STROBE(CC2420_SRFOFF); // stop radio
 2006               	.LM177:
 2007 07e8 C098      		cbi 56-0x20,0
 2008 07ea 86E0      		ldi r24,lo8(6)
 2009 07ec 8FB9      		out 47-0x20,r24
 2010               	.L330:
 2011 07ee 779B      		sbis 46-0x20,7
 2012 07f0 00C0      		rjmp .L330
 2013 07f2 C09A      		sbi 56-0x20,0
 2014               	/* epilogue start */
1166:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #ifdef RADIO_PRIORITY_CEILING
1167:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** nrk_sem_post(radio_sem);
1168:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** #endif
1169:../../../nano-RK/src/radio/cc2420/source/basic_rf.c **** }
 2016               	.LM178:
 2017 07f4 0895      		ret
 2019               	.Lscope29:
 2021               		.stabd	78,0,0
 2024               	.global	rf_tx_packet
 2026               	rf_tx_packet:
 2027               		.stabd	46,0,0
 2029               	.LM179:
 2030               	.LFBB30:
 2031 07f6 FF92      		push r15
 2032 07f8 0F93      		push r16
 2033 07fa 1F93      		push r17
 2034 07fc DF93      		push r29
 2035 07fe CF93      		push r28
 2036 0800 00D0      		rcall .
 2037 0802 00D0      		rcall .
 2038 0804 CDB7      		in r28,__SP_L__
 2039 0806 DEB7      		in r29,__SP_H__
 2040               	/* prologue: function */
 2041               	/* frame size = 4 */
 2042 0808 FC01      		movw r30,r24
 2044               	.LM180:
 2045 080a 8091 0000 		lds r24,security_enable
 2046 080e 8823      		tst r24
 2047 0810 01F0      		breq .L334
 2049               	.LM181:
 2050 0812 C098      		cbi 56-0x20,0
 2051 0814 9DE0      		ldi r25,lo8(13)
 2052 0816 9FB9      		out 47-0x20,r25
 2053               	.L335:
 2054 0818 779B      		sbis 46-0x20,7
 2055 081a 00C0      		rjmp .L335
 2056 081c C09A      		sbi 56-0x20,0
 2057               	.L334:
 2059               	.LM182:
 2060 081e 1A82      		std Y+2,__zero_reg__
 2062               	.LM183:
 2063 0820 9281      		ldd r25,Z+2
 2064 0822 492F      		mov r20,r25
 2065 0824 5527      		clr r21
 2066 0826 47FD      		sbrc r20,7
 2067 0828 5095      		com r21
 2068 082a 20E0      		ldi r18,lo8(0)
 2069 082c 00C0      		rjmp .L336
 2070               	.L337:
 2072               	.LM184:
 2073 082e A381      		ldd r26,Z+3
 2074 0830 B481      		ldd r27,Z+4
 2075 0832 A60F      		add r26,r22
 2076 0834 B71F      		adc r27,r23
 2077 0836 3A81      		ldd r19,Y+2
 2078 0838 6C91      		ld r22,X
 2079 083a 360F      		add r19,r22
 2080 083c 3A83      		std Y+2,r19
 2082               	.LM185:
 2083 083e 2F5F      		subi r18,lo8(-(1))
 2084               	.L336:
 2085 0840 622F      		mov r22,r18
 2086 0842 70E0      		ldi r23,lo8(0)
 2087 0844 6417      		cp r22,r20
 2088 0846 7507      		cpc r23,r21
 2089 0848 04F0      		brlt .L337
 2091               	.LM186:
 2092 084a 292F      		mov r18,r25
 2093 084c 245F      		subi r18,lo8(-(12))
 2094 084e 2983      		std Y+1,r18
 2096               	.LM187:
 2097 0850 8823      		tst r24
 2098 0852 01F0      		breq .L436
 2099 0854 905F      		subi r25,lo8(-(16))
 2100 0856 9983      		std Y+1,r25
 2101               	.L436:
 2103               	.LM188:
 2104 0858 0E99      		sbic 33-0x20,6
 2105 085a 00C0      		rjmp .L436
 2106 085c 8499      		sbic 48-0x20,4
 2107 085e 00C0      		rjmp .L436
 2109               	.LM189:
 2110               	/* #APP */
 2111               	 ;  691 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 2112 0860 F894      		cli
 2113               		
 2114               	 ;  0 "" 2
 2116               	.LM190:
 2117               	/* #NOAPP */
 2118 0862 C098      		cbi 56-0x20,0
 2119 0864 99E0      		ldi r25,lo8(9)
 2120 0866 9FB9      		out 47-0x20,r25
 2121               	.L339:
 2122 0868 779B      		sbis 46-0x20,7
 2123 086a 00C0      		rjmp .L339
 2124 086c C09A      		sbi 56-0x20,0
 2126               	.LM191:
 2127 086e C098      		cbi 56-0x20,0
 2128 0870 99E0      		ldi r25,lo8(9)
 2129 0872 9FB9      		out 47-0x20,r25
 2130               	.L340:
 2131 0874 779B      		sbis 46-0x20,7
 2132 0876 00C0      		rjmp .L340
 2133 0878 C09A      		sbi 56-0x20,0
 2135               	.LM192:
 2136 087a C098      		cbi 56-0x20,0
 2137 087c 9EE3      		ldi r25,lo8(62)
 2138 087e 9FB9      		out 47-0x20,r25
 2139               	.L341:
 2140 0880 779B      		sbis 46-0x20,7
 2141 0882 00C0      		rjmp .L341
 2142               	.LBB13:
 2143 0884 9981      		ldd r25,Y+1
 2144 0886 9FB9      		out 47-0x20,r25
 2145               	.L342:
 2146 0888 779B      		sbis 46-0x20,7
 2147 088a 00C0      		rjmp .L342
 2148               	.LBE13:
 2149 088c C09A      		sbi 56-0x20,0
 2151               	.LM193:
 2152 088e 21E4      		ldi r18,lo8(-30655)
 2153 0890 38E8      		ldi r19,hi8(-30655)
 2154 0892 3C83      		std Y+4,r19
 2155 0894 2B83      		std Y+3,r18
 2157               	.LM194:
 2158 0896 9091 0000 		lds r25,auto_ack_enable
 2159 089a 9923      		tst r25
 2160 089c 01F0      		breq .L343
 2161 089e 21E6      		ldi r18,lo8(-30623)
 2162 08a0 38E8      		ldi r19,hi8(-30623)
 2163 08a2 3C83      		std Y+4,r19
 2164 08a4 2B83      		std Y+3,r18
 2165               	.L343:
 2167               	.LM195:
 2168 08a6 8823      		tst r24
 2169 08a8 01F0      		breq .L344
 2170 08aa 2B81      		ldd r18,Y+3
 2171 08ac 3C81      		ldd r19,Y+4
 2172 08ae 2860      		ori r18,lo8(8)
 2173 08b0 3C83      		std Y+4,r19
 2174 08b2 2B83      		std Y+3,r18
 2175               	.L344:
 2177               	.LM196:
 2178 08b4 C098      		cbi 56-0x20,0
 2179 08b6 9EE3      		ldi r25,lo8(62)
 2180 08b8 9FB9      		out 47-0x20,r25
 2181               	.L345:
 2182 08ba 779B      		sbis 46-0x20,7
 2183 08bc 00C0      		rjmp .L345
 2184 08be DE01      		movw r26,r28
 2185 08c0 1396      		adiw r26,3
 2187               	.LM197:
 2188 08c2 9E01      		movw r18,r28
 2189 08c4 2B5F      		subi r18,lo8(-(5))
 2190 08c6 3F4F      		sbci r19,hi8(-(5))
 2191               	.L347:
 2192               	.LBB14:
 2194               	.LM198:
 2195 08c8 9C91      		ld r25,X
 2196 08ca 9FB9      		out 47-0x20,r25
 2197               	.L346:
 2198 08cc 779B      		sbis 46-0x20,7
 2199 08ce 00C0      		rjmp .L346
 2200 08d0 1196      		adiw r26,1
 2201 08d2 A217      		cp r26,r18
 2202 08d4 B307      		cpc r27,r19
 2203 08d6 01F4      		brne .L347
 2204               	.LBE14:
 2205 08d8 C09A      		sbi 56-0x20,0
 2207               	.LM199:
 2208 08da C098      		cbi 56-0x20,0
 2209 08dc 9EE3      		ldi r25,lo8(62)
 2210 08de 9FB9      		out 47-0x20,r25
 2211               	.L348:
 2212 08e0 779B      		sbis 46-0x20,7
 2213 08e2 00C0      		rjmp .L348
 2214               	.LBB15:
 2215 08e4 9091 0000 		lds r25,rfSettings+2
 2216 08e8 9FB9      		out 47-0x20,r25
 2217               	.L349:
 2218 08ea 779B      		sbis 46-0x20,7
 2219 08ec 00C0      		rjmp .L349
 2220               	.LBE15:
 2221 08ee C09A      		sbi 56-0x20,0
 2223               	.LM200:
 2224 08f0 C098      		cbi 56-0x20,0
 2225 08f2 9EE3      		ldi r25,lo8(62)
 2226 08f4 9FB9      		out 47-0x20,r25
 2227               	.L350:
 2228 08f6 779B      		sbis 46-0x20,7
 2229 08f8 00C0      		rjmp .L350
 2230 08fa 20E0      		ldi r18,lo8(0)
 2231 08fc 30E0      		ldi r19,hi8(0)
 2232               	.L352:
 2233               	.LBB16:
 2234 08fe D901      		movw r26,r18
 2235 0900 A050      		subi r26,lo8(-(rfSettings))
 2236 0902 B040      		sbci r27,hi8(-(rfSettings))
 2237 0904 1496      		adiw r26,4
 2238 0906 9C91      		ld r25,X
 2239 0908 1497      		sbiw r26,4
 2240 090a 9FB9      		out 47-0x20,r25
 2241               	.L351:
 2242 090c 779B      		sbis 46-0x20,7
 2243 090e 00C0      		rjmp .L351
 2244 0910 2F5F      		subi r18,lo8(-(1))
 2245 0912 3F4F      		sbci r19,hi8(-(1))
 2246 0914 2230      		cpi r18,2
 2247 0916 3105      		cpc r19,__zero_reg__
 2248 0918 01F4      		brne .L352
 2249               	.LBE16:
 2250 091a C09A      		sbi 56-0x20,0
 2252               	.LM201:
 2253 091c C098      		cbi 56-0x20,0
 2254 091e 9EE3      		ldi r25,lo8(62)
 2255 0920 9FB9      		out 47-0x20,r25
 2256               	.L353:
 2257 0922 779B      		sbis 46-0x20,7
 2258 0924 00C0      		rjmp .L353
 2259 0926 DF01      		movw r26,r30
 2261               	.LM202:
 2262 0928 9F01      		movw r18,r30
 2263 092a 2E5F      		subi r18,lo8(-(2))
 2264 092c 3F4F      		sbci r19,hi8(-(2))
 2265               	.L355:
 2266               	.LBB17:
 2268               	.LM203:
 2269 092e 9C91      		ld r25,X
 2270 0930 9FB9      		out 47-0x20,r25
 2271               	.L354:
 2272 0932 779B      		sbis 46-0x20,7
 2273 0934 00C0      		rjmp .L354
 2274 0936 1196      		adiw r26,1
 2275 0938 A217      		cp r26,r18
 2276 093a B307      		cpc r27,r19
 2277 093c 01F4      		brne .L355
 2278               	.LBE17:
 2279 093e C09A      		sbi 56-0x20,0
 2281               	.LM204:
 2282 0940 C098      		cbi 56-0x20,0
 2283 0942 9EE3      		ldi r25,lo8(62)
 2284 0944 9FB9      		out 47-0x20,r25
 2285               	.L356:
 2286 0946 779B      		sbis 46-0x20,7
 2287 0948 00C0      		rjmp .L356
 2288 094a 20E0      		ldi r18,lo8(0)
 2289 094c 30E0      		ldi r19,hi8(0)
 2290               	.L358:
 2291               	.LBB18:
 2292 094e D901      		movw r26,r18
 2293 0950 A050      		subi r26,lo8(-(rfSettings))
 2294 0952 B040      		sbci r27,hi8(-(rfSettings))
 2295 0954 1696      		adiw r26,6
 2296 0956 9C91      		ld r25,X
 2297 0958 1697      		sbiw r26,6
 2298 095a 9FB9      		out 47-0x20,r25
 2299               	.L357:
 2300 095c 779B      		sbis 46-0x20,7
 2301 095e 00C0      		rjmp .L357
 2302 0960 2F5F      		subi r18,lo8(-(1))
 2303 0962 3F4F      		sbci r19,hi8(-(1))
 2304 0964 2230      		cpi r18,2
 2305 0966 3105      		cpc r19,__zero_reg__
 2306 0968 01F4      		brne .L358
 2307               	.LBE18:
 2308 096a C09A      		sbi 56-0x20,0
 2310               	.LM205:
 2311 096c 8823      		tst r24
 2312 096e 01F0      		breq .L359
 2314               	.LM206:
 2315 0970 C098      		cbi 56-0x20,0
 2316 0972 8EE3      		ldi r24,lo8(62)
 2317 0974 8FB9      		out 47-0x20,r24
 2318               	.L360:
 2319 0976 779B      		sbis 46-0x20,7
 2320 0978 00C0      		rjmp .L360
 2321 097a A0E0      		ldi r26,lo8(tx_ctr)
 2322 097c B0E0      		ldi r27,hi8(tx_ctr)
 2323               	.L362:
 2324               	.LBB19:
 2325 097e 8C91      		ld r24,X
 2326 0980 8FB9      		out 47-0x20,r24
 2327               	.L361:
 2328 0982 779B      		sbis 46-0x20,7
 2329 0984 00C0      		rjmp .L361
 2330 0986 1196      		adiw r26,1
 2331 0988 80E0      		ldi r24,hi8(tx_ctr+4)
 2332 098a A030      		cpi r26,lo8(tx_ctr+4)
 2333 098c B807      		cpc r27,r24
 2334 098e 01F4      		brne .L362
 2335               	.LBE19:
 2336 0990 C09A      		sbi 56-0x20,0
 2337               	.L359:
 2339               	.LM207:
 2340 0992 C098      		cbi 56-0x20,0
 2341 0994 8EE3      		ldi r24,lo8(62)
 2342 0996 8FB9      		out 47-0x20,r24
 2343               	.L363:
 2344 0998 779B      		sbis 46-0x20,7
 2345 099a 00C0      		rjmp .L363
 2346 099c 80E0      		ldi r24,lo8(0)
 2347 099e 00C0      		rjmp .L364
 2348               	.L366:
 2349               	.LBB20:
 2350 09a0 A381      		ldd r26,Z+3
 2351 09a2 B481      		ldd r27,Z+4
 2352 09a4 A20F      		add r26,r18
 2353 09a6 B31F      		adc r27,r19
 2354 09a8 9C91      		ld r25,X
 2355 09aa 9FB9      		out 47-0x20,r25
 2356               	.L365:
 2357 09ac 779B      		sbis 46-0x20,7
 2358 09ae 00C0      		rjmp .L365
 2359 09b0 8F5F      		subi r24,lo8(-(1))
 2360               	.L364:
 2361 09b2 282F      		mov r18,r24
 2362 09b4 30E0      		ldi r19,lo8(0)
 2363 09b6 2417      		cp r18,r20
 2364 09b8 3507      		cpc r19,r21
 2365 09ba 04F0      		brlt .L366
 2366               	.LBE20:
 2367 09bc C09A      		sbi 56-0x20,0
 2369               	.LM208:
 2370 09be C098      		cbi 56-0x20,0
 2371 09c0 8EE3      		ldi r24,lo8(62)
 2372 09c2 8FB9      		out 47-0x20,r24
 2373               	.L367:
 2374 09c4 779B      		sbis 46-0x20,7
 2375 09c6 00C0      		rjmp .L367
 2376               	.LBB21:
 2377 09c8 8A81      		ldd r24,Y+2
 2378 09ca 8FB9      		out 47-0x20,r24
 2379               	.L368:
 2380 09cc 779B      		sbis 46-0x20,7
 2381 09ce 00C0      		rjmp .L368
 2382               	.LBE21:
 2383 09d0 C09A      		sbi 56-0x20,0
 2385               	.LM209:
 2386 09d2 8581      		ldd r24,Z+5
 2387 09d4 8823      		tst r24
 2388 09d6 01F0      		breq .L369
 2389               	.LBB22:
 2391               	.LM210:
 2392 09d8 8091 0000 		lds r24,rfSettings+8
 2393 09dc 8823      		tst r24
 2394 09de 01F4      		brne .L394
 2396               	.LM211:
 2397 09e0 C098      		cbi 56-0x20,0
 2398 09e2 83E0      		ldi r24,lo8(3)
 2399 09e4 8FB9      		out 47-0x20,r24
 2400               	.L371:
 2401 09e6 779B      		sbis 46-0x20,7
 2402 09e8 00C0      		rjmp .L371
 2403 09ea C09A      		sbi 56-0x20,0
 2404               	.L394:
 2406               	.LM212:
 2407 09ec C098      		cbi 56-0x20,0
 2408 09ee 1FB8      		out 47-0x20,__zero_reg__
 2409               	.L372:
 2410 09f0 779B      		sbis 46-0x20,7
 2411 09f2 00C0      		rjmp .L372
 2412 09f4 8FB1      		in r24,47-0x20
 2413 09f6 C09A      		sbi 56-0x20,0
 2415               	.LM213:
 2416 09f8 81FF      		sbrs r24,1
 2417 09fa 00C0      		rjmp .L394
 2418 09fc 10E0      		ldi r17,lo8(0)
 2420               	.LM214:
 2421 09fe 05E0      		ldi r16,lo8(5)
 2422               	.L377:
 2423 0a00 C098      		cbi 56-0x20,0
 2424 0a02 0FB9      		out 47-0x20,r16
 2425               	.L373:
 2426 0a04 779B      		sbis 46-0x20,7
 2427 0a06 00C0      		rjmp .L373
 2428 0a08 C09A      		sbi 56-0x20,0
 2430               	.LM215:
 2431 0a0a C098      		cbi 56-0x20,0
 2432 0a0c 1FB8      		out 47-0x20,__zero_reg__
 2433               	.L374:
 2434 0a0e 779B      		sbis 46-0x20,7
 2435 0a10 00C0      		rjmp .L374
 2436 0a12 FFB0      		in r15,47-0x20
 2437 0a14 C09A      		sbi 56-0x20,0
 2439               	.LM216:
 2440 0a16 1F5F      		subi r17,lo8(-(1))
 2442               	.LM217:
 2443 0a18 1536      		cpi r17,lo8(101)
 2444 0a1a 01F4      		brne .L375
 2446               	.LM218:
 2447               	/* #APP */
 2448               	 ;  752 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 2449 0a1c 7894      		sei
 2450               		
 2451               	 ;  0 "" 2
 2453               	.LM219:
 2454               	/* #NOAPP */
 2455 0a1e 8091 0000 		lds r24,radio_sem
 2456 0a22 9091 0000 		lds r25,(radio_sem)+1
 2457 0a26 0E94 0000 		call nrk_sem_post
 2458 0a2a 80E0      		ldi r24,lo8(0)
 2460               	.LM220:
 2461 0a2c 00C0      		rjmp .L376
 2462               	.L375:
 2464               	.LM221:
 2465 0a2e 84E6      		ldi r24,lo8(100)
 2466 0a30 90E0      		ldi r25,hi8(100)
 2467 0a32 0E94 0000 		call halWait
 2469               	.LM222:
 2470 0a36 F3FE      		sbrs r15,3
 2471 0a38 00C0      		rjmp .L377
 2472 0a3a 00C0      		rjmp .L378
 2473               	.L369:
 2474               	.LBE22:
 2476               	.LM223:
 2477 0a3c C098      		cbi 56-0x20,0
 2478 0a3e 84E0      		ldi r24,lo8(4)
 2479 0a40 8FB9      		out 47-0x20,r24
 2480               	.L379:
 2481 0a42 779B      		sbis 46-0x20,7
 2482 0a44 00C0      		rjmp .L379
 2483 0a46 C09A      		sbi 56-0x20,0
 2484               	.L378:
 2486               	.LM224:
 2487               	/* #APP */
 2488               	 ;  763 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 2489 0a48 7894      		sei
 2490               		
 2491               	 ;  0 "" 2
 2492               	/* #NOAPP */
 2493               	.L380:
 2495               	.LM225:
 2496 0a4a 849B      		sbis 48-0x20,4
 2497 0a4c 00C0      		rjmp .L380
 2498               	.L393:
 2500               	.LM226:
 2501 0a4e 8499      		sbic 48-0x20,4
 2502 0a50 00C0      		rjmp .L393
 2504               	.LM227:
 2505 0a52 8091 0000 		lds r24,auto_ack_enable
 2506 0a56 8823      		tst r24
 2507 0a58 01F0      		breq .L437
 2509               	.LM228:
 2510 0a5a 84EA      		ldi r24,lo8(676)
 2511 0a5c 92E0      		ldi r25,hi8(676)
 2512 0a5e 0E94 0000 		call halWait
 2514               	.LM229:
 2515 0a62 B79B      		sbis 54-0x20,7
 2516 0a64 00C0      		rjmp .L384
 2518               	.LM230:
 2519 0a66 C098      		cbi 56-0x20,0
 2520 0a68 8FE7      		ldi r24,lo8(127)
 2521 0a6a 8FB9      		out 47-0x20,r24
 2522               	.L385:
 2523 0a6c 779B      		sbis 46-0x20,7
 2524 0a6e 00C0      		rjmp .L385
 2525 0a70 1FB8      		out 47-0x20,__zero_reg__
 2526               	.L386:
 2527 0a72 779B      		sbis 46-0x20,7
 2528 0a74 00C0      		rjmp .L386
 2529 0a76 8FB1      		in r24,47-0x20
 2530 0a78 C09A      		sbi 56-0x20,0
 2531               	.L437:
 2532 0a7a 81E0      		ldi r24,lo8(1)
 2533 0a7c 00C0      		rjmp .L383
 2534               	.L384:
 2536               	.LM231:
 2537 0a7e C098      		cbi 56-0x20,0
 2538 0a80 88E0      		ldi r24,lo8(8)
 2539 0a82 8FB9      		out 47-0x20,r24
 2540               	.L387:
 2541 0a84 779B      		sbis 46-0x20,7
 2542 0a86 00C0      		rjmp .L387
 2543 0a88 C09A      		sbi 56-0x20,0
 2545               	.LM232:
 2546 0a8a C098      		cbi 56-0x20,0
 2547 0a8c 88E0      		ldi r24,lo8(8)
 2548 0a8e 8FB9      		out 47-0x20,r24
 2549               	.L388:
 2550 0a90 779B      		sbis 46-0x20,7
 2551 0a92 00C0      		rjmp .L388
 2552 0a94 C09A      		sbi 56-0x20,0
 2553 0a96 80E0      		ldi r24,lo8(0)
 2554               	.L383:
 2556               	.LM233:
 2557               	/* #APP */
 2558               	 ;  804 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 2559 0a98 F894      		cli
 2560               		
 2561               	 ;  0 "" 2
 2563               	.LM234:
 2564               	/* #NOAPP */
 2565 0a9a C098      		cbi 56-0x20,0
 2566 0a9c 96E0      		ldi r25,lo8(6)
 2567 0a9e 9FB9      		out 47-0x20,r25
 2568               	.L389:
 2569 0aa0 779B      		sbis 46-0x20,7
 2570 0aa2 00C0      		rjmp .L389
 2571 0aa4 C09A      		sbi 56-0x20,0
 2573               	.LM235:
 2574               	/* #APP */
 2575               	 ;  814 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 2576 0aa6 7894      		sei
 2577               		
 2578               	 ;  0 "" 2
 2580               	.LM236:
 2581               	/* #NOAPP */
 2582 0aa8 9091 0000 		lds r25,rfSettings+2
 2583 0aac 9F5F      		subi r25,lo8(-(1))
 2584 0aae 9093 0000 		sts rfSettings+2,r25
 2585               	.L376:
 2586               	/* epilogue start */
 2588               	.LM237:
 2589 0ab2 0F90      		pop __tmp_reg__
 2590 0ab4 0F90      		pop __tmp_reg__
 2591 0ab6 0F90      		pop __tmp_reg__
 2592 0ab8 0F90      		pop __tmp_reg__
 2593 0aba CF91      		pop r28
 2594 0abc DF91      		pop r29
 2595 0abe 1F91      		pop r17
 2596 0ac0 0F91      		pop r16
 2597 0ac2 FF90      		pop r15
 2598 0ac4 0895      		ret
 2615               	.Lscope30:
 2617               		.stabd	78,0,0
 2622               	.global	rf_tx_tdma_packet
 2624               	rf_tx_tdma_packet:
 2625               		.stabd	46,0,0
 2627               	.LM238:
 2628               	.LFBB31:
 2629 0ac6 CF92      		push r12
 2630 0ac8 DF92      		push r13
 2631 0aca EF92      		push r14
 2632 0acc FF92      		push r15
 2633 0ace 0F93      		push r16
 2634 0ad0 1F93      		push r17
 2635 0ad2 DF93      		push r29
 2636 0ad4 CF93      		push r28
 2637 0ad6 00D0      		rcall .
 2638 0ad8 00D0      		rcall .
 2639 0ada 0F92      		push __tmp_reg__
 2640 0adc CDB7      		in r28,__SP_L__
 2641 0ade DEB7      		in r29,__SP_H__
 2642               	/* prologue: function */
 2643               	/* frame size = 5 */
 2644 0ae0 8C01      		movw r16,r24
 2645 0ae2 7B01      		movw r14,r22
 2646 0ae4 6A01      		movw r12,r20
 2648               	.LM239:
 2649 0ae6 0E94 0000 		call _nrk_os_timer_get
 2651               	.LM240:
 2652 0aea C098      		cbi 56-0x20,0
 2653 0aec 88E0      		ldi r24,lo8(8)
 2654 0aee 8FB9      		out 47-0x20,r24
 2655               	.L439:
 2656 0af0 779B      		sbis 46-0x20,7
 2657 0af2 00C0      		rjmp .L439
 2658 0af4 C09A      		sbi 56-0x20,0
 2660               	.LM241:
 2661 0af6 C098      		cbi 56-0x20,0
 2662 0af8 88E0      		ldi r24,lo8(8)
 2663 0afa 8FB9      		out 47-0x20,r24
 2664               	.L440:
 2665 0afc 779B      		sbis 46-0x20,7
 2666 0afe 00C0      		rjmp .L440
 2667 0b00 C09A      		sbi 56-0x20,0
 2668               	.L530:
 2670               	.LM242:
 2671 0b02 0E99      		sbic 33-0x20,6
 2672 0b04 00C0      		rjmp .L530
 2673 0b06 8499      		sbic 48-0x20,4
 2674 0b08 00C0      		rjmp .L530
 2676               	.LM243:
 2677               	/* #APP */
 2678               	 ;  471 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 2679 0b0a F894      		cli
 2680               		
 2681               	 ;  0 "" 2
 2683               	.LM244:
 2684               	/* #NOAPP */
 2685 0b0c C098      		cbi 56-0x20,0
 2686 0b0e 89E0      		ldi r24,lo8(9)
 2687 0b10 8FB9      		out 47-0x20,r24
 2688               	.L442:
 2689 0b12 779B      		sbis 46-0x20,7
 2690 0b14 00C0      		rjmp .L442
 2691 0b16 C09A      		sbi 56-0x20,0
 2693               	.LM245:
 2694 0b18 C098      		cbi 56-0x20,0
 2695 0b1a 89E0      		ldi r24,lo8(9)
 2696 0b1c 8FB9      		out 47-0x20,r24
 2697               	.L443:
 2698 0b1e 779B      		sbis 46-0x20,7
 2699 0b20 00C0      		rjmp .L443
 2700 0b22 C09A      		sbi 56-0x20,0
 2702               	.LM246:
 2703 0b24 1A82      		std Y+2,__zero_reg__
 2705               	.LM247:
 2706 0b26 D801      		movw r26,r16
 2707 0b28 1296      		adiw r26,2
 2708 0b2a 2C91      		ld r18,X
 2709 0b2c 1297      		sbiw r26,2
 2710 0b2e 622F      		mov r22,r18
 2711 0b30 7727      		clr r23
 2712 0b32 67FD      		sbrc r22,7
 2713 0b34 7095      		com r23
 2714 0b36 80E0      		ldi r24,lo8(0)
 2715 0b38 00C0      		rjmp .L444
 2716               	.L445:
 2718               	.LM248:
 2719 0b3a D801      		movw r26,r16
 2720 0b3c 1396      		adiw r26,3
 2721 0b3e ED91      		ld r30,X+
 2722 0b40 FC91      		ld r31,X
 2723 0b42 1497      		sbiw r26,3+1
 2724 0b44 E40F      		add r30,r20
 2725 0b46 F51F      		adc r31,r21
 2726 0b48 9A81      		ldd r25,Y+2
 2727 0b4a 3081      		ld r19,Z
 2728 0b4c 930F      		add r25,r19
 2729 0b4e 9A83      		std Y+2,r25
 2731               	.LM249:
 2732 0b50 8F5F      		subi r24,lo8(-(1))
 2733               	.L444:
 2734 0b52 482F      		mov r20,r24
 2735 0b54 50E0      		ldi r21,lo8(0)
 2736 0b56 4617      		cp r20,r22
 2737 0b58 5707      		cpc r21,r23
 2738 0b5a 04F0      		brlt .L445
 2740               	.LM250:
 2741 0b5c 822F      		mov r24,r18
 2742 0b5e 845F      		subi r24,lo8(-(12))
 2743 0b60 8983      		std Y+1,r24
 2745               	.LM251:
 2746 0b62 C098      		cbi 56-0x20,0
 2747 0b64 9EE3      		ldi r25,lo8(62)
 2748 0b66 9FB9      		out 47-0x20,r25
 2749               	.L446:
 2750 0b68 779B      		sbis 46-0x20,7
 2751 0b6a 00C0      		rjmp .L446
 2752               	.LBB23:
 2753 0b6c 8FB9      		out 47-0x20,r24
 2754               	.L447:
 2755 0b6e 779B      		sbis 46-0x20,7
 2756 0b70 00C0      		rjmp .L447
 2757               	.LBE23:
 2758 0b72 C09A      		sbi 56-0x20,0
 2760               	.LM252:
 2761 0b74 F801      		movw r30,r16
 2762 0b76 8681      		ldd r24,Z+6
 2763 0b78 8823      		tst r24
 2764 0b7a 01F4      		brne .L448
 2765 0b7c 81E4      		ldi r24,lo8(-30655)
 2766 0b7e 98E8      		ldi r25,hi8(-30655)
 2767 0b80 00C0      		rjmp .L449
 2768               	.L448:
 2769 0b82 81E6      		ldi r24,lo8(-30623)
 2770 0b84 98E8      		ldi r25,hi8(-30623)
 2771               	.L449:
 2772 0b86 9C83      		std Y+4,r25
 2773 0b88 8B83      		std Y+3,r24
 2775               	.LM253:
 2776 0b8a C098      		cbi 56-0x20,0
 2777 0b8c 8EE3      		ldi r24,lo8(62)
 2778 0b8e 8FB9      		out 47-0x20,r24
 2779               	.L450:
 2780 0b90 779B      		sbis 46-0x20,7
 2781 0b92 00C0      		rjmp .L450
 2782 0b94 FE01      		movw r30,r28
 2783 0b96 3396      		adiw r30,3
 2785               	.LM254:
 2786 0b98 CE01      		movw r24,r28
 2787 0b9a 0596      		adiw r24,5
 2788               	.L452:
 2789               	.LBB24:
 2791               	.LM255:
 2792 0b9c 2081      		ld r18,Z
 2793 0b9e 2FB9      		out 47-0x20,r18
 2794               	.L451:
 2795 0ba0 779B      		sbis 46-0x20,7
 2796 0ba2 00C0      		rjmp .L451
 2797 0ba4 3196      		adiw r30,1
 2798 0ba6 E817      		cp r30,r24
 2799 0ba8 F907      		cpc r31,r25
 2800 0baa 01F4      		brne .L452
 2801               	.LBE24:
 2802 0bac C09A      		sbi 56-0x20,0
 2804               	.LM256:
 2805 0bae C098      		cbi 56-0x20,0
 2806 0bb0 8EE3      		ldi r24,lo8(62)
 2807 0bb2 8FB9      		out 47-0x20,r24
 2808               	.L453:
 2809 0bb4 779B      		sbis 46-0x20,7
 2810 0bb6 00C0      		rjmp .L453
 2811               	.LBB25:
 2812 0bb8 8091 0000 		lds r24,rfSettings+2
 2813 0bbc 8FB9      		out 47-0x20,r24
 2814               	.L454:
 2815 0bbe 779B      		sbis 46-0x20,7
 2816 0bc0 00C0      		rjmp .L454
 2817               	.LBE25:
 2818 0bc2 C09A      		sbi 56-0x20,0
 2820               	.LM257:
 2821 0bc4 C098      		cbi 56-0x20,0
 2822 0bc6 8EE3      		ldi r24,lo8(62)
 2823 0bc8 8FB9      		out 47-0x20,r24
 2824               	.L455:
 2825 0bca 779B      		sbis 46-0x20,7
 2826 0bcc 00C0      		rjmp .L455
 2827 0bce 80E0      		ldi r24,lo8(0)
 2828 0bd0 90E0      		ldi r25,hi8(0)
 2829               	.L457:
 2830               	.LBB26:
 2831 0bd2 FC01      		movw r30,r24
 2832 0bd4 E050      		subi r30,lo8(-(rfSettings))
 2833 0bd6 F040      		sbci r31,hi8(-(rfSettings))
 2834 0bd8 2481      		ldd r18,Z+4
 2835 0bda 2FB9      		out 47-0x20,r18
 2836               	.L456:
 2837 0bdc 779B      		sbis 46-0x20,7
 2838 0bde 00C0      		rjmp .L456
 2839 0be0 0196      		adiw r24,1
 2840 0be2 8230      		cpi r24,2
 2841 0be4 9105      		cpc r25,__zero_reg__
 2842 0be6 01F4      		brne .L457
 2843               	.LBE26:
 2844 0be8 C09A      		sbi 56-0x20,0
 2846               	.LM258:
 2847 0bea C098      		cbi 56-0x20,0
 2848 0bec 8EE3      		ldi r24,lo8(62)
 2849 0bee 8FB9      		out 47-0x20,r24
 2850               	.L458:
 2851 0bf0 779B      		sbis 46-0x20,7
 2852 0bf2 00C0      		rjmp .L458
 2853 0bf4 F801      		movw r30,r16
 2855               	.LM259:
 2856 0bf6 C801      		movw r24,r16
 2857 0bf8 0296      		adiw r24,2
 2858               	.L460:
 2859               	.LBB27:
 2861               	.LM260:
 2862 0bfa 2081      		ld r18,Z
 2863 0bfc 2FB9      		out 47-0x20,r18
 2864               	.L459:
 2865 0bfe 779B      		sbis 46-0x20,7
 2866 0c00 00C0      		rjmp .L459
 2867 0c02 3196      		adiw r30,1
 2868 0c04 E817      		cp r30,r24
 2869 0c06 F907      		cpc r31,r25
 2870 0c08 01F4      		brne .L460
 2871               	.LBE27:
 2872 0c0a C09A      		sbi 56-0x20,0
 2874               	.LM261:
 2875 0c0c C098      		cbi 56-0x20,0
 2876 0c0e 8EE3      		ldi r24,lo8(62)
 2877 0c10 8FB9      		out 47-0x20,r24
 2878               	.L461:
 2879 0c12 779B      		sbis 46-0x20,7
 2880 0c14 00C0      		rjmp .L461
 2881 0c16 80E0      		ldi r24,lo8(0)
 2882 0c18 90E0      		ldi r25,hi8(0)
 2883               	.L463:
 2884               	.LBB28:
 2885 0c1a FC01      		movw r30,r24
 2886 0c1c E050      		subi r30,lo8(-(rfSettings))
 2887 0c1e F040      		sbci r31,hi8(-(rfSettings))
 2888 0c20 2681      		ldd r18,Z+6
 2889 0c22 2FB9      		out 47-0x20,r18
 2890               	.L462:
 2891 0c24 779B      		sbis 46-0x20,7
 2892 0c26 00C0      		rjmp .L462
 2893 0c28 0196      		adiw r24,1
 2894 0c2a 8230      		cpi r24,2
 2895 0c2c 9105      		cpc r25,__zero_reg__
 2896 0c2e 01F4      		brne .L463
 2897               	.LBE28:
 2898 0c30 C09A      		sbi 56-0x20,0
 2900               	.LM262:
 2901 0c32 C701      		movw r24,r14
 2902 0c34 B601      		movw r22,r12
 2903 0c36 0E94 0000 		call nrk_high_speed_timer_wait
 2905               	.LM263:
 2906 0c3a D801      		movw r26,r16
 2907 0c3c 1596      		adiw r26,5
 2908 0c3e 8C91      		ld r24,X
 2909 0c40 1597      		sbiw r26,5
 2910 0c42 8823      		tst r24
 2911 0c44 01F0      		breq .L464
 2912               	.LBB29:
 2914               	.LM264:
 2915 0c46 8091 0000 		lds r24,rfSettings+8
 2916 0c4a 8823      		tst r24
 2917 0c4c 01F4      		brne .L490
 2919               	.LM265:
 2920 0c4e C098      		cbi 56-0x20,0
 2921 0c50 83E0      		ldi r24,lo8(3)
 2922 0c52 8FB9      		out 47-0x20,r24
 2923               	.L466:
 2924 0c54 779B      		sbis 46-0x20,7
 2925 0c56 00C0      		rjmp .L466
 2926 0c58 C09A      		sbi 56-0x20,0
 2927               	.L490:
 2929               	.LM266:
 2930 0c5a C098      		cbi 56-0x20,0
 2931 0c5c 1FB8      		out 47-0x20,__zero_reg__
 2932               	.L467:
 2933 0c5e 779B      		sbis 46-0x20,7
 2934 0c60 00C0      		rjmp .L467
 2935 0c62 8FB1      		in r24,47-0x20
 2936 0c64 C09A      		sbi 56-0x20,0
 2938               	.LM267:
 2939 0c66 81FF      		sbrs r24,1
 2940 0c68 00C0      		rjmp .L490
 2941 0c6a 20E0      		ldi r18,lo8(0)
 2943               	.LM268:
 2944 0c6c E5E0      		ldi r30,lo8(5)
 2945 0c6e EE2E      		mov r14,r30
 2946               	.L472:
 2947 0c70 C098      		cbi 56-0x20,0
 2948 0c72 EFB8      		out 47-0x20,r14
 2949               	.L468:
 2950 0c74 779B      		sbis 46-0x20,7
 2951 0c76 00C0      		rjmp .L468
 2952 0c78 C09A      		sbi 56-0x20,0
 2954               	.LM269:
 2955 0c7a C098      		cbi 56-0x20,0
 2956 0c7c 1FB8      		out 47-0x20,__zero_reg__
 2957               	.L469:
 2958 0c7e 779B      		sbis 46-0x20,7
 2959 0c80 00C0      		rjmp .L469
 2960 0c82 CFB0      		in r12,47-0x20
 2961 0c84 C09A      		sbi 56-0x20,0
 2963               	.LM270:
 2964 0c86 2F5F      		subi r18,lo8(-(1))
 2966               	.LM271:
 2967 0c88 2536      		cpi r18,lo8(101)
 2968 0c8a 01F4      		brne .L470
 2970               	.LM272:
 2971               	/* #APP */
 2972               	 ;  560 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 2973 0c8c 7894      		sei
 2974               		
 2975               	 ;  0 "" 2
 2977               	.LM273:
 2978               	/* #NOAPP */
 2979 0c8e 8091 0000 		lds r24,radio_sem
 2980 0c92 9091 0000 		lds r25,(radio_sem)+1
 2981 0c96 0E94 0000 		call nrk_sem_post
 2982 0c9a 80E0      		ldi r24,lo8(0)
 2984               	.LM274:
 2985 0c9c 00C0      		rjmp .L471
 2986               	.L470:
 2988               	.LM275:
 2989 0c9e 84E6      		ldi r24,lo8(100)
 2990 0ca0 90E0      		ldi r25,hi8(100)
 2991 0ca2 2D83      		std Y+5,r18
 2992 0ca4 0E94 0000 		call halWait
 2994               	.LM276:
 2995 0ca8 2D81      		ldd r18,Y+5
 2996 0caa C3FE      		sbrs r12,3
 2997 0cac 00C0      		rjmp .L472
 2998 0cae 00C0      		rjmp .L473
 2999               	.L464:
 3000               	.LBE29:
 3002               	.LM277:
 3003 0cb0 C098      		cbi 56-0x20,0
 3004 0cb2 84E0      		ldi r24,lo8(4)
 3005 0cb4 8FB9      		out 47-0x20,r24
 3006               	.L474:
 3007 0cb6 779B      		sbis 46-0x20,7
 3008 0cb8 00C0      		rjmp .L474
 3009 0cba C09A      		sbi 56-0x20,0
 3010               	.L473:
 3012               	.LM278:
 3013 0cbc C098      		cbi 56-0x20,0
 3014 0cbe 8EE3      		ldi r24,lo8(62)
 3015 0cc0 8FB9      		out 47-0x20,r24
 3016               	.L475:
 3017 0cc2 779B      		sbis 46-0x20,7
 3018 0cc4 00C0      		rjmp .L475
 3019               	.LBB30:
 3020 0cc6 F801      		movw r30,r16
 3021 0cc8 4281      		ldd r20,Z+2
 3022 0cca 5527      		clr r21
 3023 0ccc 47FD      		sbrc r20,7
 3024 0cce 5095      		com r21
 3025 0cd0 80E0      		ldi r24,lo8(0)
 3026 0cd2 00C0      		rjmp .L476
 3027               	.L478:
 3028 0cd4 D801      		movw r26,r16
 3029 0cd6 1396      		adiw r26,3
 3030 0cd8 ED91      		ld r30,X+
 3031 0cda FC91      		ld r31,X
 3032 0cdc 1497      		sbiw r26,3+1
 3033 0cde E20F      		add r30,r18
 3034 0ce0 F31F      		adc r31,r19
 3035 0ce2 9081      		ld r25,Z
 3036 0ce4 9FB9      		out 47-0x20,r25
 3037               	.L477:
 3038 0ce6 779B      		sbis 46-0x20,7
 3039 0ce8 00C0      		rjmp .L477
 3040 0cea 8F5F      		subi r24,lo8(-(1))
 3041               	.L476:
 3042 0cec 282F      		mov r18,r24
 3043 0cee 30E0      		ldi r19,lo8(0)
 3044 0cf0 2417      		cp r18,r20
 3045 0cf2 3507      		cpc r19,r21
 3046 0cf4 04F0      		brlt .L478
 3047               	.LBE30:
 3048 0cf6 C09A      		sbi 56-0x20,0
 3050               	.LM279:
 3051 0cf8 C098      		cbi 56-0x20,0
 3052 0cfa 8EE3      		ldi r24,lo8(62)
 3053 0cfc 8FB9      		out 47-0x20,r24
 3054               	.L479:
 3055 0cfe 779B      		sbis 46-0x20,7
 3056 0d00 00C0      		rjmp .L479
 3057               	.LBB31:
 3058 0d02 8A81      		ldd r24,Y+2
 3059 0d04 8FB9      		out 47-0x20,r24
 3060               	.L480:
 3061 0d06 779B      		sbis 46-0x20,7
 3062 0d08 00C0      		rjmp .L480
 3063               	.LBE31:
 3064 0d0a C09A      		sbi 56-0x20,0
 3065               	.L481:
 3067               	.LM280:
 3068 0d0c 849B      		sbis 48-0x20,4
 3069 0d0e 00C0      		rjmp .L481
 3071               	.LM281:
 3072               	/* #APP */
 3073               	 ;  605 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 3074 0d10 F894      		cli
 3075               		
 3076               	 ;  0 "" 2
 3077               	/* #NOAPP */
 3078               	.L482:
 3080               	.LM282:
 3081 0d12 8499      		sbic 48-0x20,4
 3082 0d14 00C0      		rjmp .L482
 3084               	.LM283:
 3085 0d16 C098      		cbi 56-0x20,0
 3086 0d18 88E0      		ldi r24,lo8(8)
 3087 0d1a 8FB9      		out 47-0x20,r24
 3088               	.L483:
 3089 0d1c 779B      		sbis 46-0x20,7
 3090 0d1e 00C0      		rjmp .L483
 3091 0d20 C09A      		sbi 56-0x20,0
 3093               	.LM284:
 3094 0d22 C098      		cbi 56-0x20,0
 3095 0d24 88E0      		ldi r24,lo8(8)
 3096 0d26 8FB9      		out 47-0x20,r24
 3097               	.L484:
 3098 0d28 779B      		sbis 46-0x20,7
 3099 0d2a 00C0      		rjmp .L484
 3100 0d2c C09A      		sbi 56-0x20,0
 3102               	.LM285:
 3103 0d2e C098      		cbi 56-0x20,0
 3104 0d30 89E0      		ldi r24,lo8(9)
 3105 0d32 8FB9      		out 47-0x20,r24
 3106               	.L485:
 3107 0d34 779B      		sbis 46-0x20,7
 3108 0d36 00C0      		rjmp .L485
 3109 0d38 C09A      		sbi 56-0x20,0
 3111               	.LM286:
 3112 0d3a C098      		cbi 56-0x20,0
 3113 0d3c 89E0      		ldi r24,lo8(9)
 3114 0d3e 8FB9      		out 47-0x20,r24
 3115               	.L486:
 3116 0d40 779B      		sbis 46-0x20,7
 3117 0d42 00C0      		rjmp .L486
 3118 0d44 C09A      		sbi 56-0x20,0
 3120               	.LM287:
 3121 0d46 C098      		cbi 56-0x20,0
 3122 0d48 86E0      		ldi r24,lo8(6)
 3123 0d4a 8FB9      		out 47-0x20,r24
 3124               	.L487:
 3125 0d4c 779B      		sbis 46-0x20,7
 3126 0d4e 00C0      		rjmp .L487
 3127 0d50 C09A      		sbi 56-0x20,0
 3129               	.LM288:
 3130               	/* #APP */
 3131               	 ;  620 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 3132 0d52 7894      		sei
 3133               		
 3134               	 ;  0 "" 2
 3136               	.LM289:
 3137               	/* #NOAPP */
 3138 0d54 8091 0000 		lds r24,rfSettings+2
 3139 0d58 8F5F      		subi r24,lo8(-(1))
 3140 0d5a 8093 0000 		sts rfSettings+2,r24
 3141 0d5e 81E0      		ldi r24,lo8(1)
 3142               	.L471:
 3143               	/* epilogue start */
 3145               	.LM290:
 3146 0d60 0F90      		pop __tmp_reg__
 3147 0d62 0F90      		pop __tmp_reg__
 3148 0d64 0F90      		pop __tmp_reg__
 3149 0d66 0F90      		pop __tmp_reg__
 3150 0d68 0F90      		pop __tmp_reg__
 3151 0d6a CF91      		pop r28
 3152 0d6c DF91      		pop r29
 3153 0d6e 1F91      		pop r17
 3154 0d70 0F91      		pop r16
 3155 0d72 FF90      		pop r15
 3156 0d74 EF90      		pop r14
 3157 0d76 DF90      		pop r13
 3158 0d78 CF90      		pop r12
 3159 0d7a 0895      		ret
 3175               	.Lscope31:
 3177               		.stabd	78,0,0
 3180               	.global	rf_addr_decode_set_my_mac
 3182               	rf_addr_decode_set_my_mac:
 3183               		.stabd	46,0,0
 3185               	.LM291:
 3186               	.LFBB32:
 3187 0d7c DF93      		push r29
 3188 0d7e CF93      		push r28
 3189 0d80 00D0      		rcall .
 3190 0d82 CDB7      		in r28,__SP_L__
 3191 0d84 DEB7      		in r29,__SP_H__
 3192               	/* prologue: function */
 3193               	/* frame size = 2 */
 3194 0d86 9A83      		std Y+2,r25
 3195 0d88 8983      		std Y+1,r24
 3197               	.LM292:
 3198 0d8a 9093 0000 		sts (rfSettings+6)+1,r25
 3199 0d8e 8093 0000 		sts rfSettings+6,r24
 3201               	.LM293:
 3202 0d92 84EF      		ldi r24,lo8(500)
 3203 0d94 91E0      		ldi r25,hi8(500)
 3204 0d96 0E94 0000 		call nrk_spin_wait_us
 3206               	.LM294:
 3207 0d9a C098      		cbi 56-0x20,0
 3208 0d9c 8AEE      		ldi r24,lo8(-22)
 3209 0d9e 8FB9      		out 47-0x20,r24
 3210               	.L532:
 3211 0da0 779B      		sbis 46-0x20,7
 3212 0da2 00C0      		rjmp .L532
 3213 0da4 80E8      		ldi r24,lo8(-128)
 3214 0da6 8FB9      		out 47-0x20,r24
 3215               	.L533:
 3216 0da8 779B      		sbis 46-0x20,7
 3217 0daa 00C0      		rjmp .L533
 3218 0dac FE01      		movw r30,r28
 3219 0dae 3196      		adiw r30,1
 3221               	.LM295:
 3222 0db0 CE01      		movw r24,r28
 3223 0db2 0396      		adiw r24,3
 3224               	.L535:
 3226               	.LM296:
 3227 0db4 2081      		ld r18,Z
 3228 0db6 2FB9      		out 47-0x20,r18
 3229               	.L534:
 3230 0db8 779B      		sbis 46-0x20,7
 3231 0dba 00C0      		rjmp .L534
 3232 0dbc 3196      		adiw r30,1
 3233 0dbe E817      		cp r30,r24
 3234 0dc0 F907      		cpc r31,r25
 3235 0dc2 01F4      		brne .L535
 3236 0dc4 C09A      		sbi 56-0x20,0
 3238               	.LM297:
 3239 0dc6 84EF      		ldi r24,lo8(500)
 3240 0dc8 91E0      		ldi r25,hi8(500)
 3241 0dca 0E94 0000 		call nrk_spin_wait_us
 3242               	/* epilogue start */
 3244               	.LM298:
 3245 0dce 0F90      		pop __tmp_reg__
 3246 0dd0 0F90      		pop __tmp_reg__
 3247 0dd2 CF91      		pop r28
 3248 0dd4 DF91      		pop r29
 3249 0dd6 0895      		ret
 3251               	.Lscope32:
 3253               		.stabd	78,0,0
 3255               	.global	rf_security_set_key
 3257               	rf_security_set_key:
 3258               		.stabd	46,0,0
 3260               	.LM299:
 3261               	.LFBB33:
 3262 0dd8 8F92      		push r8
 3263 0dda 9F92      		push r9
 3264 0ddc AF92      		push r10
 3265 0dde BF92      		push r11
 3266 0de0 CF92      		push r12
 3267 0de2 DF92      		push r13
 3268 0de4 EF92      		push r14
 3269 0de6 FF92      		push r15
 3270 0de8 0F93      		push r16
 3271 0dea 1F93      		push r17
 3272 0dec DF93      		push r29
 3273 0dee CF93      		push r28
 3274 0df0 00D0      		rcall .
 3275 0df2 00D0      		rcall .
 3276 0df4 CDB7      		in r28,__SP_L__
 3277 0df6 DEB7      		in r29,__SP_H__
 3278               	/* prologue: function */
 3279               	/* frame size = 4 */
 3280 0df8 E82E      		mov r14,r24
 3281 0dfa 092F      		mov r16,r25
 3283               	.LM300:
 3284 0dfc 84E6      		ldi r24,lo8(100)
 3285 0dfe 90E0      		ldi r25,hi8(100)
 3286 0e00 0E94 0000 		call nrk_spin_wait_us
 3287 0e04 CE2C      		mov r12,r14
 3288 0e06 D02E      		mov r13,r16
 3289 0e08 20E0      		ldi r18,lo8(256)
 3290 0e0a 31E0      		ldi r19,hi8(256)
 3292               	.LM301:
 3293 0e0c 8E01      		movw r16,r28
 3294 0e0e 0F5F      		subi r16,lo8(-(1))
 3295 0e10 1F4F      		sbci r17,hi8(-(1))
 3297               	.LM302:
 3298 0e12 83E0      		ldi r24,lo8(3)
 3299 0e14 A82E      		mov r10,r24
 3300 0e16 B12C      		mov r11,__zero_reg__
 3301 0e18 AC0E      		add r10,r28
 3302 0e1a BD1E      		adc r11,r29
 3303               	.L546:
 3305               	.LM303:
 3306 0e1c F601      		movw r30,r12
 3307 0e1e 9080      		ld r9,Z
 3308 0e20 8824      		clr r8
 3309 0e22 8181      		ldd r24,Z+1
 3310 0e24 90E0      		ldi r25,lo8(0)
 3311 0e26 8829      		or r24,r8
 3312 0e28 9929      		or r25,r9
 3313 0e2a 9A83      		std Y+2,r25
 3314 0e2c 8983      		std Y+1,r24
 3316               	.LM304:
 3317 0e2e 84E6      		ldi r24,lo8(100)
 3318 0e30 90E0      		ldi r25,hi8(100)
 3319 0e32 2B83      		std Y+3,r18
 3320 0e34 3C83      		std Y+4,r19
 3321 0e36 0E94 0000 		call nrk_spin_wait_us
 3323               	.LM305:
 3324 0e3a C098      		cbi 56-0x20,0
 3325 0e3c 2B81      		ldd r18,Y+3
 3326 0e3e 3C81      		ldd r19,Y+4
 3327 0e40 822F      		mov r24,r18
 3328 0e42 8068      		ori r24,lo8(-128)
 3329 0e44 8FB9      		out 47-0x20,r24
 3330               	.L542:
 3331 0e46 779B      		sbis 46-0x20,7
 3332 0e48 00C0      		rjmp .L542
 3333 0e4a C901      		movw r24,r18
 3334 0e4c 9595      		asr r25
 3335 0e4e 8795      		ror r24
 3336 0e50 807C      		andi r24,lo8(-64)
 3337 0e52 8FB9      		out 47-0x20,r24
 3338               	.L543:
 3339 0e54 779B      		sbis 46-0x20,7
 3340 0e56 00C0      		rjmp .L543
 3341 0e58 7801      		movw r14,r16
 3343               	.LM306:
 3344 0e5a F801      		movw r30,r16
 3345               	.L545:
 3347               	.LM307:
 3348 0e5c 8081      		ld r24,Z
 3349 0e5e 8FB9      		out 47-0x20,r24
 3350               	.L544:
 3351 0e60 779B      		sbis 46-0x20,7
 3352 0e62 00C0      		rjmp .L544
 3353 0e64 3196      		adiw r30,1
 3354 0e66 EA15      		cp r30,r10
 3355 0e68 FB05      		cpc r31,r11
 3356 0e6a 01F4      		brne .L545
 3357 0e6c C09A      		sbi 56-0x20,0
 3358 0e6e 0894      		sec
 3359 0e70 C11C      		adc r12,__zero_reg__
 3360 0e72 D11C      		adc r13,__zero_reg__
 3361 0e74 2E5F      		subi r18,lo8(-(2))
 3362 0e76 3F4F      		sbci r19,hi8(-(2))
 3364               	.LM308:
 3365 0e78 F1E0      		ldi r31,hi8(272)
 3366 0e7a 2031      		cpi r18,lo8(272)
 3367 0e7c 3F07      		cpc r19,r31
 3368 0e7e 01F4      		brne .L546
 3370               	.LM309:
 3371 0e80 84E6      		ldi r24,lo8(100)
 3372 0e82 90E0      		ldi r25,hi8(100)
 3373 0e84 0E94 0000 		call nrk_spin_wait_us
 3374 0e88 20E4      		ldi r18,lo8(320)
 3375 0e8a 31E0      		ldi r19,hi8(320)
 3376 0e8c 80E1      		ldi r24,lo8(272)
 3377 0e8e 91E0      		ldi r25,hi8(272)
 3378               	.L555:
 3380               	.LM310:
 3381 0e90 1A82      		std Y+2,__zero_reg__
 3382 0e92 1982      		std Y+1,__zero_reg__
 3384               	.LM311:
 3385 0e94 C098      		cbi 56-0x20,0
 3386 0e96 422F      		mov r20,r18
 3387 0e98 4068      		ori r20,lo8(-128)
 3388 0e9a 4FB9      		out 47-0x20,r20
 3389               	.L547:
 3390 0e9c 779B      		sbis 46-0x20,7
 3391 0e9e 00C0      		rjmp .L547
 3392 0ea0 A901      		movw r20,r18
 3393 0ea2 5595      		asr r21
 3394 0ea4 4795      		ror r20
 3395 0ea6 407C      		andi r20,lo8(-64)
 3396 0ea8 4FB9      		out 47-0x20,r20
 3397               	.L548:
 3398 0eaa 779B      		sbis 46-0x20,7
 3399 0eac 00C0      		rjmp .L548
 3400 0eae F801      		movw r30,r16
 3401               	.L550:
 3402 0eb0 4081      		ld r20,Z
 3403 0eb2 4FB9      		out 47-0x20,r20
 3404               	.L549:
 3405 0eb4 779B      		sbis 46-0x20,7
 3406 0eb6 00C0      		rjmp .L549
 3407 0eb8 3196      		adiw r30,1
 3408 0eba EA15      		cp r30,r10
 3409 0ebc FB05      		cpc r31,r11
 3410 0ebe 01F4      		brne .L550
 3411 0ec0 C09A      		sbi 56-0x20,0
 3413               	.LM312:
 3414 0ec2 C098      		cbi 56-0x20,0
 3415 0ec4 482F      		mov r20,r24
 3416 0ec6 4068      		ori r20,lo8(-128)
 3417 0ec8 4FB9      		out 47-0x20,r20
 3418               	.L551:
 3419 0eca 779B      		sbis 46-0x20,7
 3420 0ecc 00C0      		rjmp .L551
 3421 0ece AC01      		movw r20,r24
 3422 0ed0 5595      		asr r21
 3423 0ed2 4795      		ror r20
 3424 0ed4 407C      		andi r20,lo8(-64)
 3425 0ed6 4FB9      		out 47-0x20,r20
 3426               	.L552:
 3427 0ed8 779B      		sbis 46-0x20,7
 3428 0eda 00C0      		rjmp .L552
 3429 0edc F801      		movw r30,r16
 3430               	.L554:
 3431 0ede 4081      		ld r20,Z
 3432 0ee0 4FB9      		out 47-0x20,r20
 3433               	.L553:
 3434 0ee2 779B      		sbis 46-0x20,7
 3435 0ee4 00C0      		rjmp .L553
 3436 0ee6 3196      		adiw r30,1
 3437 0ee8 EA15      		cp r30,r10
 3438 0eea FB05      		cpc r31,r11
 3439 0eec 01F4      		brne .L554
 3440 0eee C09A      		sbi 56-0x20,0
 3441 0ef0 0296      		adiw r24,2
 3442 0ef2 2E5F      		subi r18,lo8(-(2))
 3443 0ef4 3F4F      		sbci r19,hi8(-(2))
 3445               	.LM313:
 3446 0ef6 41E0      		ldi r20,hi8(286)
 3447 0ef8 8E31      		cpi r24,lo8(286)
 3448 0efa 9407      		cpc r25,r20
 3449 0efc 01F4      		brne .L555
 3451               	.LM314:
 3452 0efe 81E0      		ldi r24,lo8(1)
 3453 0f00 90E0      		ldi r25,hi8(1)
 3454 0f02 9A83      		std Y+2,r25
 3455 0f04 8983      		std Y+1,r24
 3457               	.LM315:
 3458 0f06 C098      		cbi 56-0x20,0
 3459 0f08 8EEC      		ldi r24,lo8(-50)
 3460 0f0a 8FB9      		out 47-0x20,r24
 3461               	.L556:
 3462 0f0c 779B      		sbis 46-0x20,7
 3463 0f0e 00C0      		rjmp .L556
 3464 0f10 80E8      		ldi r24,lo8(-128)
 3465 0f12 8FB9      		out 47-0x20,r24
 3466               	.L557:
 3467 0f14 779B      		sbis 46-0x20,7
 3468 0f16 00C0      		rjmp .L557
 3470               	.LM316:
 3471 0f18 C801      		movw r24,r16
 3472 0f1a 0296      		adiw r24,2
 3473 0f1c F801      		movw r30,r16
 3474               	.L559:
 3476               	.LM317:
 3477 0f1e 2081      		ld r18,Z
 3478 0f20 2FB9      		out 47-0x20,r18
 3479               	.L558:
 3480 0f22 779B      		sbis 46-0x20,7
 3481 0f24 00C0      		rjmp .L558
 3482 0f26 3196      		adiw r30,1
 3483 0f28 E817      		cp r30,r24
 3484 0f2a F907      		cpc r31,r25
 3485 0f2c 01F4      		brne .L559
 3486 0f2e C09A      		sbi 56-0x20,0
 3488               	.LM318:
 3489 0f30 C098      		cbi 56-0x20,0
 3490 0f32 8EE9      		ldi r24,lo8(-98)
 3491 0f34 8FB9      		out 47-0x20,r24
 3492               	.L560:
 3493 0f36 779B      		sbis 46-0x20,7
 3494 0f38 00C0      		rjmp .L560
 3495 0f3a 80E8      		ldi r24,lo8(-128)
 3496 0f3c 8FB9      		out 47-0x20,r24
 3497               	.L561:
 3498 0f3e 779B      		sbis 46-0x20,7
 3499 0f40 00C0      		rjmp .L561
 3501               	.LM319:
 3502 0f42 0E5F      		subi r16,lo8(-(2))
 3503 0f44 1F4F      		sbci r17,hi8(-(2))
 3504               	.L563:
 3506               	.LM320:
 3507 0f46 F701      		movw r30,r14
 3508 0f48 8081      		ld r24,Z
 3509 0f4a 8FB9      		out 47-0x20,r24
 3510               	.L562:
 3511 0f4c 779B      		sbis 46-0x20,7
 3512 0f4e 00C0      		rjmp .L562
 3513 0f50 0894      		sec
 3514 0f52 E11C      		adc r14,__zero_reg__
 3515 0f54 F11C      		adc r15,__zero_reg__
 3516 0f56 E016      		cp r14,r16
 3517 0f58 F106      		cpc r15,r17
 3518 0f5a 01F4      		brne .L563
 3519 0f5c C09A      		sbi 56-0x20,0
 3520               	/* epilogue start */
 3522               	.LM321:
 3523 0f5e 0F90      		pop __tmp_reg__
 3524 0f60 0F90      		pop __tmp_reg__
 3525 0f62 0F90      		pop __tmp_reg__
 3526 0f64 0F90      		pop __tmp_reg__
 3527 0f66 CF91      		pop r28
 3528 0f68 DF91      		pop r29
 3529 0f6a 1F91      		pop r17
 3530 0f6c 0F91      		pop r16
 3531 0f6e FF90      		pop r15
 3532 0f70 EF90      		pop r14
 3533 0f72 DF90      		pop r13
 3534 0f74 CF90      		pop r12
 3535 0f76 BF90      		pop r11
 3536 0f78 AF90      		pop r10
 3537 0f7a 9F90      		pop r9
 3538 0f7c 8F90      		pop r8
 3539 0f7e 0895      		ret
 3544               	.Lscope33:
 3546               		.stabd	78,0,0
 3548               	.global	rf_power_up
 3550               	rf_power_up:
 3551               		.stabd	46,0,0
 3553               	.LM322:
 3554               	.LFBB34:
 3555               	/* prologue: function */
 3556               	/* frame size = 0 */
 3558               	.LM323:
 3559               	/* #APP */
 3560               	 ;  77 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 3561 0f80 F894      		cli
 3562               		
 3563               	 ;  0 "" 2
 3565               	.LM324:
 3566               	/* #NOAPP */
 3567 0f82 C098      		cbi 56-0x20,0
 3568 0f84 81E0      		ldi r24,lo8(1)
 3569 0f86 8FB9      		out 47-0x20,r24
 3570               	.L588:
 3571 0f88 779B      		sbis 46-0x20,7
 3572 0f8a 00C0      		rjmp .L588
 3573 0f8c C09A      		sbi 56-0x20,0
 3575               	.LM325:
 3576 0f8e 88EE      		ldi r24,lo8(1000)
 3577 0f90 93E0      		ldi r25,hi8(1000)
 3578 0f92 0E94 0000 		call nrk_spin_wait_us
 3580               	.LM326:
 3581               	/* #APP */
 3582               	 ;  80 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 3583 0f96 7894      		sei
 3584               		
 3585               	 ;  0 "" 2
 3586               	/* epilogue start */
 3588               	.LM327:
 3589               	/* #NOAPP */
 3590 0f98 0895      		ret
 3592               	.Lscope34:
 3594               		.stabd	78,0,0
 3598               	.global	rf_set_rx
 3600               	rf_set_rx:
 3601               		.stabd	46,0,0
 3603               	.LM328:
 3604               	.LFBB35:
 3605 0f9a CF93      		push r28
 3606 0f9c DF93      		push r29
 3607               	/* prologue: function */
 3608               	/* frame size = 0 */
 3609 0f9e EC01      		movw r28,r24
 3610 0fa0 862F      		mov r24,r22
 3612               	.LM329:
 3613 0fa2 C098      		cbi 56-0x20,0
 3614 0fa4 98E0      		ldi r25,lo8(8)
 3615 0fa6 9FB9      		out 47-0x20,r25
 3616               	.L592:
 3617 0fa8 779B      		sbis 46-0x20,7
 3618 0faa 00C0      		rjmp .L592
 3619 0fac C09A      		sbi 56-0x20,0
 3621               	.LM330:
 3622 0fae C098      		cbi 56-0x20,0
 3623 0fb0 98E0      		ldi r25,lo8(8)
 3624 0fb2 9FB9      		out 47-0x20,r25
 3625               	.L593:
 3626 0fb4 779B      		sbis 46-0x20,7
 3627 0fb6 00C0      		rjmp .L593
 3628 0fb8 C09A      		sbi 56-0x20,0
 3630               	.LM331:
 3631 0fba 0E94 0000 		call halRfSetChannel
 3633               	.LM332:
 3634 0fbe D093 0000 		sts (rfSettings)+1,r29
 3635 0fc2 C093 0000 		sts rfSettings,r28
 3636               	/* epilogue start */
 3638               	.LM333:
 3639 0fc6 DF91      		pop r29
 3640 0fc8 CF91      		pop r28
 3641 0fca 0895      		ret
 3643               	.Lscope35:
 3645               		.stabd	78,0,0
 3648               	.global	rf_set_channel
 3650               	rf_set_channel:
 3651               		.stabd	46,0,0
 3653               	.LM334:
 3654               	.LFBB36:
 3655               	/* prologue: function */
 3656               	/* frame size = 0 */
 3658               	.LM335:
 3659 0fcc 0E94 0000 		call halRfSetChannel
 3660               	/* epilogue start */
 3662               	.LM336:
 3663 0fd0 0895      		ret
 3665               	.Lscope36:
 3667               		.stabd	78,0,0
 3673               	.global	rf_init
 3675               	rf_init:
 3676               		.stabd	46,0,0
 3678               	.LM337:
 3679               	.LFBB37:
 3680 0fd2 CF92      		push r12
 3681 0fd4 DF92      		push r13
 3682 0fd6 FF92      		push r15
 3683 0fd8 0F93      		push r16
 3684 0fda 1F93      		push r17
 3685 0fdc DF93      		push r29
 3686 0fde CF93      		push r28
 3687 0fe0 00D0      		rcall .
 3688 0fe2 CDB7      		in r28,__SP_L__
 3689 0fe4 DEB7      		in r29,__SP_H__
 3690               	/* prologue: function */
 3691               	/* frame size = 2 */
 3692 0fe6 8C01      		movw r16,r24
 3693 0fe8 F62E      		mov r15,r22
 3694 0fea 5A83      		std Y+2,r21
 3695 0fec 4983      		std Y+1,r20
 3696 0fee 6901      		movw r12,r18
 3698               	.LM338:
 3699 0ff0 DD9A      		sbi 59-0x20,5
 3701               	.LM339:
 3702 0ff2 88EE      		ldi r24,lo8(1000)
 3703 0ff4 93E0      		ldi r25,hi8(1000)
 3704 0ff6 0E94 0000 		call halWait
 3706               	.LM340:
 3707 0ffa DE98      		cbi 59-0x20,6
 3709               	.LM341:
 3710 0ffc 81E0      		ldi r24,lo8(1)
 3711 0ffe 90E0      		ldi r25,hi8(1)
 3712 1000 0E94 0000 		call halWait
 3714               	.LM342:
 3715 1004 DE9A      		sbi 59-0x20,6
 3717               	.LM343:
 3718 1006 84E6      		ldi r24,lo8(100)
 3719 1008 90E0      		ldi r25,hi8(100)
 3720 100a 0E94 0000 		call halWait
 3722               	.LM344:
 3723               	/* #APP */
 3724               	 ;  290 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 3725 100e F894      		cli
 3726               		
 3727               	 ;  0 "" 2
 3729               	.LM345:
 3730               	/* #NOAPP */
 3731 1010 C098      		cbi 56-0x20,0
 3732 1012 81E0      		ldi r24,lo8(1)
 3733 1014 8FB9      		out 47-0x20,r24
 3734               	.L600:
 3735 1016 779B      		sbis 46-0x20,7
 3736 1018 00C0      		rjmp .L600
 3737 101a C09A      		sbi 56-0x20,0
 3739               	.LM346:
 3740 101c 82EE      		ldi r24,lo8(738)
 3741 101e 92E0      		ldi r25,hi8(738)
 3742 1020 9093 0000 		sts (mdmctrl0)+1,r25
 3743 1024 8093 0000 		sts mdmctrl0,r24
 3745               	.LM347:
 3746 1028 C098      		cbi 56-0x20,0
 3747 102a 81E1      		ldi r24,lo8(17)
 3748 102c 8FB9      		out 47-0x20,r24
 3749               	.L601:
 3750 102e 779B      		sbis 46-0x20,7
 3751 1030 00C0      		rjmp .L601
 3752 1032 82E0      		ldi r24,lo8(2)
 3753 1034 8FB9      		out 47-0x20,r24
 3754               	.L602:
 3755 1036 779B      		sbis 46-0x20,7
 3756 1038 00C0      		rjmp .L602
 3757 103a 82EE      		ldi r24,lo8(-30)
 3758 103c 8FB9      		out 47-0x20,r24
 3759               	.L603:
 3760 103e 779B      		sbis 46-0x20,7
 3761 1040 00C0      		rjmp .L603
 3762 1042 C09A      		sbi 56-0x20,0
 3764               	.LM348:
 3765 1044 C098      		cbi 56-0x20,0
 3766 1046 82E1      		ldi r24,lo8(18)
 3767 1048 8FB9      		out 47-0x20,r24
 3768               	.L604:
 3769 104a 779B      		sbis 46-0x20,7
 3770 104c 00C0      		rjmp .L604
 3771 104e 85E0      		ldi r24,lo8(5)
 3772 1050 8FB9      		out 47-0x20,r24
 3773               	.L605:
 3774 1052 779B      		sbis 46-0x20,7
 3775 1054 00C0      		rjmp .L605
 3776 1056 1FB8      		out 47-0x20,__zero_reg__
 3777               	.L606:
 3778 1058 779B      		sbis 46-0x20,7
 3779 105a 00C0      		rjmp .L606
 3780 105c C09A      		sbi 56-0x20,0
 3782               	.LM349:
 3783 105e C098      		cbi 56-0x20,0
 3784 1060 8CE1      		ldi r24,lo8(28)
 3785 1062 8FB9      		out 47-0x20,r24
 3786               	.L607:
 3787 1064 779B      		sbis 46-0x20,7
 3788 1066 00C0      		rjmp .L607
 3789 1068 1FB8      		out 47-0x20,__zero_reg__
 3790               	.L608:
 3791 106a 779B      		sbis 46-0x20,7
 3792 106c 00C0      		rjmp .L608
 3793 106e 8FE7      		ldi r24,lo8(127)
 3794 1070 8FB9      		out 47-0x20,r24
 3795               	.L609:
 3796 1072 779B      		sbis 46-0x20,7
 3797 1074 00C0      		rjmp .L609
 3798 1076 C09A      		sbi 56-0x20,0
 3800               	.LM350:
 3801 1078 C098      		cbi 56-0x20,0
 3802 107a 89E1      		ldi r24,lo8(25)
 3803 107c 8FB9      		out 47-0x20,r24
 3804               	.L610:
 3805 107e 779B      		sbis 46-0x20,7
 3806 1080 00C0      		rjmp .L610
 3807 1082 81E0      		ldi r24,lo8(1)
 3808 1084 8FB9      		out 47-0x20,r24
 3809               	.L611:
 3810 1086 779B      		sbis 46-0x20,7
 3811 1088 00C0      		rjmp .L611
 3812 108a 84EC      		ldi r24,lo8(-60)
 3813 108c 8FB9      		out 47-0x20,r24
 3814               	.L612:
 3815 108e 779B      		sbis 46-0x20,7
 3816 1090 00C0      		rjmp .L612
 3817 1092 C09A      		sbi 56-0x20,0
 3819               	.LM351:
 3820 1094 C098      		cbi 56-0x20,0
 3821 1096 87E1      		ldi r24,lo8(23)
 3822 1098 8FB9      		out 47-0x20,r24
 3823               	.L613:
 3824 109a 779B      		sbis 46-0x20,7
 3825 109c 00C0      		rjmp .L613
 3826 109e 8AE1      		ldi r24,lo8(26)
 3827 10a0 8FB9      		out 47-0x20,r24
 3828               	.L614:
 3829 10a2 779B      		sbis 46-0x20,7
 3830 10a4 00C0      		rjmp .L614
 3831 10a6 86E5      		ldi r24,lo8(86)
 3832 10a8 8FB9      		out 47-0x20,r24
 3833               	.L615:
 3834 10aa 779B      		sbis 46-0x20,7
 3835 10ac 00C0      		rjmp .L615
 3836 10ae C09A      		sbi 56-0x20,0
 3838               	.LM352:
 3839 10b0 84EF      		ldi r24,lo8(500)
 3840 10b2 91E0      		ldi r25,hi8(500)
 3841 10b4 0E94 0000 		call nrk_spin_wait_us
 3843               	.LM353:
 3844 10b8 C098      		cbi 56-0x20,0
 3845 10ba 88EE      		ldi r24,lo8(-24)
 3846 10bc 8FB9      		out 47-0x20,r24
 3847               	.L616:
 3848 10be 779B      		sbis 46-0x20,7
 3849 10c0 00C0      		rjmp .L616
 3850 10c2 80E8      		ldi r24,lo8(-128)
 3851 10c4 8FB9      		out 47-0x20,r24
 3852               	.L617:
 3853 10c6 779B      		sbis 46-0x20,7
 3854 10c8 00C0      		rjmp .L617
 3855 10ca FE01      		movw r30,r28
 3856 10cc 3196      		adiw r30,1
 3858               	.LM354:
 3859 10ce CE01      		movw r24,r28
 3860 10d0 0396      		adiw r24,3
 3861               	.L619:
 3863               	.LM355:
 3864 10d2 2081      		ld r18,Z
 3865 10d4 2FB9      		out 47-0x20,r18
 3866               	.L618:
 3867 10d6 779B      		sbis 46-0x20,7
 3868 10d8 00C0      		rjmp .L618
 3869 10da 3196      		adiw r30,1
 3870 10dc E817      		cp r30,r24
 3871 10de F907      		cpc r31,r25
 3872 10e0 01F4      		brne .L619
 3873 10e2 C09A      		sbi 56-0x20,0
 3875               	.LM356:
 3876 10e4 84EF      		ldi r24,lo8(500)
 3877 10e6 91E0      		ldi r25,hi8(500)
 3878 10e8 0E94 0000 		call nrk_spin_wait_us
 3880               	.LM357:
 3881               	/* #APP */
 3882               	 ;  324 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 3883 10ec 7894      		sei
 3884               		
 3885               	 ;  0 "" 2
 3887               	.LM358:
 3888               	/* #NOAPP */
 3889 10ee 8F2D      		mov r24,r15
 3890 10f0 0E94 0000 		call halRfSetChannel
 3892               	.LM359:
 3893               	/* #APP */
 3894               	 ;  330 "../../../nano-RK/src/radio/cc2420/source/basic_rf.c" 1
 3895 10f4 7894      		sei
 3896               		
 3897               	 ;  0 "" 2
 3899               	.LM360:
 3900               	/* #NOAPP */
 3901 10f6 1093 0000 		sts (rfSettings)+1,r17
 3902 10fa 0093 0000 		sts rfSettings,r16
 3904               	.LM361:
 3905 10fe 8981      		ldd r24,Y+1
 3906 1100 9A81      		ldd r25,Y+2
 3907 1102 9093 0000 		sts (rfSettings+4)+1,r25
 3908 1106 8093 0000 		sts rfSettings+4,r24
 3910               	.LM362:
 3911 110a D092 0000 		sts (rfSettings+6)+1,r13
 3912 110e C092 0000 		sts rfSettings+6,r12
 3914               	.LM363:
 3915 1112 1092 0000 		sts rfSettings+2,__zero_reg__
 3917               	.LM364:
 3918 1116 1092 0000 		sts rfSettings+8,__zero_reg__
 3920               	.LM365:
 3921 111a 0E94 0000 		call halRfWaitForCrystalOscillator
 3923               	.LM366:
 3924 111e 1092 0000 		sts auto_ack_enable,__zero_reg__
 3926               	.LM367:
 3927 1122 1092 0000 		sts security_enable,__zero_reg__
 3929               	.LM368:
 3930 1126 1092 0000 		sts last_pkt_encrypted,__zero_reg__
 3931               	/* epilogue start */
 3933               	.LM369:
 3934 112a 0F90      		pop __tmp_reg__
 3935 112c 0F90      		pop __tmp_reg__
 3936 112e CF91      		pop r28
 3937 1130 DF91      		pop r29
 3938 1132 1F91      		pop r17
 3939 1134 0F91      		pop r16
 3940 1136 FF90      		pop r15
 3941 1138 DF90      		pop r13
 3942 113a CF90      		pop r12
 3943 113c 0895      		ret
 3945               	.Lscope37:
 3947               		.stabd	78,0,0
 3949               	.global	cc259x_tx
 3951               	cc259x_tx:
 3952               		.stabd	46,0,0
 3954               	.LM370:
 3955               	.LFBB38:
 3956               	/* prologue: function */
 3957               	/* frame size = 0 */
 3959               	.LM371:
 3960 113e 8091 0000 		lds r24,NRK_DEBUG_1
 3961 1142 0E94 0000 		call nrk_gpio_set
 3963               	.LM372:
 3964 1146 8091 0000 		lds r24,NRK_DEBUG_0
 3965 114a 0E94 0000 		call nrk_gpio_set
 3966               	/* epilogue start */
 3968               	.LM373:
 3969 114e 0895      		ret
 3971               	.Lscope38:
 3973               		.stabd	78,0,0
 3975               	.global	cc259x_rx
 3977               	cc259x_rx:
 3978               		.stabd	46,0,0
 3980               	.LM374:
 3981               	.LFBB39:
 3982               	/* prologue: function */
 3983               	/* frame size = 0 */
 3985               	.LM375:
 3986 1150 8091 0000 		lds r24,NRK_DEBUG_1
 3987 1154 0E94 0000 		call nrk_gpio_set
 3989               	.LM376:
 3990 1158 8091 0000 		lds r24,NRK_DEBUG_0
 3991 115c 0E94 0000 		call nrk_gpio_clr
 3992               	/* epilogue start */
 3994               	.LM377:
 3995 1160 0895      		ret
 3997               	.Lscope39:
 3999               		.stabd	78,0,0
 4000               		.comm _nrk_signal_list,4,1
 4001               		.comm rfSettings,9,1
 4002               		.comm nrk_idle_task_stk,128,1
 4003               		.comm nrk_kernel_stk_ptr,2,1
 4004               		.comm error_task,1,1
 4005               		.comm error_num,1,1
 4006               		.comm _nrk_prev_timer_val,1,1
 4007               		.comm _nrk_time_trigger,1,1
 4008               		.comm app_timer0_callback,2,1
 4009               		.comm app_timer0_prescale,1,1
 4010               		.comm radio_sem,2,1
 4011               		.comm auto_ack_enable,1,1
 4012               		.comm security_enable,1,1
 4013               		.comm last_pkt_encrypted,1,1
 4014               		.comm mdmctrl0,2,1
 4015               		.comm tx_ctr,4,1
 4016               		.comm rx_ctr,4,1
 4017               		.comm rx_ready,1,1
 4018               		.comm tmp_blah,2,1
 4039               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 basic_rf.c
     /tmp/ccuhKJQt.s:2      *ABS*:0000003f __SREG__
     /tmp/ccuhKJQt.s:3      *ABS*:0000003e __SP_H__
     /tmp/ccuhKJQt.s:4      *ABS*:0000003d __SP_L__
     /tmp/ccuhKJQt.s:5      *ABS*:00000000 __tmp_reg__
     /tmp/ccuhKJQt.s:6      *ABS*:00000001 __zero_reg__
     /tmp/ccuhKJQt.s:128    .text:00000000 rf_power_down
     /tmp/ccuhKJQt.s:180    .text:0000001e rf_security_last_pkt_status
                            *COM*:00000001 last_pkt_encrypted
     /tmp/ccuhKJQt.s:200    .text:00000024 rf_security_set_ctr_counter
                            *COM*:00000004 tx_ctr
     /tmp/ccuhKJQt.s:295    .text:00000098 rf_security_enable
                            *COM*:00000001 security_enable
     /tmp/ccuhKJQt.s:355    .text:000000d8 rf_security_disable
     /tmp/ccuhKJQt.s:395    .text:000000fa rf_get_sem
                            *COM*:00000002 radio_sem
     /tmp/ccuhKJQt.s:416    .text:00000104 rf_tx_power
     /tmp/ccuhKJQt.s:461    .text:00000128 rf_addr_decode_enable
                            *COM*:00000002 mdmctrl0
     /tmp/ccuhKJQt.s:503    .text:00000154 rf_addr_decode_disable
     /tmp/ccuhKJQt.s:545    .text:00000180 rf_auto_ack_enable
                            *COM*:00000001 auto_ack_enable
     /tmp/ccuhKJQt.s:591    .text:000001b2 rf_auto_ack_disable
     /tmp/ccuhKJQt.s:636    .text:000001e2 rf_rx_on
                            *COM*:00000009 rfSettings
                            *COM*:00000001 rx_ready
     /tmp/ccuhKJQt.s:679    .text:00000206 rf_polling_rx_on
     /tmp/ccuhKJQt.s:722    .text:0000022a rf_rx_off
     /tmp/ccuhKJQt.s:755    .text:00000240 rf_busy
     /tmp/ccuhKJQt.s:783    .text:00000252 rf_rx_check_fifop
     /tmp/ccuhKJQt.s:811    .text:00000264 rf_rx_check_sfd
     /tmp/ccuhKJQt.s:839    .text:00000276 rf_polling_rx_packet
                            *COM*:00000004 rx_ctr
     /tmp/ccuhKJQt.s:1539   .text:00000638 rf_rx_packet
     /tmp/ccuhKJQt.s:1567   .text:0000064a rf_flush_rx_fifo
     /tmp/ccuhKJQt.s:1604   .text:00000664 rf_set_cca_thresh
     /tmp/ccuhKJQt.s:1650   .text:0000068a rf_test_mode
     /tmp/ccuhKJQt.s:1717   .text:000006d2 rf_data_mode
     /tmp/ccuhKJQt.s:1782   .text:00000716 rf_rx_set_serial
     /tmp/ccuhKJQt.s:1831   .text:00000744 rf_tx_set_serial
     /tmp/ccuhKJQt.s:1872   .text:00000766 rf_set_preamble_length
     /tmp/ccuhKJQt.s:1920   .text:0000079c rf_set_cca_mode
     /tmp/ccuhKJQt.s:1971   .text:000007da rf_carrier_on
     /tmp/ccuhKJQt.s:1998   .text:000007e8 rf_carrier_off
     /tmp/ccuhKJQt.s:2026   .text:000007f6 rf_tx_packet
     /tmp/ccuhKJQt.s:2624   .text:00000ac6 rf_tx_tdma_packet
     /tmp/ccuhKJQt.s:3182   .text:00000d7c rf_addr_decode_set_my_mac
     /tmp/ccuhKJQt.s:3257   .text:00000dd8 rf_security_set_key
     /tmp/ccuhKJQt.s:3550   .text:00000f80 rf_power_up
     /tmp/ccuhKJQt.s:3600   .text:00000f9a rf_set_rx
     /tmp/ccuhKJQt.s:3650   .text:00000fcc rf_set_channel
     /tmp/ccuhKJQt.s:3675   .text:00000fd2 rf_init
     /tmp/ccuhKJQt.s:3951   .text:0000113e cc259x_tx
     /tmp/ccuhKJQt.s:3977   .text:00001150 cc259x_rx
                            *COM*:00000004 _nrk_signal_list
                            *COM*:00000080 nrk_idle_task_stk
                            *COM*:00000002 nrk_kernel_stk_ptr
                            *COM*:00000001 error_task
                            *COM*:00000001 error_num
                            *COM*:00000001 _nrk_prev_timer_val
                            *COM*:00000001 _nrk_time_trigger
                            *COM*:00000002 app_timer0_callback
                            *COM*:00000001 app_timer0_prescale
                            *COM*:00000002 tmp_blah

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
nrk_sem_post
halWait
_nrk_os_timer_get
nrk_high_speed_timer_wait
nrk_spin_wait_us
halRfSetChannel
halRfWaitForCrystalOscillator
NRK_DEBUG_1
nrk_gpio_set
NRK_DEBUG_0
nrk_gpio_clr
